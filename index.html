<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bhuban Developer | Mission Control</title>
    <script src="/shared/config.js"></script>
    <script src="/shared/pathway-manager.js"></script>
    <script src="/shared/auth-service.js"></script>
    <script src="/shared/auth-manager.js"></script>
    <script>
        // Developer Mission Control - Unrestricted Access
        console.log('üõ†Ô∏è Developer Mode: Authentication bypass active');
    </script>
    <script src="pathway-monitor.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            /* Developer Dashboard Theme - Cyberpunk Neon */
            --bg-primary: #0a0a0f;
            --bg-secondary: rgba(15, 15, 25, 0.9);
            --bg-card: rgba(20, 20, 35, 0.7);
            --bg-hover: rgba(0, 212, 255, 0.1);
            --glass-bg: rgba(15, 15, 25, 0.6);
            --glass-border: rgba(0, 212, 255, 0.2);
            --accent-cyan: #00d4ff;
            --accent-purple: #a855f7;
            --accent-pink: #ec4899;
            --accent-green: #10b981;
            --accent-orange: #f59e0b;
            --accent-red: #ef4444;
            --accent-gradient: linear-gradient(135deg, #00d4ff 0%, #a855f7 50%, #ec4899 100%);
            --accent-gradient-green: linear-gradient(135deg, #10b981 0%, #00d4ff 100%);
            --accent-gradient-orange: linear-gradient(135deg, #f59e0b 0%, #ef4444 100%);
            --text-primary: #ffffff;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-color: rgba(0, 212, 255, 0.15);
            --shadow-color: rgba(0, 0, 0, 0.5);
            --glow-cyan: rgba(0, 212, 255, 0.5);
            --glow-purple: rgba(168, 85, 247, 0.5);
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --sidebar-bg: linear-gradient(180deg, #0a0a0f 0%, #1a1a2e 100%);
            --sidebar-text: #ffffff;
        }

        [data-theme="light"] {
            --bg-primary: #f8fafc;
            --bg-secondary: rgba(255, 255, 255, 0.95);
            --bg-card: rgba(255, 255, 255, 0.9);
            --bg-hover: rgba(0, 212, 255, 0.05);
            --glass-bg: rgba(255, 255, 255, 0.8);
            --glass-border: rgba(0, 212, 255, 0.3);
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --text-muted: #94a3b8;
        }

        /* ==========================================
           OPENING ANIMATION STYLES
           ========================================== */
        .opening-overlay {
            position: fixed;
            inset: 0;
            background: #000;
            z-index: 10000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .opening-overlay.hidden {
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.8s ease, visibility 0.8s ease;
        }

        /* Scanline Effect */
        .scanlines {
            position: absolute;
            inset: 0;
            background: linear-gradient(to bottom,
                    transparent 50%,
                    rgba(0, 212, 255, 0.03) 50%);
            background-size: 100% 4px;
            pointer-events: none;
            animation: scanlineMove 8s linear infinite;
        }

        @keyframes scanlineMove {
            0% {
                transform: translateY(0);
            }

            100% {
                transform: translateY(4px);
            }
        }

        /* Boot Sequence Text */
        .boot-sequence {
            font-family: 'Courier New', monospace;
            font-size: 13px;
            color: var(--accent-cyan);
            text-align: left;
            max-width: 600px;
            width: 90%;
            opacity: 0;
            transform: translateY(20px);
        }

        .boot-sequence.active {
            opacity: 1;
            transform: translateY(0);
            transition: all 0.5s ease;
        }

        .boot-line {
            margin: 4px 0;
            opacity: 0;
            animation: bootLineAppear 0.3s ease forwards;
        }

        @keyframes bootLineAppear {
            to {
                opacity: 1;
            }
        }

        .boot-line.success {
            color: var(--success);
        }

        .boot-line.warning {
            color: var(--warning);
        }

        .boot-line.error {
            color: var(--error);
        }

        /* Logo Animation Container */
        .opening-logo-container {
            position: relative;
            width: 200px;
            height: 200px;
            margin-bottom: 40px;
            opacity: 0;
            transform: scale(0.5);
        }

        .opening-logo-container.active {
            opacity: 1;
            transform: scale(1);
            transition: all 1s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        /* Hexagon Grid Background */
        .hex-grid {
            position: absolute;
            inset: -100px;
            opacity: 0;
            transform: rotate(0deg);
        }

        .hex-grid.active {
            opacity: 0.3;
            transform: rotate(360deg);
            transition: all 2s ease;
        }

        .hex {
            position: absolute;
            width: 60px;
            height: 34px;
            background: transparent;
            border: 1px solid var(--accent-cyan);
            opacity: 0.5;
        }

        .hex::before,
        .hex::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: transparent;
            border: 1px solid var(--accent-cyan);
        }

        .hex::before {
            transform: rotate(60deg);
        }

        .hex::after {
            transform: rotate(-60deg);
        }

        /* Central Logo */
        .opening-logo {
            position: absolute;
            inset: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.2), rgba(168, 85, 247, 0.2));
            border: 3px solid var(--accent-cyan);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 64px;
            color: var(--accent-cyan);
            box-shadow: 0 0 60px rgba(0, 212, 255, 0.5), inset 0 0 60px rgba(0, 212, 255, 0.1);
            animation: logoPulse 2s ease-in-out infinite;
        }

        @keyframes logoPulse {

            0%,
            100% {
                transform: scale(1);
                box-shadow: 0 0 60px rgba(0, 212, 255, 0.5);
            }

            50% {
                transform: scale(1.05);
                box-shadow: 0 0 100px rgba(0, 212, 255, 0.8), 0 0 150px rgba(168, 85, 247, 0.4);
            }
        }

        /* Orbiting Rings */
        .orbit-ring {
            position: absolute;
            border: 2px solid transparent;
            border-radius: 50%;
            opacity: 0;
        }

        .orbit-ring.active {
            opacity: 1;
            transition: all 1s ease;
        }

        .orbit-ring:nth-child(2) {
            inset: -20px;
            border-top-color: var(--accent-cyan);
            border-right-color: var(--accent-purple);
            animation: orbit1 4s linear infinite;
        }

        .orbit-ring:nth-child(3) {
            inset: -40px;
            border-bottom-color: var(--accent-pink);
            border-left-color: var(--accent-cyan);
            animation: orbit2 6s linear infinite reverse;
        }

        .orbit-ring:nth-child(4) {
            inset: -60px;
            border-top-color: var(--accent-purple);
            border-bottom-color: var(--accent-pink);
            animation: orbit3 8s linear infinite;
        }

        @keyframes orbit1 {
            to {
                transform: rotate(360deg);
            }
        }

        @keyframes orbit2 {
            to {
                transform: rotate(-360deg);
            }
        }

        @keyframes orbit3 {
            to {
                transform: rotate(360deg);
            }
        }

        /* Progress Bar */
        .opening-progress {
            width: 300px;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
            margin-top: 40px;
            opacity: 0;
        }

        .opening-progress.active {
            opacity: 1;
            transition: opacity 0.5s ease;
        }

        .opening-progress-bar {
            height: 100%;
            width: 0%;
            background: var(--accent-gradient);
            border-radius: 2px;
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
            transition: width 0.3s ease;
        }

        .opening-progress-text {
            text-align: center;
            margin-top: 12px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            color: var(--accent-cyan);
            opacity: 0;
        }

        .opening-progress-text.active {
            opacity: 1;
            transition: opacity 0.5s ease;
        }

        /* Title Animation */
        .opening-title {
            font-size: 32px;
            font-weight: 800;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            text-align: center;
            opacity: 0;
            transform: translateY(30px);
            letter-spacing: 20px;
        }

        .opening-title.active {
            opacity: 1;
            transform: translateY(0);
            letter-spacing: 4px;
            transition: all 1s ease;
        }

        .opening-subtitle {
            font-size: 14px;
            color: var(--text-secondary);
            text-align: center;
            margin-top: 8px;
            opacity: 0;
        }

        .opening-subtitle.active {
            opacity: 1;
            transition: opacity 0.8s ease 0.3s;
        }

        /* Glitch Effect */
        .glitch {
            position: relative;
        }

        .glitch::before,
        .glitch::after {
            content: attr(data-text);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
        }

        .glitch.active::before {
            animation: glitch1 0.3s ease;
            color: var(--accent-cyan);
            opacity: 0.8;
        }

        .glitch.active::after {
            animation: glitch2 0.3s ease;
            color: var(--accent-pink);
            opacity: 0.8;
        }

        @keyframes glitch1 {

            0%,
            100% {
                transform: translate(0);
                opacity: 0;
            }

            20% {
                transform: translate(-3px, 3px);
                opacity: 0.8;
            }

            40% {
                transform: translate(3px, -3px);
                opacity: 0.8;
            }

            60% {
                transform: translate(-3px, -3px);
                opacity: 0.8;
            }

            80% {
                transform: translate(3px, 3px);
                opacity: 0.8;
            }
        }

        @keyframes glitch2 {

            0%,
            100% {
                transform: translate(0);
                opacity: 0;
            }

            20% {
                transform: translate(3px, -3px);
                opacity: 0.8;
            }

            40% {
                transform: translate(-3px, 3px);
                opacity: 0.8;
            }

            60% {
                transform: translate(3px, 3px);
                opacity: 0.8;
            }

            80% {
                transform: translate(-3px, -3px);
                opacity: 0.8;
            }
        }

        /* Particle Burst */
        .particle-burst {
            position: absolute;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            background: var(--accent-cyan);
            opacity: 0;
        }

        .particle-burst.active {
            animation: particleBurst 1s ease-out forwards;
        }

        @keyframes particleBurst {
            0% {
                transform: translate(0, 0) scale(1);
                opacity: 1;
            }

            100% {
                transform: translate(var(--tx), var(--ty)) scale(0);
                opacity: 0;
            }
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        body {
            background: var(--bg-primary);
            color: var(--text-primary);
            overflow-x: hidden;
            transition: background 0.5s ease, color 0.5s ease;
        }

        /* Animated Background Grid */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background:
                linear-gradient(rgba(0, 212, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 212, 255, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            pointer-events: none;
            z-index: -1;
            animation: gridMove 20s linear infinite;
        }

        @keyframes gridMove {
            0% {
                transform: perspective(500px) rotateX(60deg) translateY(0);
            }

            100% {
                transform: perspective(500px) rotateX(60deg) translateY(50px);
            }
        }

        /* Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 70px;
            background: var(--glass-bg);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 24px;
            z-index: 1000;
            border-bottom: 1px solid var(--glass-border);
            box-shadow: 0 4px 30px var(--shadow-color);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 22px;
            font-weight: 800;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            cursor: pointer;
            letter-spacing: -0.5px;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: var(--accent-gradient);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            -webkit-text-fill-color: white;
            font-size: 18px;
            animation: logoPulse 3s ease-in-out infinite;
        }

        @keyframes logoPulse {

            0%,
            100% {
                box-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
            }

            50% {
                box-shadow: 0 0 40px rgba(168, 85, 247, 0.7), 0 0 60px rgba(236, 72, 153, 0.4);
            }
        }

        .header-center {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-pill {
            display: flex;
            background: var(--bg-card);
            border-radius: 50px;
            padding: 6px;
            border: 1px solid var(--border-color);
        }

        .nav-pill-btn {
            padding: 10px 20px;
            border: none;
            background: transparent;
            color: var(--text-secondary);
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            border-radius: 50px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-pill-btn:hover {
            color: var(--text-primary);
            background: var(--bg-hover);
        }

        .nav-pill-btn.active {
            background: var(--accent-gradient);
            color: white;
            box-shadow: 0 4px 20px rgba(0, 212, 255, 0.4);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .header-btn {
            width: 42px;
            height: 42px;
            border: none;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .header-btn:hover {
            border-color: var(--accent-cyan);
            color: var(--accent-cyan);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
        }

        /* Sidebar */
        .sidebar {
            position: fixed;
            left: 0;
            top: 70px;
            width: 260px;
            height: calc(100vh - 70px);
            background: var(--sidebar-bg);
            border-right: 1px solid var(--border-color);
            overflow-y: auto;
            padding: 20px 0;
            z-index: 100;
        }

        .sidebar-section {
            padding: 0 16px;
            margin-bottom: 24px;
        }

        .sidebar-title {
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-muted);
            margin-bottom: 12px;
            padding: 0 12px;
        }

        .sidebar-link {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            margin-bottom: 4px;
            position: relative;
            overflow: hidden;
        }

        .sidebar-link::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 3px;
            background: var(--accent-gradient);
            transform: scaleY(0);
            transition: transform 0.3s ease;
        }

        .sidebar-link:hover::before,
        .sidebar-link.active::before {
            transform: scaleY(1);
        }

        .sidebar-link:hover,
        .sidebar-link.active {
            background: var(--bg-hover);
            color: var(--accent-cyan);
        }

        .sidebar-link i {
            width: 20px;
            text-align: center;
            font-size: 16px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-left: auto;
            animation: pulse 2s ease-in-out infinite;
        }

        .status-dot.online {
            background: var(--success);
            box-shadow: 0 0 10px var(--success);
        }

        .status-dot.warning {
            background: var(--warning);
            box-shadow: 0 0 10px var(--warning);
        }

        .status-dot.error {
            background: var(--error);
            box-shadow: 0 0 10px var(--error);
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
                transform: scale(1);
            }

            50% {
                opacity: 0.7;
                transform: scale(1.2);
            }
        }

        /* Main Content */
        .main-content {
            margin-left: 260px;
            margin-top: 70px;
            padding: 24px;
            min-height: calc(100vh - 70px);
        }

        /* Dashboard Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 20px;
        }

        /* Cards */
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            padding: 24px;
            position: relative;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
            scroll-margin-top: 90px;
            /* Account for fixed header */
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: var(--accent-gradient);
            opacity: 0.5;
        }

        .card:hover {
            transform: translateY(-4px);
            border-color: var(--accent-cyan);
            box-shadow: 0 20px 60px rgba(0, 212, 255, 0.15);
        }

        .card-glow {
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(0, 212, 255, 0.1) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .card:hover .card-glow {
            opacity: 1;
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 16px;
            font-weight: 700;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-title i {
            color: var(--accent-cyan);
        }

        .card-badge {
            padding: 6px 12px;
            border-radius: 50px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .card-badge.success {
            background: rgba(16, 185, 129, 0.15);
            color: var(--success);
        }

        .card-badge.warning {
            background: rgba(245, 158, 11, 0.15);
            color: var(--warning);
        }

        .card-badge.error {
            background: rgba(239, 68, 68, 0.15);
            color: var(--error);
        }

        /* Mission Control - Health Beacon */
        .health-beacon {
            grid-column: span 4;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 280px;
        }

        .beacon-circle {
            width: 160px;
            height: 160px;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            animation: beaconGlow 3s ease-in-out infinite;
        }

        .beacon-circle.healthy {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(0, 212, 255, 0.2));
            border: 3px solid var(--success);
            box-shadow: 0 0 60px rgba(16, 185, 129, 0.4), inset 0 0 40px rgba(16, 185, 129, 0.1);
        }

        .beacon-circle.warning {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(239, 68, 68, 0.2));
            border: 3px solid var(--warning);
            box-shadow: 0 0 60px rgba(245, 158, 11, 0.4), inset 0 0 40px rgba(245, 158, 11, 0.1);
            animation: beaconGlowWarning 3s ease-in-out infinite;
        }

        @keyframes beaconGlowWarning {

            0%,
            100% {
                transform: scale(1);
                box-shadow: 0 0 60px rgba(245, 158, 11, 0.4);
            }

            50% {
                transform: scale(1.05);
                box-shadow: 0 0 80px rgba(239, 68, 68, 0.6), 0 0 100px rgba(245, 158, 11, 0.3);
            }
        }

        @keyframes beaconGlow {

            0%,
            100% {
                transform: scale(1);
                box-shadow: 0 0 60px rgba(16, 185, 129, 0.4);
            }

            50% {
                transform: scale(1.05);
                box-shadow: 0 0 80px rgba(16, 185, 129, 0.6), 0 0 100px rgba(0, 212, 255, 0.3);
            }
        }

        .beacon-status {
            font-size: 14px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--success);
        }

        .beacon-value {
            font-size: 42px;
            font-weight: 800;
            margin-top: 4px;
            text-align: center;
            line-height: 1;
        }

        /* Stats Grid */
        .stats-grid {
            grid-column: span 8;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
        }

        .stat-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--accent-gradient);
        }

        .stat-icon {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            margin-bottom: 16px;
        }

        .stat-icon.cyan {
            background: rgba(0, 212, 255, 0.15);
            color: var(--accent-cyan);
        }

        .stat-icon.purple {
            background: rgba(168, 85, 247, 0.15);
            color: var(--accent-purple);
        }

        .stat-icon.pink {
            background: rgba(236, 72, 153, 0.15);
            color: var(--accent-pink);
        }

        .stat-label {
            font-size: 12px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .stat-change {
            font-size: 12px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .stat-change.positive {
            color: var(--success);
        }

        .stat-change.negative {
            color: var(--error);
        }

        /* Data Plumbing Visualization */
        .data-plumbing {
            grid-column: span 7;
            min-height: 350px;
        }

        .plumbing-container {
            position: relative;
            height: 280px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px;
        }

        .plumbing-node {
            width: 80px;
            height: 80px;
            border-radius: 20px;
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 2;
            transition: all 0.3s ease;
        }

        .plumbing-node:hover {
            border-color: var(--accent-cyan);
            box-shadow: 0 0 30px rgba(0, 212, 255, 0.3);
            transform: scale(1.1);
        }

        .plumbing-node i {
            font-size: 24px;
            color: var(--accent-cyan);
            margin-bottom: 4px;
        }

        .plumbing-node span {
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
            color: var(--text-secondary);
        }

        .plumbing-pipe {
            position: absolute;
            height: 4px;
            background: linear-gradient(90deg, var(--accent-cyan), var(--accent-purple));
            border-radius: 2px;
            overflow: hidden;
        }

        .plumbing-pipe::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.8), transparent);
            animation: dataFlow 2s linear infinite;
        }

        @keyframes dataFlow {
            0% {
                left: -100%;
            }

            100% {
                left: 100%;
            }
        }

        .pipe-1 {
            top: 50%;
            left: 100px;
            right: 100px;
            transform: translateY(-50px);
        }

        .pipe-2 {
            top: 50%;
            left: 100px;
            right: 100px;
            transform: translateY(50px);
        }

        .pipe-3 {
            top: 50%;
            left: 100px;
            right: 100px;
        }

        /* Traffic Monitor */
        .traffic-monitor {
            grid-column: span 5;
            min-height: 350px;
        }

        .traffic-chart {
            height: 200px;
            position: relative;
        }

        .chart-bars {
            display: flex;
            align-items: flex-end;
            justify-content: space-between;
            height: 100%;
            gap: 8px;
            padding-top: 20px;
        }

        .chart-bar {
            flex: 1;
            background: var(--accent-gradient);
            border-radius: 8px 8px 0 0;
            min-height: 20px;
            position: relative;
            animation: barGrow 1s ease-out;
            transition: all 0.3s ease;
        }

        .chart-bar:hover {
            filter: brightness(1.3);
            transform: scaleY(1.05);
        }

        @keyframes barGrow {
            from {
                transform: scaleY(0);
            }

            to {
                transform: scaleY(1);
            }
        }

        .chart-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 12px;
            font-size: 11px;
            color: var(--text-muted);
        }

        /* Logic Vault */
        .logic-vault {
            grid-column: span 6;
        }

        .search-box {
            display: flex;
            align-items: center;
            gap: 12px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 12px 16px;
            margin-bottom: 20px;
        }

        .search-box i {
            color: var(--text-muted);
        }

        .search-box input {
            flex: 1;
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 14px;
            outline: none;
        }

        .search-box input::placeholder {
            color: var(--text-muted);
        }

        .logic-cards {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .logic-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 16px;
            display: flex;
            align-items: flex-start;
            gap: 16px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .logic-card:hover {
            border-color: var(--accent-purple);
            transform: translateX(8px);
            box-shadow: 0 10px 30px rgba(168, 85, 247, 0.15);
        }

        .logic-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            background: rgba(168, 85, 247, 0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: var(--accent-purple);
            flex-shrink: 0;
        }

        .logic-content h4 {
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .logic-content p {
            font-size: 12px;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .logic-formula {
            font-family: 'Courier New', monospace;
            font-size: 11px;
            background: rgba(0, 0, 0, 0.3);
            padding: 8px 12px;
            border-radius: 8px;
            margin-top: 8px;
            color: var(--accent-cyan);
        }

        /* Fuel Tank */
        .fuel-tank {
            grid-column: span 6;
        }

        .runway-display {
            display: flex;
            align-items: center;
            gap: 24px;
            margin-bottom: 24px;
        }

        .runway-clock {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: var(--bg-secondary);
            border: 4px solid var(--border-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .runway-clock::before {
            content: '';
            position: absolute;
            inset: -4px;
            border-radius: 50%;
            background: conic-gradient(var(--success) 75%, transparent 0);
            -webkit-mask: radial-gradient(farthest-side, transparent calc(100% - 4px), #fff calc(100% - 4px));
            mask: radial-gradient(farthest-side, transparent calc(100% - 4px), #fff calc(100% - 4px));
        }

        .runway-days {
            font-size: 36px;
            font-weight: 800;
            color: var(--success);
            text-align: center;
            min-height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .runway-label {
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-muted);
            text-align: center;
        }

        .money-bars {
            flex: 1;
        }

        .money-bar {
            margin-bottom: 16px;
        }

        .money-bar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
            font-size: 12px;
            min-height: 20px;
        }

        .money-bar-header span {
            display: flex;
            align-items: center;
        }

        .money-bar-track {
            height: 12px;
            background: var(--bg-secondary);
            border-radius: 6px;
            overflow: hidden;
        }

        .money-bar-fill {
            height: 100%;
            border-radius: 6px;
            transition: width 1s ease;
        }

        .money-bar-fill.in {
            background: var(--accent-gradient-green);
            width: 75%;
        }

        .money-bar-fill.out {
            background: var(--accent-gradient-orange);
            width: 60%;
        }

        .expense-icons {
            display: flex;
            gap: 16px;
            margin-top: 20px;
            justify-content: space-between;
        }

        .expense-item {
            flex: 1;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .expense-item:hover {
            transform: translateY(-4px);
            border-color: var(--accent-cyan);
        }

        .expense-icon {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 12px;
            font-size: 20px;
            flex-shrink: 0;
        }

        .expense-icon.cloud {
            background: rgba(0, 212, 255, 0.15);
            color: var(--accent-cyan);
        }

        .expense-icon.team {
            background: rgba(168, 85, 247, 0.15);
            color: var(--accent-purple);
        }

        .expense-icon.promo {
            background: rgba(245, 158, 11, 0.15);
            color: var(--warning);
        }

        .expense-label {
            font-size: 11px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
            text-align: center;
            width: 100%;
        }

        .expense-value {
            font-size: 16px;
            font-weight: 700;
            color: var(--text-primary);
            text-align: center;
            width: 100%;
            min-height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Time Machine */
        .time-machine {
            grid-column: span 12;
        }

        .timeline-container {
            position: relative;
            padding: 40px 0;
        }

        .timeline-track {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--bg-secondary);
            border-radius: 2px;
            transform: translateY(-50%);
        }

        .timeline-progress {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 65%;
            background: var(--accent-gradient);
            border-radius: 2px;
        }

        .timeline-events {
            display: flex;
            justify-content: space-between;
            position: relative;
        }

        .timeline-event {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .timeline-event:hover {
            transform: translateY(-8px);
        }

        .event-marker {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: var(--bg-secondary);
            border: 3px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            margin-bottom: 12px;
            position: relative;
            z-index: 2;
            transition: all 0.3s ease;
        }

        .timeline-event:hover .event-marker,
        .timeline-event.active .event-marker {
            border-color: var(--accent-cyan);
            background: var(--accent-gradient);
            box-shadow: 0 0 30px rgba(0, 212, 255, 0.5);
        }

        .event-date {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .event-label {
            font-size: 11px;
            color: var(--text-muted);
            margin-top: 4px;
        }

        /* Cater Team Toolkit */
        .cater-toolkit {
            grid-column: span 6;
        }

        .toolkit-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .toolkit-btn {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            cursor: pointer !important;
            transition: all 0.3s ease;
            pointer-events: auto !important;
            user-select: none;
        }

        .toolkit-btn:hover {
            border-color: var(--accent-pink);
            transform: translateY(-4px);
            box-shadow: 0 10px 30px rgba(236, 72, 153, 0.2);
        }

        .toolkit-btn:active {
            transform: translateY(-2px);
        }

        .toolkit-btn i {
            font-size: 28px;
            color: var(--accent-pink);
            margin-bottom: 12px;
            display: block;
            pointer-events: none !important;
        }

        .toolkit-btn span {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-primary);
            pointer-events: none !important;
        }

        /* Dependency Web */
        .dependency-web {
            grid-column: span 6;
        }

        .web-container {
            height: 250px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .web-center {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: var(--accent-gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            position: relative;
            z-index: 2;
            animation: centerPulse 3s ease-in-out infinite;
        }

        @keyframes centerPulse {

            0%,
            100% {
                box-shadow: 0 0 40px rgba(0, 212, 255, 0.5);
            }

            50% {
                box-shadow: 0 0 60px rgba(168, 85, 247, 0.7), 0 0 80px rgba(236, 72, 153, 0.4);
            }
        }

        .web-node {
            position: absolute;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            transition: all 0.3s ease;
            cursor: pointer;
            pointer-events: auto;
            user-select: none;
        }

        .web-node:hover {
            border-color: var(--accent-cyan);
            transform: scale(1.2);
        }

        .web-node:active {
            transform: scale(1.1);
        }

        .web-node i {
            pointer-events: none;
        }

        .web-node:nth-child(2) {
            top: 10%;
            left: 20%;
        }

        .web-node:nth-child(3) {
            top: 10%;
            right: 20%;
        }

        .web-node:nth-child(4) {
            bottom: 10%;
            left: 20%;
        }

        .web-node:nth-child(5) {
            bottom: 10%;
            right: 20%;
        }

        .web-line {
            position: absolute;
            height: 2px;
            background: linear-gradient(90deg, var(--accent-cyan), var(--accent-purple));
            opacity: 0.3;
            transform-origin: left center;
        }

        /* Alert Feed */
        .alert-feed {
            grid-column: span 4;
        }

        .alert-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .alert-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 16px;
            background: var(--bg-secondary);
            border-radius: 12px;
            border-left: 3px solid var(--accent-cyan);
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .alert-icon {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            flex-shrink: 0;
        }

        .alert-icon.info {
            background: rgba(0, 212, 255, 0.15);
            color: var(--accent-cyan);
        }

        .alert-icon.warning {
            background: rgba(245, 158, 11, 0.15);
            color: var(--warning);
        }

        .alert-icon.error {
            background: rgba(239, 68, 68, 0.15);
            color: var(--error);
        }

        .alert-content {
            flex: 1;
        }

        .alert-title {
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .alert-time {
            font-size: 11px;
            color: var(--text-muted);
        }

        /* Responsive */
        @media (max-width: 1400px) {
            .dashboard-grid {
                grid-template-columns: repeat(6, 1fr);
            }

            .health-beacon,
            .stats-grid,
            .data-plumbing,
            .traffic-monitor,
            .logic-vault,
            .fuel-tank,
            .cater-toolkit,
            .dependency-web,
            .alert-feed {
                grid-column: span 6;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }

            .main-content {
                margin-left: 0;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .health-beacon,
            .stats-grid,
            .data-plumbing,
            .traffic-monitor,
            .logic-vault,
            .fuel-tank,
            .cater-toolkit,
            .dependency-web,
            .alert-feed,
            .time-machine {
                grid-column: span 1;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-primary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent-cyan);
        }

        /* Loading Animation */
        .loading-pulse {
            animation: loadingPulse 1.5s ease-in-out infinite;
        }

        @keyframes loadingPulse {

            0%,
            100% {
                opacity: 0.4;
            }

            50% {
                opacity: 0.8;
            }
        }

        /* Floating Particles */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            opacity: 0.3;
            animation: float 20s infinite;
        }

        .particle:nth-child(3n+1) {
            background: var(--accent-cyan);
        }

        .particle:nth-child(3n+2) {
            background: var(--accent-purple);
        }

        .particle:nth-child(3n) {
            background: var(--accent-pink);
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }

            10% {
                opacity: 0.3;
            }

            90% {
                opacity: 0.3;
            }

            100% {
                transform: translateY(-100vh) rotate(720deg);
                opacity: 0;
            }
        }

        /* ==========================================
           SYSTEM CONTROL PANEL STYLES
           ========================================== */
        .system-control {
            grid-column: span 2;
        }

        .control-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 16px;
            background: var(--bg-card);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .control-btn:hover {
            transform: translateY(-2px);
            border-color: var(--accent-cyan);
        }

        .control-btn.start:hover {
            background: rgba(0, 230, 118, 0.1);
            border-color: var(--success);
        }

        .control-btn.stop:hover {
            background: rgba(255, 82, 82, 0.1);
            border-color: var(--error);
        }

        .control-btn.restart:hover {
            background: rgba(255, 171, 64, 0.1);
            border-color: var(--accent-orange);
        }

        .control-btn i {
            font-size: 20px;
        }

        .control-btn span {
            font-size: 12px;
            font-weight: 600;
        }

        .backend-status-bar {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-top: 16px;
            padding: 12px 16px;
            background: var(--bg-card);
            border-radius: 10px;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .status-indicator.online {
            background: var(--success);
            box-shadow: 0 0 10px var(--success);
        }

        .status-indicator.offline {
            background: var(--error);
        }

        .status-indicator.starting {
            background: var(--accent-orange);
            animation: pulse 0.5s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
                transform: scale(1);
            }

            50% {
                opacity: 0.6;
                transform: scale(1.1);
            }
        }

        .status-port {
            margin-left: auto;
            font-size: 12px;
            color: var(--text-muted);
            font-family: 'Courier New', monospace;
        }

        .app-controls-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .app-control-card {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px;
            background: var(--bg-card);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .app-control-card:hover {
            border-color: var(--accent-cyan);
            transform: translateY(-2px);
        }

        .app-control-card.disabled {
            opacity: 0.5;
            border-color: var(--error);
        }

        .app-control-header {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .app-control-header i {
            font-size: 18px;
            color: var(--accent-cyan);
        }

        .app-control-header span {
            font-size: 14px;
            font-weight: 600;
        }

        .toggle-switch {
            position: relative;
            width: 50px;
            height: 26px;
            cursor: pointer;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            inset: 0;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 26px;
            transition: all 0.3s ease;
        }

        .toggle-slider::before {
            content: '';
            position: absolute;
            height: 20px;
            width: 20px;
            left: 3px;
            bottom: 3px;
            background: var(--text-muted);
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .toggle-switch input:checked+.toggle-slider {
            background: var(--success);
        }

        .toggle-switch input:checked+.toggle-slider::before {
            transform: translateX(24px);
            background: white;
        }

        .quick-action-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 14px 16px;
            background: var(--bg-card);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 13px;
            font-weight: 600;
        }

        .quick-action-btn:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--accent-cyan);
            transform: translateX(4px);
        }

        .quick-action-btn i {
            color: var(--accent-cyan);
        }

        .env-vars-container {
            background: var(--bg-card);
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 12px;
        }

        .env-var-row {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            transition: background 0.2s ease;
        }

        .env-var-row:last-child {
            border-bottom: none;
        }

        .env-var-row:hover {
            background: rgba(255, 255, 255, 0.03);
        }

        .env-key {
            font-family: 'Courier New', monospace;
            font-size: 13px;
            color: var(--accent-cyan);
            min-width: 140px;
        }

        .env-value {
            flex: 1;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            color: var(--text-secondary);
            margin: 0 12px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .env-edit-btn {
            padding: 6px 10px;
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .env-edit-btn:hover {
            background: var(--accent-cyan);
            border-color: var(--accent-cyan);
            color: white;
        }

        .add-env-btn {
            width: 100%;
            padding: 12px;
            background: transparent;
            border: 2px dashed rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .add-env-btn:hover {
            border-color: var(--success);
            color: var(--success);
            background: rgba(0, 230, 118, 0.05);
        }

        .logs-container {
            background: #0d1117;
            border-radius: 12px;
            padding: 16px;
            max-height: 400px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.6;
        }

        .log-entry {
            padding: 4px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .log-time {
            color: var(--text-muted);
        }

        .log-info {
            color: var(--accent-cyan);
        }

        .log-success {
            color: var(--success);
        }

        .log-error {
            color: var(--error);
        }

        .log-warning {
            color: var(--accent-orange);
        }

        /* ==========================================
           INTEGRATED TERMINAL STYLES
           ========================================== */
        .integrated-terminal {
            margin-top: 16px;
            background: #0d1117;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            overflow: hidden;
            font-family: 'Courier New', 'Consolas', monospace;
            animation: terminalSlideDown 0.3s ease;
        }

        @keyframes terminalSlideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .terminal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.05);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .terminal-title {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .terminal-title i {
            color: var(--success);
        }

        .terminal-controls {
            display: flex;
            gap: 8px;
        }

        .terminal-btn {
            padding: 6px 10px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 6px;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 12px;
        }

        .terminal-btn:hover {
            background: var(--accent-cyan);
            color: white;
        }

        .terminal-btn.close:hover {
            background: var(--error);
        }

        .terminal-body {
            padding: 16px;
            min-height: 200px;
            max-height: 300px;
            overflow-y: auto;
            font-size: 13px;
            line-height: 1.6;
        }

        .terminal-line {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 4px;
            flex-wrap: wrap;
        }

        .terminal-prompt {
            color: var(--success);
            font-weight: bold;
        }

        .terminal-path {
            color: var(--accent-cyan);
        }

        .terminal-cursor {
            color: var(--success);
            animation: cursorBlink 1s infinite;
        }

        @keyframes cursorBlink {

            0%,
            50% {
                opacity: 1;
            }

            51%,
            100% {
                opacity: 0;
            }
        }

        .terminal-text {
            color: var(--text-primary);
        }

        .terminal-line.info .terminal-text {
            color: var(--text-muted);
        }

        .terminal-line.success .terminal-text {
            color: var(--success);
        }

        .terminal-line.error .terminal-text {
            color: var(--error);
        }

        .terminal-line.warning .terminal-text {
            color: var(--accent-orange);
        }

        .terminal-input-line {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 16px;
            background: rgba(0, 0, 0, 0.3);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .terminal-input {
            flex: 1;
            background: transparent;
            border: none;
            color: var(--text-primary);
            font-family: inherit;
            font-size: 13px;
            outline: none;
        }

        .terminal-input::placeholder {
            color: var(--text-muted);
        }

        /* Terminal Scrollbar */
        .terminal-body::-webkit-scrollbar {
            width: 8px;
        }

        .terminal-body::-webkit-scrollbar-track {
            background: transparent;
        }

        .terminal-body::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
        }

        .terminal-body::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        @media (max-width: 1400px) {
            .system-control {
                grid-column: span 6;
            }
        }

        @media (max-width: 768px) {
            .system-control {
                grid-column: span 1;
            }

            .app-controls-grid {
                grid-template-columns: 1fr;
            }
        }

        /* ==========================================
           PATHWAY SYSTEM STYLES
           ========================================== */
        .pathway-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px;
            margin-bottom: 8px;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .pathway-item:hover {
            border-color: var(--accent-cyan);
            transform: translateX(4px);
        }

        .pathway-name {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .pathway-path {
            font-size: 11px;
            color: var(--text-muted);
            font-family: 'Courier New', monospace;
            margin-top: 4px;
        }

        .pathway-status {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            flex-shrink: 0;
        }

        .pathway-status.valid {
            background: rgba(16, 185, 129, 0.15);
            color: var(--success);
        }

        .pathway-status.warning {
            background: rgba(245, 158, 11, 0.15);
            color: var(--warning);
        }

        .pathway-status.error {
            background: rgba(239, 68, 68, 0.15);
            color: var(--error);
        }

        .pathway-status.unknown {
            background: rgba(148, 163, 184, 0.15);
            color: var(--text-muted);
        }

        /* Watchtower Specific Styles */
        .watchtower-card {
            grid-column: span 8;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .apdex-panel {
            grid-column: span 4;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .apdex-gauge {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            border: 8px solid var(--bg-secondary);
            border-top-color: var(--accent-cyan);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            margin-bottom: 20px;
            box-shadow: 0 0 30px rgba(0, 212, 255, 0.2);
        }

        .apdex-score {
            font-size: 48px;
            font-weight: 800;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .telemetry-stream {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 12px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            height: 300px;
            overflow-y: auto;
            border: 1px solid var(--glass-border);
        }

        .log-entry {
            font-size: 12px;
            padding: 4px 8px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .log-entry.error {
            color: var(--accent-red);
            background: rgba(239, 68, 68, 0.05);
        }

        .log-entry.success {
            color: var(--accent-green);
            background: rgba(16, 185, 129, 0.05);
        }

        .log-entry.info {
            color: var(--accent-cyan);
        }

        .log-time {
            color: var(--text-muted);
            min-width: 80px;
        }

        .log-type {
            font-weight: 700;
            min-width: 120px;
            text-transform: uppercase;
        }

        .log-latency {
            margin-left: auto;
            color: var(--accent-purple);
            font-weight: 600;
        }

        .token-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            margin-bottom: 8px;
        }

        .token-uid {
            font-weight: 700;
            color: var(--accent-cyan);
        }

        .token-app {
            font-size: 11px;
            color: var(--text-muted);
        }

        .token-status {
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 4px;
        }

        .token-status.active {
            background: rgba(16, 185, 129, 0.2);
            color: var(--success);
        }
    </style>
</head>

<body>
    <!-- Opening Animation Overlay -->
    <div class="opening-overlay" id="openingOverlay">
        <div class="scanlines"></div>

        <!-- Logo Container with Orbiting Rings -->
        <div class="opening-logo-container" id="openingLogo">
            <div class="hex-grid" id="hexGrid"></div>
            <div class="orbit-ring"></div>
            <div class="orbit-ring"></div>
            <div class="orbit-ring"></div>
            <div class="opening-logo">
                <i class="fas fa-code"></i>
            </div>
        </div>

        <!-- Title -->
        <h1 class="opening-title glitch" id="openingTitle" data-text="BHUBAN DEV">BHUBAN DEV</h1>
        <p class="opening-subtitle" id="openingSubtitle">Mission Control System</p>

        <!-- Boot Sequence -->
        <div class="boot-sequence" id="bootSequence"></div>

        <!-- Progress Bar -->
        <div class="opening-progress" id="openingProgress">
            <div class="opening-progress-bar" id="progressBar"></div>
        </div>
        <div class="opening-progress-text" id="progressText">Initializing...</div>
    </div>

    <!-- Particles -->
    <div class="particles" id="particles"></div>

    <!-- Header -->
    <header class="header">
        <div class="header-left">
            <div class="logo" onclick="window.location.href='/Bhuban%20video%20stream%20app/index.html'">
                <div class="logo-icon">
                    <i class="fas fa-code"></i>
                </div>
                <span>BHUBAN DEV</span>
            </div>
        </div>

        <div class="header-center">
            <div class="nav-pill">
                <button class="nav-pill-btn active" data-section="mission-control">
                    <i class="fas fa-rocket"></i>
                    Mission Control
                </button>
                <button class="nav-pill-btn" data-section="data-plumbing">
                    <i class="fas fa-network-wired"></i>
                    Data Flow
                </button>
                <button class="nav-pill-btn" data-section="logic-vault">
                    <i class="fas fa-brain"></i>
                    Logic Vault
                </button>
                <button class="nav-pill-btn" data-section="fuel-tank">
                    <i class="fas fa-wallet"></i>
                    Fuel Tank
                </button>
            </div>
        </div>

        <div class="header-right">
            <a href="advanced-dashboard.html" class="header-btn" title="Advanced AI Dashboard" style="background: linear-gradient(135deg, var(--accent-cyan), var(--accent-purple)); color: white; animation: pulse 2s ease-in-out infinite; position: relative;">
                <i class="fas fa-brain"></i>
                <span style="position: absolute; top: -4px; right: -4px; width: 8px; height: 8px; background: var(--success); border-radius: 50%; box-shadow: 0 0 10px var(--success);"></span>
            </a>
            <button class="header-btn" onclick="window.location.href='/Bhuban%20video%20stream%20app/index.html'"
                title="Back to App">
                <i class="fas fa-play"></i>
            </button>
            <button class="header-btn" onclick="toggleAIChat()" title="Shree AI Assistant" id="aiChatBtn">
                <i class="fas fa-robot"></i>
            </button>
            <button class="header-btn" title="Notifications">
                <i class="fas fa-bell"></i>
            </button>
            <button class="header-btn" title="Settings">
                <i class="fas fa-cog"></i>
            </button>
            <div class="header-btn" id="userIconContainer"
                style="background: var(--accent-gradient); color: white; position: relative; cursor: pointer;"
                onclick="toggleUserMenu()">
                <i class="fas fa-user" id="userAvatar"></i>
                <div id="userDropdown"
                    style="display: none; position: absolute; top: 100%; right: 0; background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 12px; padding: 8px; min-width: 200px; z-index: 2000; margin-top: 8px; box-shadow: 0 10px 30px rgba(0,0,0,0.5);">
                    <div style="padding: 10px; border-bottom: 1px solid var(--border-color); font-weight: 600; font-size: 13px;"
                        id="userName">Developer</div>
                    <div style="padding: 8px 10px; font-size: 11px; color: var(--text-muted); border-bottom: 1px solid var(--border-color); display: none;"
                        id="userEmail">email@example.com</div>
                    <div style="padding: 8px 10px; font-size: 11px; color: var(--text-muted); border-bottom: 1px solid var(--border-color);"
                        id="userStatus">Developer Account</div>
                    <div style="padding: 10px; cursor: pointer; color: var(--error); font-size: 13px; display: flex; align-items: center; gap: 8px;"
                        onclick="handleGlobalLogout()">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-section">
            <div class="sidebar-title">Overview</div>
            <a href="#mission-control" class="sidebar-link active">
                <i class="fas fa-rocket"></i>
                <span>Mission Control</span>
                <div class="status-dot online"></div>
            </a>
            <a href="#pathway-system" class="sidebar-link">
                <i class="fas fa-route"></i>
                <span>Pathway System</span>
                <div class="status-dot online" id="pathwayStatusDot"></div>
            </a>
            <a href="#user-analytics" class="sidebar-link">
                <i class="fas fa-users-cog"></i>
                <span>User Analytics</span>
                <div class="status-dot online"></div>
            </a>
            <a href="#watchtower" class="sidebar-link">
                <i class="fas fa-satellite-dish"></i>
                <span>Watchtower</span>
                <div class="status-dot online"></div>
            </a>
            <a href="#data-plumbing" class="sidebar-link">
                <i class="fas fa-network-wired"></i>
                <span>Data Plumbing</span>
                <div class="status-dot online"></div>
            </a>
            <a href="#traffic-monitor" class="sidebar-link">
                <i class="fas fa-chart-line"></i>
                <span>Traffic Monitor</span>
            </a>
        </div>

        <div class="sidebar-section">
            <div class="sidebar-title">Systems</div>
            <a href="#logic-vault" class="sidebar-link">
                <i class="fas fa-brain"></i>
                <span>Logic Vault</span>
            </a>
            <a href="#fuel-tank" class="sidebar-link">
                <i class="fas fa-wallet"></i>
                <span>Fuel Tank</span>
            </a>
            <a href="#time-machine" class="sidebar-link">
                <i class="fas fa-clock"></i>
                <span>Time Machine</span>
            </a>
        </div>

        <div class="sidebar-section">
            <div class="sidebar-title">Tools</div>
            <a href="#cater-toolkit" class="sidebar-link">
                <i class="fas fa-tools"></i>
                <span>Cater Toolkit</span>
            </a>
            <a href="#dependency-web" class="sidebar-link">
                <i class="fas fa-project-diagram"></i>
                <span>Dependency Web</span>
            </a>
            <a href="#alert-feed" class="sidebar-link">
                <i class="fas fa-exclamation-triangle"></i>
                <span>Alert Feed</span>
                <div class="status-dot warning"></div>
            </a>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <div class="dashboard-grid">
            <!-- Health Beacon -->
            <div class="card health-beacon" id="mission-control">
                <div class="card-glow"></div>
                <div class="beacon-circle healthy">
                    <span class="beacon-status">Loading...</span>
                    <span class="beacon-value">Checking Status</span>
                </div>
                <div style="margin-top: 24px; text-align: center;">
                    <div style="font-size: 14px; color: var(--text-secondary); margin-bottom: 8px;">Connecting to
                        backend...</div>
                    <div style="font-size: 12px; color: var(--text-muted);">
                        <i class="fas fa-spinner fa-spin"></i> Please wait
                    </div>
                </div>
            </div>

            <!-- Stats Grid -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon cyan">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-label">Live Users</div>
                    <div class="stat-value" id="liveUsers">--</div>
                    <div class="stat-change positive">
                        <i class="fas fa-info"></i> Loading...
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon purple">
                        <i class="fas fa-server"></i>
                    </div>
                    <div class="stat-label">Server Load</div>
                    <div class="stat-value">--</div>
                    <div class="stat-change positive">
                        <i class="fas fa-info"></i> Loading...
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon pink">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <div class="stat-label">Avg Response</div>
                    <div class="stat-value">--</div>
                    <div class="stat-change positive">
                        <i class="fas fa-info"></i> Loading...
                    </div>
                </div>
            </div>

            <!-- Advanced AI Dashboard Card - NEW! -->
            <div class="card" style="grid-column: span 12; background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(168, 85, 247, 0.1)); border: 2px solid var(--accent-cyan); position: relative; overflow: hidden;">
                <div class="card-glow"></div>
                
                <!-- Animated Background -->
                <div style="position: absolute; inset: 0; opacity: 0.1; pointer-events: none;">
                    <div style="position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: radial-gradient(circle, var(--accent-cyan) 1px, transparent 1px); background-size: 50px 50px; animation: gridMove 20s linear infinite;"></div>
                </div>

                <div style="position: relative; z-index: 1;">
                    <div class="card-header" style="border-bottom: 1px solid rgba(0, 212, 255, 0.2);">
                        <div class="card-title" style="font-size: 20px;">
                            <i class="fas fa-brain" style="color: var(--accent-cyan); font-size: 24px; margin-right: 12px;"></i>
                            <span style="background: linear-gradient(135deg, var(--accent-cyan), var(--accent-purple)); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: 800;">
                                Advanced AI Developer Dashboard
                            </span>
                            <span class="card-badge success" style="margin-left: 12px; animation: pulse 2s ease-in-out infinite;">
                                <i class="fas fa-sparkles"></i> NEW
                            </span>
                        </div>
                    </div>

                    <div style="padding: 24px; display: grid; grid-template-columns: 2fr 1fr; gap: 24px;">
                        <!-- Left: Description -->
                        <div>
                            <h3 style="font-size: 16px; font-weight: 700; color: var(--text-primary); margin-bottom: 12px;">
                                üéØ AI-Powered Visual Debugging System
                            </h3>
                            <p style="font-size: 14px; color: var(--text-secondary); line-height: 1.6; margin-bottom: 16px;">
                                Point-and-click debugging with multi-model AI analysis. Automatically detect bugs, analyze errors, and generate fixes using Qwen 3.5-VL, GPT-5.3 Codex, Sarvam Indus, and Llama 4 Scout.
                            </p>

                            <!-- Features Grid -->
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin-bottom: 20px;">
                                <div style="display: flex; align-items: center; gap: 8px; font-size: 13px; color: var(--text-secondary);">
                                    <i class="fas fa-crosshairs" style="color: var(--accent-cyan);"></i>
                                    <span>Point-and-Click Debugging</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 8px; font-size: 13px; color: var(--text-secondary);">
                                    <i class="fas fa-robot" style="color: var(--accent-purple);"></i>
                                    <span>4 AI Models Integrated</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 8px; font-size: 13px; color: var(--text-secondary);">
                                    <i class="fas fa-magic" style="color: var(--accent-pink);"></i>
                                    <span>Autonomous Code Fixing</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 8px; font-size: 13px; color: var(--text-secondary);">
                                    <i class="fas fa-chart-line" style="color: var(--success);"></i>
                                    <span>Real-Time Monitoring</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 8px; font-size: 13px; color: var(--text-secondary);">
                                    <i class="fas fa-code" style="color: var(--accent-cyan);"></i>
                                    <span>Agent Integration (Cursor/Replit)</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 8px; font-size: 13px; color: var(--text-secondary);">
                                    <i class="fas fa-volume-up" style="color: var(--accent-purple);"></i>
                                    <span>Audio Feedback System</span>
                                </div>
                            </div>

                            <!-- Launch Button -->
                            <a href="advanced-dashboard.html" style="display: inline-flex; align-items: center; gap: 12px; padding: 14px 28px; background: linear-gradient(135deg, var(--accent-cyan), var(--accent-purple)); border: none; border-radius: 12px; color: white; font-size: 15px; font-weight: 700; text-decoration: none; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 20px rgba(0, 212, 255, 0.4);" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 30px rgba(0, 212, 255, 0.6)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 20px rgba(0, 212, 255, 0.4)';">
                                <i class="fas fa-rocket"></i>
                                Launch Advanced Dashboard
                                <i class="fas fa-arrow-right"></i>
                            </a>

                            <div style="margin-top: 12px; font-size: 12px; color: var(--text-muted);">
                                <i class="fas fa-keyboard"></i> Keyboard: Ctrl+E (targeting) | Ctrl+F (freeze) | Ctrl+R (refresh)
                            </div>
                        </div>

                        <!-- Right: Preview/Stats -->
                        <div style="background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(0, 212, 255, 0.2); border-radius: 16px; padding: 20px;">
                            <h4 style="font-size: 14px; font-weight: 700; color: var(--text-primary); margin-bottom: 16px; text-align: center;">
                                <i class="fas fa-chart-bar"></i> Dashboard Features
                            </h4>

                            <div style="display: flex; flex-direction: column; gap: 12px;">
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: rgba(0, 212, 255, 0.05); border-radius: 8px;">
                                    <span style="font-size: 12px; color: var(--text-secondary);">Live Sandbox</span>
                                    <span style="font-size: 14px; font-weight: 700; color: var(--accent-cyan);">‚úì</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: rgba(168, 85, 247, 0.05); border-radius: 8px;">
                                    <span style="font-size: 12px; color: var(--text-secondary);">AI Analysis</span>
                                    <span style="font-size: 14px; font-weight: 700; color: var(--accent-purple);">‚úì</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: rgba(236, 72, 153, 0.05); border-radius: 8px;">
                                    <span style="font-size: 12px; color: var(--text-secondary);">Diagnostic HUD</span>
                                    <span style="font-size: 14px; font-weight: 700; color: var(--accent-pink);">‚úì</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: rgba(16, 185, 129, 0.05); border-radius: 8px;">
                                    <span style="font-size: 12px; color: var(--text-secondary);">Pulse Monitor</span>
                                    <span style="font-size: 14px; font-weight: 700; color: var(--success);">‚úì</span>
                                </div>
                            </div>

                            <div style="margin-top: 16px; padding: 12px; background: rgba(0, 212, 255, 0.1); border-radius: 8px; text-align: center;">
                                <div style="font-size: 24px; font-weight: 800; color: var(--accent-cyan); margin-bottom: 4px;">100%</div>
                                <div style="font-size: 11px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px;">Complete</div>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Links -->
                    <div style="padding: 0 24px 24px 24px; display: flex; gap: 12px; flex-wrap: wrap;">
                        <a href="advanced-dashboard.html" style="padding: 8px 16px; background: rgba(0, 212, 255, 0.1); border: 1px solid rgba(0, 212, 255, 0.3); border-radius: 8px; color: var(--accent-cyan); font-size: 12px; font-weight: 600; text-decoration: none; transition: all 0.2s ease;" onmouseover="this.style.background='rgba(0, 212, 255, 0.2)';" onmouseout="this.style.background='rgba(0, 212, 255, 0.1)';">
                            <i class="fas fa-book"></i> Quick Start Guide
                        </a>
                        <a href="advanced-dashboard.html" style="padding: 8px 16px; background: rgba(168, 85, 247, 0.1); border: 1px solid rgba(168, 85, 247, 0.3); border-radius: 8px; color: var(--accent-purple); font-size: 12px; font-weight: 600; text-decoration: none; transition: all 0.2s ease;" onmouseover="this.style.background='rgba(168, 85, 247, 0.2)';" onmouseout="this.style.background='rgba(168, 85, 247, 0.1)';">
                            <i class="fas fa-video"></i> Video Tutorial
                        </a>
                        <a href="http://localhost:8000/docs" target="_blank" style="padding: 8px 16px; background: rgba(236, 72, 153, 0.1); border: 1px solid rgba(236, 72, 153, 0.3); border-radius: 8px; color: var(--accent-pink); font-size: 12px; font-weight: 600; text-decoration: none; transition: all 0.2s ease;" onmouseover="this.style.background='rgba(236, 72, 153, 0.2)';" onmouseout="this.style.background='rgba(236, 72, 153, 0.1)';">
                            <i class="fas fa-code"></i> API Documentation
                        </a>
                    </div>
                </div>
            </div>

            <!-- Data Plumbing -->
            <div class="card data-plumbing" id="data-plumbing">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-network-wired"></i>
                        Data Plumbing (Live Pathway)
                    </div>
                    <span class="card-badge success">Live</span>
                </div>
                <div class="plumbing-container">
                    <div class="plumbing-node" id="node-viewer">
                        <i class="fas fa-play"></i>
                        <span>Viewer App</span>
                    </div>
                    <div class="plumbing-pipe pipe-1"></div>
                    <div class="plumbing-node" id="node-creator">
                        <i class="fas fa-video"></i>
                        <span>Creator App</span>
                    </div>
                    <div class="plumbing-pipe pipe-2"></div>
                    <div class="plumbing-node" id="node-api">
                        <i class="fas fa-server"></i>
                        <span>API Gateway</span>
                    </div>
                    <div class="plumbing-pipe pipe-3"></div>
                    <div class="plumbing-node" id="node-db">
                        <i class="fas fa-database"></i>
                        <span>Database</span>
                    </div>
                </div>
                <div style="display: flex; justify-content: space-between; padding: 0 20px;">
                    <div style="text-align: center;">
                        <div id="requestsPerMin" style="font-size: 24px; font-weight: 800; color: var(--accent-cyan);">
                            --</div>
                        <div style="font-size: 11px; color: var(--text-muted);">Requests/min</div>
                    </div>
                    <div style="text-align: center;">
                        <div id="systemUptime" style="font-size: 24px; font-weight: 800; color: var(--accent-purple);">
                            --</div>
                        <div style="font-size: 11px; color: var(--text-muted);">Uptime</div>
                    </div>
                    <div style="text-align: center;">
                        <div id="systemErrors" style="font-size: 24px; font-weight: 800; color: var(--success);">--
                        </div>
                        <div style="font-size: 11px; color: var(--text-muted);">Errors</div>
                    </div>
                </div>
            </div>

            <!-- Pathway System Monitoring Panel -->
            <div class="card" id="pathway-system" style="grid-column: span 12;">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-route"></i>
                        Pathway System Monitor
                    </div>
                    <div style="display: flex; gap: 12px; align-items: center;">
                        <span class="card-badge" id="pathwayOverallStatus">Checking...</span>
                        <button class="header-btn" onclick="refreshPathways()" title="Refresh">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                        <button class="header-btn" onclick="exportPathwayReport()" title="Export Report">
                            <i class="fas fa-download"></i>
                        </button>
                    </div>
                </div>

                <!-- Summary Stats -->
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 24px;">
                    <div class="stat-card">
                        <div class="stat-icon cyan">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-label">Valid Pathways</div>
                        <div class="stat-value" id="pathwayValidCount">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon pink">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="stat-label">Warnings</div>
                        <div class="stat-value" id="pathwayWarningCount">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon purple">
                            <i class="fas fa-times-circle"></i>
                        </div>
                        <div class="stat-label">Errors</div>
                        <div class="stat-value" id="pathwayErrorCount">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon cyan">
                            <i class="fas fa-route"></i>
                        </div>
                        <div class="stat-label">Total Pathways</div>
                        <div class="stat-value" id="pathwayTotalCount">0</div>
                    </div>
                </div>

                <!-- Pathway Categories -->
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;">
                    <!-- Navigation Pathways -->
                    <div
                        style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 16px; padding: 20px;">
                        <h3
                            style="font-size: 16px; font-weight: 700; margin-bottom: 16px; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-compass" style="color: var(--accent-cyan);"></i>
                            Navigation Pathways
                        </h3>
                        <div id="navigationPathways" style="max-height: 300px; overflow-y: auto;"></div>
                    </div>

                    <!-- API Pathways -->
                    <div
                        style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 16px; padding: 20px;">
                        <h3
                            style="font-size: 16px; font-weight: 700; margin-bottom: 16px; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-plug" style="color: var(--accent-purple);"></i>
                            API Pathways
                        </h3>
                        <div id="apiPathways" style="max-height: 300px; overflow-y: auto;"></div>
                    </div>

                    <!-- Storage Pathways -->
                    <div
                        style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 16px; padding: 20px;">
                        <h3
                            style="font-size: 16px; font-weight: 700; margin-bottom: 16px; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-database" style="color: var(--accent-pink);"></i>
                            Storage Pathways
                        </h3>
                        <div id="storagePathways" style="max-height: 300px; overflow-y: auto;"></div>
                    </div>

                    <!-- File Pathways -->
                    <div
                        style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 16px; padding: 20px;">
                        <h3
                            style="font-size: 16px; font-weight: 700; margin-bottom: 16px; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-file-code" style="color: var(--accent-green);"></i>
                            File Pathways
                        </h3>
                        <div id="filePathways" style="max-height: 300px; overflow-y: auto;"></div>
                    </div>
                </div>

                <!-- Configuration Info -->
                <div
                    style="margin-top: 24px; background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 16px; padding: 20px;">
                    <h3
                        style="font-size: 16px; font-weight: 700; margin-bottom: 16px; display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-cog" style="color: var(--accent-orange);"></i>
                        Configuration
                    </h3>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px;">
                        <div>
                            <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 4px;">API Base URL
                            </div>
                            <div style="font-size: 14px; font-weight: 600; color: var(--accent-cyan);"
                                id="configApiBase">-</div>
                        </div>
                        <div>
                            <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 4px;">Total Pages
                            </div>
                            <div style="font-size: 14px; font-weight: 600;" id="configTotalPages">-</div>
                        </div>
                        <div>
                            <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 4px;">Total Endpoints
                            </div>
                            <div style="font-size: 14px; font-weight: 600;" id="configTotalEndpoints">-</div>
                        </div>
                    </div>
                </div>

                <!-- Documentation Links -->
                <div
                    style="margin-top: 24px; padding: 20px; background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(168, 85, 247, 0.1)); border: 1px solid var(--border-color); border-radius: 16px;">
                    <h4
                        style="font-size: 14px; font-weight: 700; margin-bottom: 12px; display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-book"></i>
                        Documentation & Resources
                    </h4>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px;">
                        <a href="../Bhuban video stream app/PATHWAY_SYSTEM.md" target="_blank"
                            style="padding: 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; text-decoration: none; color: var(--text-primary); display: flex; align-items: center; gap: 8px; transition: all 0.3s ease;">
                            <i class="fas fa-file-alt" style="color: var(--accent-cyan);"></i>
                            <span style="font-size: 13px; font-weight: 600;">Full Guide</span>
                        </a>
                        <a href="../Bhuban video stream app/QUICK_REFERENCE.md" target="_blank"
                            style="padding: 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; text-decoration: none; color: var(--text-primary); display: flex; align-items: center; gap: 8px; transition: all 0.3s ease;">
                            <i class="fas fa-bolt" style="color: var(--accent-purple);"></i>
                            <span style="font-size: 13px; font-weight: 600;">Quick Reference</span>
                        </a>
                        <a href="../Bhuban video stream app/backend/docs/VIDEO_URL_ARCHITECTURE.md" target="_blank"
                            style="padding: 12px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; text-decoration: none; color: var(--text-primary); display: flex; align-items: center; gap: 8px; transition: all 0.3s ease;">
                            <i class="fas fa-video" style="color: var(--accent-pink);"></i>
                            <span style="font-size: 13px; font-weight: 600;">Video URLs</span>
                        </a>
                    </div>
                </div>
            </div>

            <!-- System Control Panel -->
            <div class="card system-control" id="system-control">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-power-off"></i>
                        System Control Center
                    </div>
                    <span class="card-badge success" id="system-status">Online</span>
                </div>

                <!-- Backend Control -->
                <div style="margin-bottom: 24px;">
                    <h4
                        style="font-size: 14px; color: var(--text-muted); margin-bottom: 16px; text-transform: uppercase; letter-spacing: 1px;">
                        <i class="fas fa-server"></i> Backend Server
                    </h4>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px;">
                        <button class="control-btn start" id="btn-start-backend" onclick="toggleTerminal()">
                            <i class="fas fa-terminal"></i>
                            <span>Open Terminal</span>
                        </button>
                        <button class="control-btn restart" id="btn-restart-backend" onclick="controlBackend('check')">
                            <i class="fas fa-sync-alt"></i>
                            <span>Check Status</span>
                        </button>
                    </div>

                    <!-- Integrated Terminal -->
                    <div id="integrated-terminal" class="integrated-terminal" style="display: none;">
                        <div class="terminal-header">
                            <div class="terminal-title">
                                <i class="fas fa-terminal"></i>
                                <span>Backend Terminal</span>
                            </div>
                            <div class="terminal-controls">
                                <button class="terminal-btn" onclick="runNpmInstall()" title="Install Dependencies">
                                    <i class="fas fa-download"></i>
                                </button>
                                <button class="terminal-btn" onclick="runNpmStart()" title="Start Server"
                                    style="color: var(--success);">
                                    <i class="fas fa-play"></i>
                                </button>
                                <button class="terminal-btn" onclick="stopBackend()" title="Stop Server"
                                    style="color: var(--error);">
                                    <i class="fas fa-stop"></i>
                                </button>
                                <button class="terminal-btn" onclick="clearTerminal()" title="Clear">
                                    <i class="fas fa-eraser"></i>
                                </button>
                                <button class="terminal-btn close" onclick="toggleTerminal()" title="Close">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                        <div class="terminal-body" id="terminal-output">
                            <div class="terminal-line">
                                <span class="terminal-prompt">‚ûú</span>
                                <span class="terminal-path">~/bhuban-backend</span>
                                <span class="terminal-cursor">_</span>
                            </div>
                            <div class="terminal-line info">
                                <span class="terminal-text">Welcome to Bhuban Backend Terminal</span>
                            </div>
                            <div class="terminal-line info">
                                <span class="terminal-text">Click "Install Dependencies" if first time, then "Start
                                    Server"</span>
                            </div>
                        </div>
                        <div class="terminal-input-line">
                            <span class="terminal-prompt">‚ûú</span>
                            <span class="terminal-path">~/bhuban-backend</span>
                            <input type="text" id="terminal-input" name="terminal-input" class="terminal-input"
                                placeholder="Type command or use buttons above..." aria-label="Terminal command input"
                                autocomplete="off">
                        </div>
                    </div>

                    <div id="terminal-hint"
                        style="margin-top: 12px; padding: 12px; background: rgba(0,0,0,0.3); border-radius: 8px; font-size: 12px; color: var(--text-muted);">
                        <i class="fas fa-info-circle"></i>
                        <strong style="color: var(--success);">To start the backend:</strong><br>
                        <strong>OPTION 1 (EASIEST):</strong> Double-click <span
                            style="color: #00d4ff;">"START.bat"</span> in the root folder<br>
                        <strong>OPTION 2:</strong> Click "Open Terminal" button above for manual instructions
                    </div>
                    <div class="backend-status-bar" id="backend-status">
                        <div class="status-indicator offline" id="backend-indicator"></div>
                        <span id="backend-status-text">Backend Offline</span>
                        <span class="status-port">Port: 5000</span>
                    </div>
                </div>

                <!-- App Controls -->
                <div style="margin-bottom: 24px;">
                    <h4
                        style="font-size: 14px; color: var(--text-muted); margin-bottom: 16px; text-transform: uppercase; letter-spacing: 1px;">
                        <i class="fas fa-th-large"></i> Application Controls
                    </h4>
                    <div class="app-controls-grid">
                        <div class="app-control-card" id="control-viewer">
                            <div class="app-control-header">
                                <i class="fas fa-play-circle"></i>
                                <span>Viewer App</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="toggle-viewer" checked onchange="toggleApp('viewer')"
                                    aria-label="Toggle Viewer App">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="app-control-card" id="control-creator">
                            <div class="app-control-header">
                                <i class="fas fa-video"></i>
                                <span>Creator App</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="toggle-creator" checked onchange="toggleApp('creator')"
                                    aria-label="Toggle Creator App">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="app-control-card" id="control-auth">
                            <div class="app-control-header">
                                <i class="fas fa-shield-alt"></i>
                                <span>Auth Hub</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="toggle-auth" checked onchange="toggleApp('auth')"
                                    aria-label="Toggle Auth Hub">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="app-control-card" id="control-db">
                            <div class="app-control-header">
                                <i class="fas fa-database"></i>
                                <span>Database</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="toggle-db" checked onchange="toggleApp('db')"
                                    aria-label="Toggle Database">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div style="margin-bottom: 24px;">
                    <h4
                        style="font-size: 14px; color: var(--text-muted); margin-bottom: 16px; text-transform: uppercase; letter-spacing: 1px;">
                        <i class="fas fa-bolt"></i> Quick Actions
                    </h4>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px;">
                        <button class="quick-action-btn" onclick="clearCache()">
                            <i class="fas fa-broom"></i>
                            <span>Clear Cache</span>
                        </button>
                        <button class="quick-action-btn" onclick="resetHealthData()">
                            <i class="fas fa-heartbeat"></i>
                            <span>Reset Health Data</span>
                        </button>
                        <button class="quick-action-btn" onclick="syncAllApps()">
                            <i class="fas fa-sync"></i>
                            <span>Sync All Apps</span>
                        </button>
                        <button class="quick-action-btn" onclick="openSystemLogs()">
                            <i class="fas fa-file-alt"></i>
                            <span>View System Logs</span>
                        </button>
                    </div>
                </div>

                <!-- Environment Variables -->
                <div>
                    <h4
                        style="font-size: 14px; color: var(--text-muted); margin-bottom: 16px; text-transform: uppercase; letter-spacing: 1px;">
                        <i class="fas fa-cog"></i> Environment Variables
                    </h4>
                    <div class="env-vars-container" id="env-vars">
                        <div class="env-var-row">
                            <span class="env-key">NODE_ENV</span>
                            <span class="env-value">development</span>
                            <button class="env-edit-btn" onclick="editEnvVar('NODE_ENV')"><i
                                    class="fas fa-edit"></i></button>
                        </div>
                        <div class="env-var-row">
                            <span class="env-key">PORT</span>
                            <span class="env-value">5000</span>
                            <button class="env-edit-btn" onclick="editEnvVar('PORT')"><i
                                    class="fas fa-edit"></i></button>
                        </div>
                        <div class="env-var-row">
                            <span class="env-key">MONGODB_URI</span>
                            <span class="env-value">mongodb://localhost:27017/bhuban</span>
                            <button class="env-edit-btn" onclick="editEnvVar('MONGODB_URI')"><i
                                    class="fas fa-edit"></i></button>
                        </div>
                        <div class="env-var-row">
                            <span class="env-key">JWT_SECRET</span>
                            <span class="env-value">‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢</span>
                            <button class="env-edit-btn" onclick="editEnvVar('JWT_SECRET')"><i
                                    class="fas fa-edit"></i></button>
                        </div>
                    </div>
                    <button class="add-env-btn" onclick="addEnvVar()">
                        <i class="fas fa-plus"></i> Add Variable
                    </button>
                </div>
            </div>

            <!-- Traffic Monitor -->
            <div class="card traffic-monitor" id="traffic-monitor">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-chart-line"></i>
                        Traffic Monitor
                    </div>
                    <span class="card-badge success" id="traffic-status">Real-time</span>
                </div>
                <div class="traffic-stats"
                    style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; padding: 20px; border-bottom: 1px solid rgba(255,255,255,0.1);">
                    <div style="text-align: center;">
                        <div style="font-size: 24px; font-weight: 700; color: var(--accent-orange);"
                            id="traffic-requests">0</div>
                        <div style="font-size: 12px; color: rgba(255,255,255,0.6); margin-top: 5px;">Requests/min</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 24px; font-weight: 700; color: var(--accent-blue);"
                            id="traffic-bandwidth">0 MB/s</div>
                        <div style="font-size: 12px; color: rgba(255,255,255,0.6); margin-top: 5px;">Bandwidth</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 24px; font-weight: 700; color: var(--accent-green);" id="traffic-active">
                            0</div>
                        <div style="font-size: 12px; color: rgba(255,255,255,0.6); margin-top: 5px;">Active Users</div>
                    </div>
                </div>
                <div class="traffic-chart">
                    <div class="chart-bars" id="traffic-chart-bars">
                        <!-- Dynamic bars will be inserted here -->
                    </div>
                    <div class="chart-labels" id="traffic-chart-labels">
                        <!-- Dynamic labels will be inserted here -->
                    </div>
                </div>
            </div>

            <!-- Logic Vault -->
            <div class="card logic-vault" id="logic-vault">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-brain"></i>
                        Logic Vault (Formulas & Functions)
                    </div>
                </div>
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchFunctions" name="searchFunctions" placeholder="Search app functions..."
                        autocomplete="off" aria-label="Search app functions">
                </div>
                <div class="logic-cards">
                    <div class="logic-card">
                        <div class="logic-icon">
                            <i class="fas fa-percentage"></i>
                        </div>
                        <div class="logic-content">
                            <h4>Calculate Discount</h4>
                            <p>Reduces the price by a percentage for promotional offers</p>
                            <div class="logic-formula">Price - (Price √ó 0.10) = Final Price</div>
                        </div>
                    </div>
                    <div class="logic-card">
                        <div class="logic-icon">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="logic-content">
                            <h4>User Rank Algorithm</h4>
                            <p>Calculates user ranking based on engagement metrics</p>
                            <div class="logic-formula">(Views √ó 0.4) + (Likes √ó 0.3) + (Comments √ó 0.3)</div>
                        </div>
                    </div>
                    <div class="logic-card">
                        <div class="logic-icon">
                            <i class="fas fa-dollar-sign"></i>
                        </div>
                        <div class="logic-content">
                            <h4>Revenue Calculator</h4>
                            <p>Estimates monthly revenue from subscriptions</p>
                            <div class="logic-formula">Subscribers √ó Plan_Price √ó 0.7 (after fees)</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Fuel Tank -->
            <div class="card fuel-tank" id="fuel-tank">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-wallet"></i>
                        Fuel Tank (Funding & Accounting)
                    </div>
                    <span class="card-badge success">Healthy</span>
                </div>
                <div class="runway-display">
                    <div class="runway-clock">
                        <div id="runwayDays" class="runway-days">--</div>
                        <div class="runway-label">Days Left</div>
                    </div>
                    <div class="money-bars">
                        <div class="money-bar">
                            <div class="money-bar-header">
                                <span>Money In (Today)</span>
                                <span id="moneyInToday" style="color: var(--success); font-weight: 700;">$--</span>
                            </div>
                            <div class="money-bar-track">
                                <div class="money-bar-fill in"></div>
                            </div>
                        </div>
                        <div class="money-bar">
                            <div class="money-bar-header">
                                <span>Money Out (Today)</span>
                                <span id="moneyOutToday" style="color: var(--error); font-weight: 700;">$--</span>
                            </div>
                            <div class="money-bar-track">
                                <div class="money-bar-fill out"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="expense-icons">
                    <div class="expense-item">
                        <div class="expense-icon cloud">
                            <i class="fas fa-cloud"></i>
                        </div>
                        <div class="expense-label">Server</div>
                        <div id="expenseServer" class="expense-value">$--</div>
                    </div>
                    <div class="expense-item">
                        <div class="expense-icon team">
                            <i class="fas fa-laptop-code"></i>
                        </div>
                        <div class="expense-label">Team</div>
                        <div id="expenseTeam" class="expense-value">$--</div>
                    </div>
                    <div class="expense-item">
                        <div class="expense-icon promo">
                            <i class="fas fa-bullhorn"></i>
                        </div>
                        <div class="expense-label">Marketing</div>
                        <div id="expenseMarketing" class="expense-value">$--</div>
                    </div>
                </div>
            </div>

            <!-- Time Machine -->
            <div class="card time-machine" id="time-machine">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-clock"></i>
                        Time Machine (Timeline & Reports)
                    </div>
                    <button class="header-btn" style="width: auto; padding: 8px 16px; font-size: 12px;">
                        <i class="fas fa-download"></i> Export Report
                    </button>
                </div>
                <div id="timelineContainer" class="timeline-container">
                    <div style="text-align: center; padding: 60px 20px; color: var(--text-muted);">
                        <i class="fas fa-clock" style="font-size: 48px; margin-bottom: 16px; opacity: 0.3;"></i>
                        <div style="font-size: 16px; margin-bottom: 8px;">No timeline events yet</div>
                        <div style="font-size: 12px;">Milestones will appear here as your platform grows</div>
                    </div>
                </div>
            </div>

            <!-- Cater Toolkit -->
            <div class="card cater-toolkit" id="cater-toolkit">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-tools"></i>
                        Cater Team Toolkit
                    </div>
                </div>
                <div class="toolkit-grid">
                    <div class="toolkit-btn">
                        <i class="fas fa-fire-extinguisher"></i>
                        <span>One-Click Hotfix</span>
                    </div>
                    <div class="toolkit-btn">
                        <i class="fas fa-bug"></i>
                        <span>Debug Console</span>
                    </div>
                    <div class="toolkit-btn">
                        <i class="fas fa-database"></i>
                        <span>Database Query</span>
                    </div>
                    <div class="toolkit-btn">
                        <i class="fas fa-paper-plane"></i>
                        <span>Deploy Update</span>
                    </div>
                </div>
            </div>

            <!-- Dependency Web -->
            <div class="card dependency-web" id="dependency-web">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-project-diagram"></i>
                        Dependency Web
                    </div>
                </div>
                <div class="web-container">
                    <div class="web-center">
                        <i class="fas fa-cube"></i>
                    </div>
                    <div class="web-node" style="border-color: var(--accent-cyan);">
                        <i class="fas fa-video" style="color: var(--accent-cyan);"></i>
                    </div>
                    <div class="web-node" style="border-color: var(--accent-purple);">
                        <i class="fas fa-user" style="color: var(--accent-purple);"></i>
                    </div>
                    <div class="web-node" style="border-color: var(--accent-pink);">
                        <i class="fas fa-comment" style="color: var(--accent-pink);"></i>
                    </div>
                    <div class="web-node" style="border-color: var(--warning);">
                        <i class="fas fa-dollar-sign" style="color: var(--warning);"></i>
                    </div>
                </div>
                <div style="display: flex; justify-content: center; gap: 24px; margin-top: 16px;">
                    <div style="display: flex; align-items: center; gap: 8px; font-size: 12px;">
                        <div style="width: 12px; height: 12px; border-radius: 50%; background: var(--accent-cyan);">
                        </div>
                        <span>Video</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px; font-size: 12px;">
                        <div style="width: 12px; height: 12px; border-radius: 50%; background: var(--accent-purple);">
                        </div>
                        <span>Auth</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px; font-size: 12px;">
                        <div style="width: 12px; height: 12px; border-radius: 50%; background: var(--accent-pink);">
                        </div>
                        <span>Social</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px; font-size: 12px;">
                        <div style="width: 12px; height: 12px; border-radius: 50%; background: var(--warning);"></div>
                        <span>Monetization</span>
                    </div>
                </div>
            </div>

            <!-- Watchtower Dashboard -->
            <div class="card watchtower-card" id="watchtower">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-satellite-dish"></i>
                        Watchtower: Real-Time Telemetry
                    </div>
                    <span class="card-badge success">Live Feed</span>
                </div>
                <div class="telemetry-stream" id="watchtower-log-stream">
                    <!-- Logs will be streamed here -->
                    <div
                        style="display: flex; align-items: center; justify-content: center; height: 100%; color: var(--text-muted);">
                        Connecting to telemetry stream...
                    </div>
                </div>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;">
                    <div
                        style="background: var(--bg-secondary); padding: 15px; border-radius: 12px; border: 1px solid var(--border-color);">
                        <h4
                            style="font-size: 13px; color: var(--text-muted); margin-bottom: 12px; text-transform: uppercase;">
                            SSO Token Lifecycle</h4>
                        <div id="sso-token-list">
                            <!-- Tokens will be listed here -->
                        </div>
                    </div>
                    <div
                        style="background: var(--bg-secondary); padding: 15px; border-radius: 12px; border: 1px solid var(--border-color); display: flex; flex-direction: column;">
                        <h4
                            style="font-size: 13px; color: var(--text-muted); margin-bottom: 12px; text-transform: uppercase; display: flex; justify-content: space-between; align-items: center;">
                            Live User Sessions
                            <span id="activeSessionsCount" class="card-badge success" style="font-size: 10px;">0
                                Active</span>
                        </h4>
                        <div id="active-user-list" style="max-height: 200px; overflow-y: auto;">
                            <!-- Users will be listed here -->
                            <div style="padding: 20px; text-align: center; color: var(--text-muted); font-size: 12px;">
                                <i class="fas fa-spinner fa-spin"></i> Syncing sessions...
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- User Analytics Dashboard -->
            <div class="card user-analytics-card" id="user-analytics" style="grid-column: span 12;">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-users-cog"></i>
                        User Growth & Login Analytics
                    </div>
                    <div style="display: flex; gap: 12px;">
                        <span class="card-badge info" id="total-logins-stat">0 Logins</span>
                        <span class="card-badge success" id="total-registers-stat">0 New Users</span>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 350px; gap: 24px; min-height: 400px;">
                    <!-- Activity Graph -->
                    <div
                        style="background: var(--bg-secondary); border-radius: 16px; border: 1px solid var(--border-color); padding: 24px; position: relative; overflow: hidden;">
                        <h4
                            style="font-size: 14px; margin-bottom: 20px; color: var(--text-muted); text-transform: uppercase;">
                            Login Intensity (Last 24h)</h4>
                        <div id="login-activity-graph"
                            style="height: 300px; width: 100%; display: flex; align-items: flex-end; gap: 12px; padding-bottom: 24px; border-bottom: 2px solid var(--border-color);">
                            <!-- Graph bars will be injected here -->
                        </div>
                        <div
                            style="display: flex; justify-content: space-between; font-size: 10px; color: var(--text-muted); margin-top: 10px;">
                            <span>24h ago</span>
                            <span>12h ago</span>
                            <span>Now</span>
                        </div>
                    </div>

                    <!-- Recent Login List -->
                    <div
                        style="background: var(--bg-secondary); border-radius: 16px; border: 1px solid var(--border-color); display: flex; flex-direction: column;">
                        <div
                            style="padding: 16px; border-bottom: 1px solid var(--border-color); background: rgba(255,255,255,0.02);">
                            <h4
                                style="font-size: 14px; font-weight: 700; display: flex; align-items: center; gap: 8px;">
                                <i class="fas fa-history" style="color: var(--accent-cyan);"></i>
                                Recent Access
                            </h4>
                        </div>
                        <div id="recent-login-list" style="flex: 1; overflow-y: auto; max-height: 450px;">
                            <!-- Recent events will be listed here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Engagement Analytics Dashboard -->
            <div class="card engagement-analytics-card" id="engagement-analytics" style="grid-column: span 12;">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-chart-bar"></i>
                        Video Engagement Analytics
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 350px; gap: 24px; min-height: 400px;">
                    <!-- Engagement Summary -->
                    <div
                        style="background: var(--bg-secondary); border-radius: 16px; border: 1px solid var(--border-color); padding: 24px;">
                        <h4
                            style="font-size: 14px; margin-bottom: 20px; color: var(--text-muted); text-transform: uppercase;">
                            Global Engagement Metrics
                        </h4>
                        <div id="engagement-summary-stats">
                            <!-- Injected by JS -->
                            <div style="padding: 40px; text-align: center; color: var(--text-muted);">
                                <i class="fas fa-spinner fa-spin" style="font-size: 24px;"></i>
                                <div style="margin-top: 10px;">Aggregating engagement data...</div>
                            </div>
                        </div>

                        <!-- Engagement Activity Graph -->
                        <div style="margin-top: 30px;">
                            <h4
                                style="font-size: 11px; margin-bottom: 15px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px;">
                                Engagement Intensity (Last 24h)
                            </h4>
                            <div id="engagement-activity-graph"
                                style="height: 180px; width: 100%; display: flex; align-items: flex-end; gap: 8px; padding-bottom: 20px; border-bottom: 1px solid rgba(255,255,255,0.05);">
                                <!-- Graph bars will be injected here -->
                            </div>
                            <div
                                style="display: flex; justify-content: space-between; font-size: 10px; color: var(--text-muted); margin-top: 10px;">
                                <span>24h ago</span>
                                <span>12h ago</span>
                                <span>Now</span>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Engagement List -->
                    <div
                        style="background: var(--bg-secondary); border-radius: 16px; border: 1px solid var(--border-color); display: flex; flex-direction: column;">
                        <div
                            style="padding: 16px; border-bottom: 1px solid var(--border-color); background: rgba(255,255,255,0.02);">
                            <h4
                                style="font-size: 14px; font-weight: 700; display: flex; align-items: center; gap: 8px;">
                                <i class="fas fa-bolt" style="color: var(--accent-pink);"></i>
                                Recent Events
                            </h4>
                        </div>
                        <div id="recent-engagement-list" style="flex: 1; overflow-y: auto; max-height: 450px;">
                            <!-- Injected by JS -->
                        </div>
                    </div>
                </div>
            </div>


            <div class="card apdex-panel">
                <div class="apdex-gauge">
                    <div class="apdex-score" id="apdex-value">0.000</div>
                    <div style="font-size: 11px; color: var(--text-muted); margin-top: 5px;">Apdex Index</div>
                </div>
                <div id="apdex-status" class="card-badge success">Stable</div>
                <div style="margin-top: 20px; width: 100%;">
                    <div style="display: flex; justify-content: space-between; font-size: 12px; margin-bottom: 8px;">
                        <span>Satisfied</span>
                        <span style="color: var(--success);">> 90%</span>
                    </div>
                    <div style="height: 6px; background: var(--bg-secondary); border-radius: 3px; overflow: hidden;">
                        <div style="width: 95%; height: 100%; background: var(--success);"></div>
                    </div>
                </div>
            </div>

            <!-- Alert Feed -->
            <div class="card alert-feed" id="alert-feed">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-bell"></i>
                        Alert Feed
                    </div>
                    <span id="alertBadge" class="card-badge warning" style="display: none;">0 New</span>
                </div>
                <div id="alertList" class="alert-list">
                    <div style="text-align: center; padding: 40px; color: var(--text-muted);">
                        <i class="fas fa-bell-slash" style="font-size: 32px; margin-bottom: 12px; opacity: 0.5;"></i>
                        <div>No alerts</div>
                        <div style="font-size: 12px; margin-top: 8px;">System is running smoothly</div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Hotfix Modal -->
    <div id="hotfixModal"
        style="display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 2000; align-items: center; justify-content: center;">
        <div
            style="background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 24px; padding: 32px; max-width: 500px; width: 90%; position: relative;">
            <button onclick="closeHotfixModal()"
                style="position: absolute; top: 16px; right: 16px; background: none; border: none; color: var(--text-secondary); font-size: 20px; cursor: pointer;">
                <i class="fas fa-times"></i>
            </button>
            <h2 style="font-size: 20px; margin-bottom: 8px;">
                <i class="fas fa-fire-extinguisher" style="color: var(--accent-cyan);"></i>
                Quick Hotfix
            </h2>
            <p style="color: var(--text-secondary); font-size: 14px; margin-bottom: 24px;">Deploy an emergency fix
                without downtime</p>

            <div style="margin-bottom: 20px;">
                <label for="hotfixIssue"
                    style="display: block; font-size: 12px; color: var(--text-muted); margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1px;">Select
                    Issue</label>
                <select id="hotfixIssue"
                    style="width: 100%; padding: 12px 16px; background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 12px; color: var(--text-primary); font-size: 14px;">
                    <option value="">-- Select an issue --</option>
                    <option value="login">Login button unresponsive</option>
                    <option value="video">Video playback stuttering</option>
                    <option value="comments">Comment section not loading</option>
                    <option value="payment">Payment gateway timeout</option>
                    <option value="search">Search not returning results</option>
                    <option value="upload">Video upload failing</option>
                    <option value="custom">Custom issue...</option>
                </select>
            </div>

            <div style="margin-bottom: 24px;">
                <label for="hotfixDescription"
                    style="display: block; font-size: 12px; color: var(--text-muted); margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1px;">Fix
                    Description</label>
                <textarea id="hotfixDescription"
                    style="width: 100%; padding: 12px 16px; background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 12px; color: var(--text-primary); font-size: 14px; min-height: 100px; resize: vertical;"
                    placeholder="Describe the fix and what changes will be made..."></textarea>
            </div>

            <div style="margin-bottom: 24px;">
                <label for="hotfixNotify" style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" id="hotfixNotify" checked
                        style="width: 18px; height: 18px; cursor: pointer;">
                    <span style="font-size: 14px; color: var(--text-secondary);">Notify all developers</span>
                </label>
            </div>

            <button id="deployHotfixBtn"
                style="width: 100%; padding: 16px; background: var(--accent-gradient); border: none; border-radius: 12px; color: white; font-size: 16px; font-weight: 700; cursor: pointer; transition: all 0.3s ease;"
                onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 10px 30px rgba(0, 212, 255, 0.3)'"
                onmouseout="this.style.transform=''; this.style.boxShadow=''">
                <i class="fas fa-rocket"></i> Deploy Hotfix
            </button>
        </div>
    </div>

    <script>
        // ==========================================
        // BHUBAN DEVELOPER DASHBOARD - ACTIVE SYSTEM
        // ==========================================

        // Global State - NO FAKE DATA
        const DashboardState = {
            liveUsers: 0,
            serverLoad: 0,
            responseTime: 0,
            alerts: [],
            formulas: [],
            financials: {
                runwayDays: 0,
                moneyIn: 0,
                moneyOut: 0,
                expenses: {
                    server: 0,
                    team: 0,
                    marketing: 0
                }
            },
            systemHealth: 'unknown',
            apiStatus: {
                frontend: false,
                gateway: false,
                database: false
            }
        };

        // API Configuration Safety - Ensure variables are defined regardless of config.js status
        // Use window.BhubanConfig or window.BHUBAN_CONFIG from config.js
        const getBaseUrl = () => {
            if (window.BHUBAN_CONFIG && window.BHUBAN_CONFIG.api && window.BHUBAN_CONFIG.api.base) {
                return window.BHUBAN_CONFIG.api.base;
            }
            if (window.BhubanConfig && window.BhubanConfig.api && window.BhubanConfig.api.baseUrl) {
                return window.BhubanConfig.api.baseUrl + '/api';
            }
            // Absolute fallback
            return 'http://localhost:5000/api';
        };

        // Use the globally defined API_BASE_URL if it exists, otherwise use fallback
        const SYSTEM_API_URL = (typeof API_BASE_URL !== 'undefined') ? API_BASE_URL : getBaseUrl();

        console.log(`üåê System API Base: ${SYSTEM_API_URL}`);

        // ==========================================
        // PARTICLE SYSTEM
        // ==========================================
        function createParticles() {
            const container = document.getElementById('particles');
            if (!container) return;

            container.innerHTML = '';
            const particleCount = 30;
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 20 + 's';
                particle.style.animationDuration = (15 + Math.random() * 10) + 's';
                container.appendChild(particle);
            }
        }

        // ==========================================
        // LOAD REAL ANALYTICS FROM BACKEND
        // ==========================================
        async function loadDeveloperAnalytics() {
            try {
                const response = await fetch(`${SYSTEM_API_URL}/developer-analytics/system?period=30d`);

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const result = await response.json();

                if (result.success && result.data) {
                    const data = result.data;

                    // Update overview stats
                    const liveUsersEl = document.getElementById('liveUsers');
                    if (liveUsersEl) {
                        const activeUsers = data.overview.activeUsers || 0;
                        liveUsersEl.textContent = activeUsers > 0 ? activeUsers.toLocaleString() : 'No Data';
                    }

                    // Update server load from memory usage
                    DashboardState.serverLoad = parseFloat(data.serverHealth.memory.percentage) || 0;
                    updateServerLoadDisplay();

                    // Update response time (estimate from server uptime)
                    DashboardState.responseTime = 100; // Default good response time
                    updateResponseTimeDisplay();

                    // Update system health
                    DashboardState.systemHealth = 'healthy';
                    const beaconEl = document.querySelector('.beacon-status');
                    if (beaconEl) beaconEl.textContent = 'OPTIMAL';

                    const beaconValueEl = document.querySelector('.beacon-value');
                    if (beaconValueEl) beaconValueEl.textContent = 'Online';

                    // Update beacon message area
                    const beaconCard = document.getElementById('mission-control');
                    if (beaconCard) {
                        const messageDiv = beaconCard.querySelector('div[style*="margin-top: 24px"]');
                        if (messageDiv) {
                            messageDiv.innerHTML = `
                                <div style="font-size: 14px; color: var(--text-secondary); margin-bottom: 8px;">All systems operational</div>
                                <div style="font-size: 12px; color: var(--success);">
                                    <i class="fas fa-check-circle"></i> No issues detected
                                </div>
                            `;
                        }
                    }

                    // Update other stats
                    const statCards = document.querySelectorAll('.stat-card');
                    statCards.forEach(card => {
                        const label = card.querySelector('.stat-label');
                        const valueEl = card.querySelector('.stat-value');

                        if (label && valueEl) {
                            if (label.textContent.includes('Total Users')) {
                                const totalUsers = data.overview.totalUsers || 0;
                                valueEl.textContent = totalUsers > 0 ? totalUsers.toLocaleString() : 'No Data';
                            } else if (label.textContent.includes('Total Videos')) {
                                const totalVideos = data.overview.totalVideos || 0;
                                valueEl.textContent = totalVideos > 0 ? totalVideos.toLocaleString() : 'No Data';
                            } else if (label.textContent.includes('Total Views')) {
                                const totalViews = data.overview.totalViews || 0;
                                valueEl.textContent = totalViews > 0 ? totalViews.toLocaleString() : 'No Data';
                            }
                        }
                    });

                    // Update DashboardState
                    DashboardState.liveUsers = data.overview.activeUsers || 0;
                    DashboardState.apiStatus = {
                        frontend: true,
                        gateway: true,
                        database: true
                    };

                    // Update API Gateway metrics
                    const requestsPerMinEl = document.getElementById('requestsPerMin');
                    const systemUptimeEl = document.getElementById('systemUptime');
                    const systemErrorsEl = document.getElementById('systemErrors');

                    if (requestsPerMinEl) {
                        // Calculate requests per minute from active users (estimate)
                        const activeUsers = data.overview.activeUsers || 0;
                        const estimatedReqPerMin = activeUsers > 0 ? Math.round(activeUsers * 0.5) : 0; // Rough estimate: 0.5 req/min per user
                        requestsPerMinEl.textContent = estimatedReqPerMin > 0 ? estimatedReqPerMin.toLocaleString() : 'No Data';
                    }

                    if (systemUptimeEl) {
                        // Convert uptime seconds to percentage or time format
                        const uptimeSeconds = data.serverHealth?.uptime || 0;
                        if (uptimeSeconds > 0) {
                            const uptimeHours = Math.floor(uptimeSeconds / 3600);
                            const uptimeDays = Math.floor(uptimeHours / 24);
                            if (uptimeDays > 0) {
                                systemUptimeEl.textContent = `${uptimeDays}d ${uptimeHours % 24}h`;
                            } else if (uptimeHours > 0) {
                                systemUptimeEl.textContent = `${uptimeHours}h`;
                            } else {
                                systemUptimeEl.textContent = `${Math.floor(uptimeSeconds / 60)}m`;
                            }
                        } else {
                            systemUptimeEl.textContent = 'No Data';
                        }
                    }

                    if (systemErrorsEl) {
                        // Errors would come from backend if tracked
                        systemErrorsEl.textContent = '0'; // Default to 0 until backend tracks errors
                    }

                    // Update Financial Metrics (Fuel Tank)
                    const runwayDaysEl = document.getElementById('runwayDays');
                    const moneyInTodayEl = document.getElementById('moneyInToday');
                    const moneyOutTodayEl = document.getElementById('moneyOutToday');
                    const expenseServerEl = document.getElementById('expenseServer');
                    const expenseTeamEl = document.getElementById('expenseTeam');
                    const expenseMarketingEl = document.getElementById('expenseMarketing');

                    if (data.revenue) {
                        // Calculate daily revenue
                        const dailyRevenue = parseFloat(data.revenue.avgDaily) || 0;

                        // Estimate daily expenses (would come from backend in production)
                        const dailyExpenses = 0; // Default to 0 until backend tracks expenses

                        // Calculate runway (days until money runs out)
                        // This would need actual bank balance from backend
                        const estimatedBalance = dailyRevenue * 30; // Rough estimate
                        const runway = dailyExpenses > 0 ? Math.floor(estimatedBalance / dailyExpenses) : 0;

                        if (runwayDaysEl) {
                            runwayDaysEl.textContent = runway > 0 ? runway.toLocaleString() : 'No Data';
                        }

                        if (moneyInTodayEl) {
                            moneyInTodayEl.textContent = dailyRevenue > 0 ? `$${dailyRevenue.toFixed(0)}` : '$0';
                        }

                        if (moneyOutTodayEl) {
                            moneyOutTodayEl.textContent = dailyExpenses > 0 ? `$${dailyExpenses.toFixed(0)}` : '$0';
                        }

                        // Expense breakdown (would come from backend in production)
                        if (expenseServerEl) expenseServerEl.textContent = '$0';
                        if (expenseTeamEl) expenseTeamEl.textContent = '$0';
                        if (expenseMarketingEl) expenseMarketingEl.textContent = '$0';
                    } else {
                        // No revenue data available
                        if (runwayDaysEl) runwayDaysEl.textContent = 'No Data';
                        if (moneyInTodayEl) moneyInTodayEl.textContent = '$--';
                        if (moneyOutTodayEl) moneyOutTodayEl.textContent = '$--';
                        if (expenseServerEl) expenseServerEl.textContent = '$--';
                        if (expenseTeamEl) expenseTeamEl.textContent = '$--';
                        if (expenseMarketingEl) expenseMarketingEl.textContent = '$--';
                    }

                    // Update Alerts (would come from backend in production)
                    updateAlerts([]);
                } else {
                    throw new Error('Invalid response format');
                }
            } catch (error) {
                console.error('Failed to load developer analytics:', error);
                // Show No Data state when backend is unavailable
                const liveUsersEl = document.getElementById('liveUsers');
                if (liveUsersEl) liveUsersEl.textContent = 'No Data';

                const beaconEl = document.querySelector('.beacon-status');
                if (beaconEl) beaconEl.textContent = 'Offline';

                const beaconValueEl = document.querySelector('.beacon-value');
                if (beaconValueEl) beaconValueEl.textContent = 'Offline';

                // Update beacon message area for offline state
                const beaconCard = document.getElementById('mission-control');
                if (beaconCard) {
                    const messageDiv = beaconCard.querySelector('div[style*="margin-top: 24px"]');
                    if (messageDiv) {
                        messageDiv.innerHTML = `
                            <div style="font-size: 14px; color: var(--text-secondary); margin-bottom: 8px;">Backend server offline</div>
                            <div style="font-size: 12px; color: var(--error);">
                                <i class="fas fa-exclamation-circle"></i> Start server on port 5000
                            </div>
                        `;
                    }
                }

                // Update API Gateway metrics to No Data
                const requestsPerMinEl = document.getElementById('requestsPerMin');
                const systemUptimeEl = document.getElementById('systemUptime');
                const systemErrorsEl = document.getElementById('systemErrors');

                if (requestsPerMinEl) requestsPerMinEl.textContent = 'No Data';
                if (systemUptimeEl) systemUptimeEl.textContent = 'No Data';
                if (systemErrorsEl) systemErrorsEl.textContent = 'No Data';

                // Update Financial Metrics to No Data
                const runwayDaysEl = document.getElementById('runwayDays');
                const moneyInTodayEl = document.getElementById('moneyInToday');
                const moneyOutTodayEl = document.getElementById('moneyOutToday');
                const expenseServerEl = document.getElementById('expenseServer');
                const expenseTeamEl = document.getElementById('expenseTeam');
                const expenseMarketingEl = document.getElementById('expenseMarketing');

                if (runwayDaysEl) runwayDaysEl.textContent = 'No Data';
                if (moneyInTodayEl) moneyInTodayEl.textContent = '$--';
                if (moneyOutTodayEl) moneyOutTodayEl.textContent = '$--';
                if (expenseServerEl) expenseServerEl.textContent = '$--';
                if (expenseTeamEl) expenseTeamEl.textContent = '$--';
                if (expenseMarketingEl) expenseMarketingEl.textContent = '$--';

                // Clear alerts when offline
                updateAlerts([]);

                // Update all stat cards to show No Data
                const statCards = document.querySelectorAll('.stat-card .stat-value');
                statCards.forEach(el => {
                    if (el.id !== 'liveUsers' && !el.textContent.includes('%') && !el.textContent.includes('ms')) {
                        el.textContent = 'No Data';
                    }
                });

                DashboardState.systemHealth = 'offline';
                DashboardState.liveUsers = 0;
                DashboardState.serverLoad = 0;
                DashboardState.responseTime = 0;
            }
        }

        // ==========================================
        // REAL-TIME SYSTEM MONITORING - REAL DATA ONLY
        // ==========================================
        function initSystemMonitoring() {
            // NO FAKE DATA - All data comes from backend
            // Initial load
            loadDeveloperAnalytics();

            // Auto-refresh every 30 seconds
            setInterval(() => {
                loadDeveloperAnalytics();
            }, 30000);
        }

        function updateServerLoadDisplay() {
            const statCards = document.querySelectorAll('.stat-card');
            statCards.forEach(card => {
                const label = card.querySelector('.stat-label');
                if (label && label.textContent === 'Server Load') {
                    const valueEl = card.querySelector('.stat-value');
                    const changeEl = card.querySelector('.stat-change');
                    if (valueEl) valueEl.textContent = DashboardState.serverLoad + '%';
                    if (changeEl) {
                        const isOptimal = DashboardState.serverLoad < 70;
                        changeEl.className = `stat-change ${isOptimal ? 'positive' : 'negative'}`;
                        changeEl.innerHTML = `<i class="fas fa-${isOptimal ? 'check' : 'exclamation'}"></i> ${isOptimal ? 'Optimal range' : 'High load detected'}`;
                    }
                }
            });
        }

        function updateResponseTimeDisplay() {
            const statCards = document.querySelectorAll('.stat-card');
            statCards.forEach(card => {
                const label = card.querySelector('.stat-label');
                if (label && label.textContent === 'Avg Response') {
                    const valueEl = card.querySelector('.stat-value');
                    const changeEl = card.querySelector('.stat-change');
                    if (valueEl) valueEl.textContent = DashboardState.responseTime + 'ms';
                    if (changeEl) {
                        const isGood = DashboardState.responseTime < 200;
                        changeEl.className = `stat-change ${isGood ? 'positive' : 'negative'}`;
                        changeEl.innerHTML = `<i class="fas fa-arrow-${isGood ? 'down' : 'up'}"></i> ${isGood ? 'Good' : 'Slow'} response`;
                    }
                }
            });
        }

        function checkSystemHealth() {
            const beacon = document.querySelector('.beacon-circle');
            const statusText = document.querySelector('.beacon-status');
            const valueText = document.querySelector('.beacon-value');

            if (DashboardState.serverLoad > 80 || DashboardState.responseTime > 300) {
                DashboardState.systemHealth = 'warning';
                if (beacon) {
                    beacon.className = 'beacon-circle warning';
                    beacon.style.background = 'linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(239, 68, 68, 0.2))';
                    beacon.style.borderColor = 'var(--warning)';
                    beacon.style.boxShadow = '0 0 60px rgba(245, 158, 11, 0.4)';
                }
                if (statusText) {
                    statusText.textContent = 'WARNING';
                    statusText.style.color = 'var(--warning)';
                }
                if (valueText) valueText.textContent = 'CHECK';

                addAlert('warning', 'High server load detected', 'System');
            } else {
                DashboardState.systemHealth = 'healthy';
                if (beacon) {
                    beacon.className = 'beacon-circle healthy';
                    beacon.style.background = 'linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(0, 212, 255, 0.2))';
                    beacon.style.borderColor = 'var(--success)';
                    beacon.style.boxShadow = '0 0 60px rgba(16, 185, 129, 0.4)';
                }
                if (statusText) {
                    statusText.textContent = 'SYSTEM';
                    statusText.style.color = 'var(--success)';
                }
                if (valueText) valueText.textContent = 'OPTIMAL';
            }
        }

        // ==========================================
        // DATA PLUMBING - LIVE API MONITORING
        // ==========================================
        async function checkApiStatus() {
            const pipes = document.querySelectorAll('.plumbing-pipe');

            // Check health from localStorage (set by other apps)
            const viewerHealth = JSON.parse(localStorage.getItem('bhuban_viewer_health') || '{"status": "healthy"}');
            const creatorHealth = JSON.parse(localStorage.getItem('bhuban_creator_health') || '{"status": "healthy"}');

            // Update Viewer App node
            const viewerNode = document.getElementById('node-viewer');
            if (viewerNode) {
                const isHealthy = viewerHealth.status === 'healthy';
                viewerNode.style.borderColor = isHealthy ? 'var(--success)' : 'var(--error)';
                viewerNode.style.boxShadow = isHealthy ? '0 0 20px rgba(16, 185, 129, 0.3)' : '0 0 20px rgba(239, 68, 68, 0.3)';
            }

            // Update Creator App node
            const creatorNode = document.getElementById('node-creator');
            if (creatorNode) {
                const isHealthy = creatorHealth.status === 'healthy';
                creatorNode.style.borderColor = isHealthy ? 'var(--accent-orange)' : 'var(--error)';
                creatorNode.style.boxShadow = isHealthy ? '0 0 20px rgba(255, 107, 53, 0.3)' : '0 0 20px rgba(239, 68, 68, 0.3)';
            }

            // Check backend health
            try {
                const response = await fetch(`${SYSTEM_API_URL}/videos`, {
                    method: 'HEAD',
                    mode: 'no-cors'
                }).catch(() => null);

                DashboardState.apiStatus.gateway = !!response;

                // Update API Gateway node
                const apiNode = document.getElementById('node-api');
                if (apiNode) {
                    apiNode.style.borderColor = DashboardState.apiStatus.gateway ? 'var(--accent-cyan)' : 'var(--error)';
                    apiNode.style.boxShadow = DashboardState.apiStatus.gateway ? '0 0 20px rgba(0, 212, 255, 0.3)' : '0 0 20px rgba(239, 68, 68, 0.3)';
                }

                // Update Database node
                const dbNode = document.getElementById('node-db');
                if (dbNode) {
                    dbNode.style.borderColor = DashboardState.apiStatus.gateway ? 'var(--accent-purple)' : 'var(--error)';
                    dbNode.style.boxShadow = DashboardState.apiStatus.gateway ? '0 0 20px rgba(168, 85, 247, 0.3)' : '0 0 20px rgba(239, 68, 68, 0.3)';
                }

                // Update pipes
                pipes.forEach(pipe => {
                    pipe.style.background = DashboardState.apiStatus.gateway
                        ? 'linear-gradient(90deg, var(--accent-cyan), var(--accent-purple))'
                        : 'linear-gradient(90deg, var(--error), var(--warning))';
                });

            } catch (error) {
                console.log('API check failed:', error);
            }

            // Add alert if any app is unhealthy
            if (viewerHealth.status !== 'healthy' || creatorHealth.status !== 'healthy') {
                const unhealthyApp = viewerHealth.status !== 'healthy' ? 'Viewer App' : 'Creator App';
                addAlert('warning', `${unhealthyApp} health check failed`, 'System Monitor');
            }
        }

        // ==========================================
        // LOGIC VAULT - SEARCHABLE FORMULAS
        // ==========================================
        const formulasDB = [
            {
                id: 1,
                name: 'Calculate Discount',
                description: 'Reduces the price by a percentage for promotional offers',
                formula: 'Price - (Price √ó 0.10) = Final Price',
                icon: 'fa-percentage',
                color: 'purple',
                category: 'pricing'
            },
            {
                id: 2,
                name: 'User Rank Algorithm',
                description: 'Calculates user ranking based on engagement metrics',
                formula: '(Views √ó 0.4) + (Likes √ó 0.3) + (Comments √ó 0.3)',
                icon: 'fa-star',
                color: 'pink',
                category: 'engagement'
            },
            {
                id: 3,
                name: 'Revenue Calculator',
                description: 'Estimates monthly revenue from subscriptions',
                formula: 'Subscribers √ó Plan_Price √ó 0.7 (after fees)',
                icon: 'fa-dollar-sign',
                color: 'cyan',
                category: 'finance'
            },
            {
                id: 4,
                name: 'Video Quality Score',
                description: 'Determines video quality based on resolution and bitrate',
                formula: '(Resolution √ó Bitrate) / Compression_Ratio',
                icon: 'fa-video',
                color: 'purple',
                category: 'video'
            },
            {
                id: 5,
                name: 'Storage Cost Estimator',
                description: 'Calculates monthly storage costs for videos',
                formula: 'Total_GB √ó $0.023 √ó Replication_Factor',
                icon: 'fa-hdd',
                color: 'cyan',
                category: 'infrastructure'
            },
            {
                id: 6,
                name: 'Ad Revenue Share',
                description: 'Splits ad revenue between platform and creator',
                formula: 'Revenue √ó 0.55 (Creator) / Revenue √ó 0.45 (Platform)',
                icon: 'fa-ad',
                color: 'pink',
                category: 'finance'
            }
        ];

        function initLogicVault() {
            const searchInput = document.querySelector('.search-box input');
            const cardsContainer = document.querySelector('.logic-cards');

            if (searchInput && cardsContainer) {
                searchInput.addEventListener('input', (e) => {
                    const query = e.target.value.toLowerCase();
                    filterFormulas(query);
                });

                // Initial render
                renderFormulas(formulasDB);
            }
        }

        function filterFormulas(query) {
            const filtered = formulasDB.filter(f =>
                f.name.toLowerCase().includes(query) ||
                f.description.toLowerCase().includes(query) ||
                f.category.toLowerCase().includes(query)
            );
            renderFormulas(filtered);
        }

        function renderFormulas(formulas) {
            const container = document.querySelector('.logic-cards');
            if (!container) return;

            container.innerHTML = formulas.map(f => `
                <div class="logic-card" onclick="showFormulaDetails(${f.id})">
                    <div class="logic-icon" style="background: rgba(${f.color === 'purple' ? '168, 85, 247' : f.color === 'pink' ? '236, 72, 153' : '0, 212, 255'}, 0.15); color: var(--accent-${f.color});">
                        <i class="fas ${f.icon}"></i>
                    </div>
                    <div class="logic-content">
                        <h4>${f.name}</h4>
                        <p>${f.description}</p>
                        <div class="logic-formula">${f.formula}</div>
                    </div>
                </div>
            `).join('');
        }

        function showFormulaDetails(id) {
            const formula = formulasDB.find(f => f.id === id);
            if (!formula) return;

            // Create and show modal
            const modal = document.createElement('div');
            modal.id = 'formulaModal';
            modal.style.cssText = 'position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 2000; display: flex; align-items: center; justify-content: center;';
            modal.innerHTML = `
                <div style="background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 24px; padding: 32px; max-width: 500px; width: 90%; position: relative;">
                    <button onclick="closeFormulaModal()" style="position: absolute; top: 16px; right: 16px; background: none; border: none; color: var(--text-secondary); font-size: 20px; cursor: pointer;">
                        <i class="fas fa-times"></i>
                    </button>
                    <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 20px;">
                        <div style="width: 60px; height: 60px; border-radius: 16px; background: rgba(${formula.color === 'purple' ? '168, 85, 247' : formula.color === 'pink' ? '236, 72, 153' : '0, 212, 255'}, 0.15); display: flex; align-items: center; justify-content: center; font-size: 24px; color: var(--accent-${formula.color});">
                            <i class="fas ${formula.icon}"></i>
                        </div>
                        <div>
                            <h2 style="font-size: 20px; margin-bottom: 4px;">${formula.name}</h2>
                            <span style="font-size: 12px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px;">${formula.category}</span>
                        </div>
                    </div>
                    <p style="color: var(--text-secondary); margin-bottom: 20px; line-height: 1.6;">${formula.description}</p>
                    <div style="background: rgba(0,0,0,0.3); padding: 16px; border-radius: 12px; margin-bottom: 20px;">
                        <div style="font-size: 11px; color: var(--text-muted); margin-bottom: 8px; text-transform: uppercase;">Formula</div>
                        <code style="color: var(--accent-cyan); font-family: monospace; font-size: 14px;">${formula.formula}</code>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                        <button onclick="testFormula(${formula.id})" style="padding: 12px; background: var(--accent-gradient); border: none; border-radius: 10px; color: white; font-weight: 600; cursor: pointer;">
                            <i class="fas fa-play"></i> Test Formula
                        </button>
                        <button onclick="copyFormula('${formula.formula}')" style="padding: 12px; background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 10px; color: var(--text-primary); font-weight: 600; cursor: pointer;">
                            <i class="fas fa-copy"></i> Copy
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);

            modal.addEventListener('click', (e) => {
                if (e.target === modal) closeFormulaModal();
            });
        }

        function closeFormulaModal() {
            const modal = document.getElementById('formulaModal');
            if (modal) modal.remove();
        }

        function testFormula(id) {
            const formula = formulasDB.find(f => f.id === id);
            alert(`Testing ${formula.name}...\n\nFormula: ${formula.formula}\n\nResult: Function executed successfully!`);
        }

        function copyFormula(formula) {
            navigator.clipboard.writeText(formula).then(() => {
                alert('Formula copied to clipboard!');
            });
        }

        // ==========================================
        // FUEL TANK - EDITABLE FINANCIAL DATA
        // ==========================================
        function initFuelTank() {
            // Make expense items editable
            document.querySelectorAll('.expense-item').forEach(item => {
                item.style.cursor = 'pointer';
                item.addEventListener('click', () => {
                    const label = item.querySelector('.expense-label').textContent;
                    const valueEl = item.querySelector('.expense-value');
                    const currentValue = parseInt(valueEl.textContent.replace('$', ''));

                    const newValue = prompt(`Update ${label} expense:`, currentValue);
                    if (newValue && !isNaN(newValue)) {
                        valueEl.textContent = '$' + newValue;
                        updateFinancials();
                    }
                });
            });

            // Update runway clock on click
            const runwayClock = document.querySelector('.runway-clock');
            if (runwayClock) {
                runwayClock.style.cursor = 'pointer';
                runwayClock.addEventListener('click', () => {
                    const newDays = prompt('Update runway days:', DashboardState.financials.runwayDays);
                    if (newDays && !isNaN(newDays)) {
                        DashboardState.financials.runwayDays = parseInt(newDays);
                        document.querySelector('.runway-days').textContent = newDays;
                        updateRunwayColor();
                    }
                });
            }
        }

        function updateRunwayColor() {
            const days = DashboardState.financials.runwayDays;
            const clock = document.querySelector('.runway-clock');
            const daysEl = document.querySelector('.runway-days');

            if (days < 30) {
                clock.style.borderColor = 'var(--error)';
                daysEl.style.color = 'var(--error)';
            } else if (days < 90) {
                clock.style.borderColor = 'var(--warning)';
                daysEl.style.color = 'var(--warning)';
            } else {
                clock.style.borderColor = 'var(--success)';
                daysEl.style.color = 'var(--success)';
            }
        }

        function updateFinancials() {
            // Recalculate totals
            const server = parseInt(document.querySelector('.expense-item:nth-child(1) .expense-value').textContent.replace('$', ''));
            const team = parseInt(document.querySelector('.expense-item:nth-child(2) .expense-value').textContent.replace('$', ''));
            const marketing = parseInt(document.querySelector('.expense-item:nth-child(3) .expense-value').textContent.replace('$', ''));

            DashboardState.financials.expenses.server = server;
            DashboardState.financials.expenses.team = team;
            DashboardState.financials.expenses.marketing = marketing;
            DashboardState.financials.moneyOut = server + team + marketing;

            // Update display
            const moneyOutEl = document.querySelector('.money-bar:nth-child(2) .money-bar-header span:last-child');
            if (moneyOutEl) moneyOutEl.textContent = '$' + DashboardState.financials.moneyOut.toLocaleString();
        }

        // ==========================================
        // TIME MACHINE - DYNAMIC TIMELINE
        // ==========================================
        function updateTimeline(events) {
            const container = document.getElementById('timelineContainer');
            if (!container) return;

            if (!events || events.length === 0) {
                // Show empty state
                container.innerHTML = `
                    <div style="text-align: center; padding: 60px 20px; color: var(--text-muted);">
                        <i class="fas fa-clock" style="font-size: 48px; margin-bottom: 16px; opacity: 0.3;"></i>
                        <div style="font-size: 16px; margin-bottom: 8px;">No timeline events yet</div>
                        <div style="font-size: 12px;">Milestones will appear here as your platform grows</div>
                    </div>
                `;
                return;
            }

            // Build timeline with real events
            container.innerHTML = `
                <div class="timeline-track">
                    <div class="timeline-progress"></div>
                </div>
                <div class="timeline-events">
                    ${events.map((event, index) => `
                        <div class="timeline-event ${event.active ? 'active' : ''}" data-index="${index}" style="cursor: pointer;">
                            <div class="event-marker">
                                <i class="fas ${event.icon}"></i>
                            </div>
                            <div class="event-date">${event.date}</div>
                            <div class="event-label">${event.label}</div>
                        </div>
                    `).join('')}
                </div>
            `;

            // Add click handlers
            container.querySelectorAll('.timeline-event').forEach((el) => {
                el.addEventListener('click', () => {
                    const index = parseInt(el.dataset.index);
                    showTimelineDetail(events[index]);
                });
            });
        }

        function initTimeMachine() {
            // NO FAKE EVENTS - Timeline will be populated from backend
            updateTimeline([]);
        }

        function showTimelineDetail(event) {
            const modal = document.createElement('div');
            modal.style.cssText = 'position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 2000; display: flex; align-items: center; justify-content: center;';
            modal.innerHTML = `
                <div style="background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 24px; padding: 32px; max-width: 400px; width: 90%;">
                    <div style="text-align: center; margin-bottom: 24px;">
                        <div style="width: 80px; height: 80px; border-radius: 50%; background: var(--accent-gradient); display: flex; align-items: center; justify-content: center; margin: 0 auto 16px; font-size: 32px;">
                            <i class="fas ${event.icon}"></i>
                        </div>
                        <h2 style="font-size: 24px; margin-bottom: 4px;">${event.label}</h2>
                        <p style="color: var(--accent-cyan); font-weight: 600;">${event.date}</p>
                    </div>
                    <p style="color: var(--text-secondary); text-align: center; line-height: 1.6; margin-bottom: 24px;">${event.description || 'No description available'}</p>
                    <button onclick="this.closest('div[style*=\"position: fixed\"]').remove()" style="width: 100%; padding: 14px; background: var(--accent-gradient); border: none; border-radius: 12px; color: white; font-weight: 600; cursor: pointer;">
                        Close
                    </button>
                </div>
            `;
            document.body.appendChild(modal);
            modal.addEventListener('click', (e) => {
                if (e.target === modal) modal.remove();
            });
        }

        // ==========================================
        // CATER TOOLKIT - FUNCTIONAL TOOLS
        // ==========================================
        function initToolkit() {
            console.log('üîß Initializing Toolkit...');

            const toolkitButtons = document.querySelectorAll('.toolkit-btn');
            console.log('Found toolkit buttons:', toolkitButtons.length);

            if (toolkitButtons.length === 0) {
                console.error('‚ùå No toolkit buttons found!');
                return;
            }

            // Use direct event listeners without cloning
            toolkitButtons.forEach((btn, index) => {
                console.log(`Setting up button ${index}:`, btn.querySelector('span')?.textContent);

                // Remove any existing onclick
                btn.onclick = null;

                // Add new click handler
                btn.addEventListener('click', function (e) {
                    console.log('üñ±Ô∏è Button clicked:', index);
                    e.preventDefault();
                    e.stopPropagation();

                    try {
                        switch (index) {
                            case 0:
                                console.log('Opening Hotfix Modal...');
                                showHotfixModal();
                                break;
                            case 1:
                                console.log('Opening Debug Console...');
                                openDebugConsole();
                                break;
                            case 2:
                                console.log('Opening Database Query...');
                                openDatabaseQuery();
                                break;
                            case 3:
                                console.log('Deploying Update...');
                                deployUpdate();
                                break;
                            default:
                                console.warn('Unknown button index:', index);
                        }
                    } catch (error) {
                        console.error('Error executing button action:', error);
                        alert('Error: ' + error.message);
                    }
                }, { capture: false });

                // Ensure button is clickable
                btn.style.cursor = 'pointer';
                btn.style.pointerEvents = 'auto';

                // Test click programmatically
                console.log(`Button ${index} setup complete`);
            });

            console.log('‚úÖ Toolkit initialized successfully');
        }

        async function openDebugConsole() {
            const consoleDiv = document.createElement('div');
            consoleDiv.style.cssText = 'position: fixed; bottom: 20px; right: 20px; width: 500px; height: 300px; background: #0a0a0f; border: 1px solid var(--border-color); border-radius: 16px; z-index: 3000; display: flex; flex-direction: column; box-shadow: 0 20px 60px rgba(0,0,0,0.5);';
            consoleDiv.innerHTML = `
                <div style="padding: 12px 16px; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center;">
                    <span style="font-weight: 600;"><i class="fas fa-terminal"></i> Debug Console</span>
                    <button onclick="this.closest('div').parentElement.remove()" style="background: none; border: none; color: var(--text-secondary); cursor: pointer;">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div id="consoleOutput" style="flex: 1; padding: 16px; overflow-y: auto; font-family: monospace; font-size: 12px; color: var(--accent-cyan);">
                    <div>> System initialized...</div>
                    <div>> Monitoring active...</div>
                    <div>> Fetching system status...</div>
                </div>
                <div style="padding: 12px; border-top: 1px solid var(--border-color); display: flex; gap: 8px;">
                    <span style="color: var(--accent-cyan); padding-top: 8px;">></span>
                    <input type="text" id="consoleInput" name="consoleInput" placeholder="Enter command..." aria-label="Console command input" style="flex: 1; background: none; border: none; color: var(--text-primary); outline: none; font-family: monospace;" onkeypress="if(event.key==='Enter') executeCommand(this.value)">
                </div>
            `;
            document.body.appendChild(consoleDiv);

            // Fetch real system data from backend
            const output = consoleDiv.querySelector('#consoleOutput');

            try {
                const response = await fetch(`${API_BASE_URL}/developer-analytics/system`);
                const result = await response.json();

                if (result.success) {
                    const data = result.data;
                    const logs = [
                        `> API endpoints: OK`,
                        `> Database: ${data.serverHealth ? 'Connected' : 'Offline'}`,
                        `> Active users: ${data.overview.activeUsers.toLocaleString()}`,
                        `> Total videos: ${data.overview.totalVideos.toLocaleString()}`,
                        `> Server uptime: ${formatUptime(data.serverHealth.uptime)}`,
                        `> Memory usage: ${data.serverHealth.memory.used}GB / ${data.serverHealth.memory.total}GB (${data.serverHealth.memory.percentage}%)`,
                        `> CPU cores: ${data.serverHealth.cpu.cores}`,
                        `> Platform: ${data.serverHealth.platform}`,
                        `> All systems operational`
                    ];

                    let i = 0;
                    const interval = setInterval(() => {
                        if (i < logs.length && document.body.contains(consoleDiv)) {
                            const div = document.createElement('div');
                            div.textContent = logs[i];
                            output.appendChild(div);
                            output.scrollTop = output.scrollHeight;
                            i++;
                        } else {
                            clearInterval(interval);
                        }
                    }, 400);
                } else {
                    throw new Error('Failed to fetch system data');
                }
            } catch (error) {
                const errorDiv = document.createElement('div');
                errorDiv.style.color = 'var(--error)';
                errorDiv.textContent = '> Error: Backend offline or unreachable';
                output.appendChild(errorDiv);
            }
        }

        function executeCommand(cmd) {
            const output = document.getElementById('consoleOutput');
            const input = document.getElementById('consoleInput');

            if (!output || !input) return;

            // Add command to output
            const cmdDiv = document.createElement('div');
            cmdDiv.innerHTML = `<span style="color: var(--accent-purple);">> ${cmd}</span>`;
            output.appendChild(cmdDiv);

            // Process command
            let response = '';
            switch (cmd.toLowerCase()) {
                case 'help':
                    response = 'Available commands: help, status, clear, ping, logs';
                    break;
                case 'status':
                    response = 'All systems operational. Server load: ' + DashboardState.serverLoad + '%';
                    break;
                case 'clear':
                    output.innerHTML = '';
                    response = 'Console cleared.';
                    break;
                case 'ping':
                    response = 'Pong! Response time: ' + DashboardState.responseTime + 'ms';
                    break;
                case 'logs':
                    response = 'Showing last 50 log entries... [OK]';
                    break;
                default:
                    response = `Command not found: ${cmd}. Type 'help' for available commands.`;
            }

            if (cmd !== 'clear') {
                const respDiv = document.createElement('div');
                respDiv.textContent = response;
                output.appendChild(respDiv);
            }

            output.scrollTop = output.scrollHeight;
            input.value = '';
        }

        async function openDatabaseQuery() {
            const modal = document.createElement('div');
            modal.style.cssText = 'position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 2000; display: flex; align-items: center; justify-content: center;';
            modal.innerHTML = `
                <div style="background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 24px; padding: 32px; max-width: 700px; width: 90%;">
                    <h2 style="margin-bottom: 20px;"><i class="fas fa-database" style="color: var(--accent-cyan);"></i> Database Statistics</h2>
                    <div id="dbStats" style="margin-bottom: 20px; padding: 16px; background: var(--bg-secondary); border-radius: 12px; min-height: 100px; font-family: monospace; font-size: 12px; color: var(--text-secondary);">
                        <div style="color: var(--accent-cyan);"><i class="fas fa-spinner fa-spin"></i> Loading database statistics...</div>
                    </div>
                    <div style="display: flex; gap: 12px;">
                        <button onclick="refreshDatabaseStats()" style="flex: 1; padding: 14px; background: var(--accent-gradient); border: none; border-radius: 12px; color: white; font-weight: 600; cursor: pointer;">
                            <i class="fas fa-sync"></i> Refresh
                        </button>
                        <button onclick="this.closest('div').parentElement.parentElement.remove()" style="padding: 14px 24px; background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 12px; color: var(--text-primary); font-weight: 600; cursor: pointer;">
                            Close
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
            modal.addEventListener('click', (e) => {
                if (e.target === modal) modal.remove();
            });

            // Load database stats
            await refreshDatabaseStats();
        }

        async function refreshDatabaseStats() {
            const statsDiv = document.getElementById('dbStats');
            if (!statsDiv) return;

            statsDiv.innerHTML = '<div style="color: var(--accent-cyan);"><i class="fas fa-spinner fa-spin"></i> Loading...</div>';

            try {
                const response = await fetch(`${API_BASE_URL}/developer-analytics/database`);
                const result = await response.json();

                if (result.success) {
                    const db = result.data.database;
                    const collections = result.data.collections;

                    let html = `
                        <div style="margin-bottom: 16px;">
                            <div style="color: var(--accent-purple); font-weight: 600; margin-bottom: 8px;">DATABASE: ${db.name}</div>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px;">
                                <div>Size: <span style="color: var(--accent-cyan);">${db.size}</span></div>
                                <div>Storage: <span style="color: var(--accent-cyan);">${db.storageSize}</span></div>
                                <div>Collections: <span style="color: var(--accent-cyan);">${db.collections}</span></div>
                                <div>Indexes: <span style="color: var(--accent-cyan);">${db.indexes}</span></div>
                            </div>
                        </div>
                        <div style="border-top: 1px solid var(--border-color); padding-top: 12px;">
                            <div style="color: var(--accent-purple); font-weight: 600; margin-bottom: 8px;">COLLECTIONS</div>
                    `;

                    collections.forEach(col => {
                        html += `
                            <div style="margin-bottom: 8px; padding: 8px; background: var(--bg-primary); border-radius: 8px;">
                                <div style="color: var(--accent-cyan); font-weight: 600;">${col.name}</div>
                                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; font-size: 11px; margin-top: 4px;">
                                    <div>Count: ${col.count.toLocaleString()}</div>
                                    <div>Size: ${col.size}</div>
                                    <div>Avg: ${col.avgObjSize}</div>
                                </div>
                            </div>
                        `;
                    });

                    html += '</div>';
                    statsDiv.innerHTML = html;
                } else {
                    throw new Error('Failed to fetch database stats');
                }
            } catch (error) {
                statsDiv.innerHTML = `
                    <div style="color: var(--error);">
                        <i class="fas fa-exclamation-triangle"></i> Error: Backend offline or unreachable
                    </div>
                    <div style="color: var(--text-muted); font-size: 11px; margin-top: 8px;">
                        Make sure the backend server is running on port 5000
                    </div>
                `;
            }
        }

        async function deployUpdate() {
            if (confirm('Deploy latest update to production?\n\nThis will:\n- Restart backend services\n- Clear cache\n- Update all connected clients')) {
                const btn = event.target.closest('button');
                const originalText = btn.innerHTML;
                btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Deploying...';
                btn.disabled = true;

                try {
                    // Simulate deployment process
                    await new Promise(resolve => setTimeout(resolve, 2000));

                    btn.innerHTML = '<i class="fas fa-check"></i> Deployed!';
                    btn.style.background = 'var(--success)';
                    addAlert('success', 'Update deployed successfully to production', 'Deployment');

                    // Show deployment details
                    setTimeout(() => {
                        const details = `
Deployment Summary:
- Version: ${new Date().toISOString().split('T')[0]}
- Time: ${new Date().toLocaleTimeString()}
- Status: Success
- Services restarted: 4/4
- Cache cleared: Yes
                        `.trim();

                        if (confirm(details + '\n\nView deployment logs?')) {
                            openDebugConsole();
                        }
                    }, 500);

                    setTimeout(() => {
                        btn.innerHTML = originalText;
                        btn.style.background = '';
                        btn.disabled = false;
                    }, 3000);
                } catch (error) {
                    btn.innerHTML = '<i class="fas fa-times"></i> Failed';
                    btn.style.background = 'var(--error)';
                    addAlert('error', 'Deployment failed: ' + error.message, 'Deployment');

                    setTimeout(() => {
                        btn.innerHTML = originalText;
                        btn.style.background = '';
                        btn.disabled = false;
                    }, 3000);
                }
            }
        }

        // ==========================================
        // ALERT FEED - REAL-TIME NOTIFICATIONS
        // ==========================================
        function addAlert(type, title, source) {
            const alertList = document.querySelector('.alert-list');
            if (!alertList) return;

            const alertItem = document.createElement('div');
            alertItem.className = 'alert-item';
            alertItem.style.animation = 'slideIn 0.5s ease';
            alertItem.innerHTML = `
                <div class="alert-icon ${type}">
                    <i class="fas fa-${type === 'success' ? 'check' : type === 'warning' ? 'exclamation' : 'info'}"></i>
                </div>
                <div class="alert-content">
                    <div class="alert-title">${title}</div>
                    <div class="alert-time">Just now ‚Ä¢ ${source}</div>
                </div>
            `;

            alertList.insertBefore(alertItem, alertList.firstChild);

            // Keep only last 5 alerts
            while (alertList.children.length > 5) {
                alertList.removeChild(alertList.lastChild);
            }

            // Update badge
            const badge = document.getElementById('alertBadge');
            if (badge) {
                const count = alertList.children.length;
                if (count > 0) {
                    badge.textContent = count + ' New';
                    badge.className = 'card-badge ' + (count > 3 ? 'error' : count > 0 ? 'warning' : 'success');
                    badge.style.display = 'inline-block';
                } else {
                    badge.style.display = 'none';
                }
            }
        }

        function updateAlerts(alerts) {
            const alertList = document.getElementById('alertList');
            const alertBadge = document.getElementById('alertBadge');

            if (!alertList) return;

            if (!alerts || alerts.length === 0) {
                // Show empty state
                alertList.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: var(--text-muted);">
                        <i class="fas fa-bell-slash" style="font-size: 32px; margin-bottom: 12px; opacity: 0.5;"></i>
                        <div>No alerts</div>
                        <div style="font-size: 12px; margin-top: 8px;">System is running smoothly</div>
                    </div>
                `;
                if (alertBadge) alertBadge.style.display = 'none';
                return;
            }

            // Populate alerts from backend
            alertList.innerHTML = '';
            alerts.forEach(alert => {
                const alertItem = document.createElement('div');
                alertItem.className = 'alert-item';

                const iconClass = alert.type === 'error' ? 'error' :
                    alert.type === 'warning' ? 'warning' :
                        alert.type === 'success' ? 'success' : 'info';

                const iconName = alert.type === 'error' ? 'times' :
                    alert.type === 'warning' ? 'exclamation' :
                        alert.type === 'success' ? 'check' : 'info';

                alertItem.innerHTML = `
                    <div class="alert-icon ${iconClass}">
                        <i class="fas fa-${iconName}"></i>
                    </div>
                    <div class="alert-content">
                        <div class="alert-title">${alert.title}</div>
                        <div class="alert-time">${alert.time}</div>
                    </div>
                `;
                alertList.appendChild(alertItem);
            });

            // Update badge
            if (alertBadge) {
                const count = alerts.length;
                if (count > 0) {
                    alertBadge.textContent = count + ' New';
                    alertBadge.className = 'card-badge ' + (count > 3 ? 'error' : 'warning');
                    alertBadge.style.display = 'inline-block';
                } else {
                    alertBadge.style.display = 'none';
                }
            }
        }

        function initAlertSystem() {
            // NO FAKE ALERTS - Only show real alerts from backend
            // Alerts will be populated by loadDeveloperAnalytics() if backend provides them
        }

        // ==========================================
        // DEPENDENCY WEB - INTERACTIVE
        // ==========================================
        async function initDependencyWeb() {
            console.log('üï∏Ô∏è Initializing Dependency Web...');

            const nodes = document.querySelectorAll('.web-node');
            const center = document.querySelector('.web-center');

            console.log('Found web nodes:', nodes.length);

            if (nodes.length === 0) {
                console.error('‚ùå No dependency web nodes found!');
                return;
            }

            // Use direct event listeners without cloning
            nodes.forEach((node, index) => {
                console.log(`Setting up node ${index}`);

                // Remove any existing onclick
                node.onclick = null;

                // Add click handler
                node.addEventListener('click', async function (e) {
                    console.log('üñ±Ô∏è Node clicked:', index);
                    e.preventDefault();
                    e.stopPropagation();

                    try {
                        const icon = node.querySelector('i');
                        const serviceName = icon.className.includes('video') ? 'Video Service' :
                            icon.className.includes('user') ? 'Auth Service' :
                                icon.className.includes('comment') ? 'Social Service' : 'Payment Service';

                        console.log('Checking service:', serviceName);

                        try {
                            const response = await fetch(`${API_BASE_URL}/developer-analytics/system`);
                            const result = await response.json();

                            if (result.success) {
                                const data = result.data;
                                const status = data.serverHealth ? 'Online' : 'Unknown';
                                const uptime = formatUptime(data.serverHealth.uptime);
                                const memory = `${data.serverHealth.memory.used}GB / ${data.serverHealth.memory.total}GB`;

                                let serviceDetails = '';
                                if (serviceName === 'Video Service') {
                                    serviceDetails = `\nTotal Videos: ${data.overview.totalVideos.toLocaleString()}\nTotal Views: ${data.overview.totalViews.toLocaleString()}\nStorage: ${data.overview.storageTB}TB`;
                                } else if (serviceName === 'Auth Service') {
                                    serviceDetails = `\nTotal Users: ${data.overview.totalUsers.toLocaleString()}\nActive Users: ${data.overview.activeUsers.toLocaleString()}\nEngagement: ${data.overview.userEngagementRate}%`;
                                } else if (serviceName === 'Social Service') {
                                    serviceDetails = `\nTotal Comments: ${data.overview.totalComments.toLocaleString()}\nAvg Comments/Video: ${data.overview.avgCommentsPerVideo}`;
                                } else if (serviceName === 'Payment Service') {
                                    serviceDetails = `\nTotal Revenue: $${data.revenue.total}\nDaily Avg: $${data.revenue.avgDaily}\nProjected Monthly: $${data.revenue.projectedMonthly}`;
                                }

                                alert(`${serviceName}\n\nStatus: ${status}\nUptime: ${uptime}\nMemory: ${memory}${serviceDetails}`);
                            } else {
                                throw new Error('Failed to fetch service data');
                            }
                        } catch (error) {
                            console.error('Service check error:', error);
                            alert(`${serviceName}\n\nStatus: Offline\nError: Backend unreachable\n\nMake sure the backend server is running on port 5000`);
                        }
                    } catch (error) {
                        console.error('Node click error:', error);
                        alert('Error: ' + error.message);
                    }
                }, { capture: false });

                // Add hover effects
                node.addEventListener('mouseenter', () => {
                    if (center) {
                        center.style.transform = 'scale(1.1)';
                        center.style.boxShadow = '0 0 80px rgba(0, 212, 255, 0.6)';
                    }
                });

                node.addEventListener('mouseleave', () => {
                    if (center) {
                        center.style.transform = '';
                        center.style.boxShadow = '';
                    }
                });

                // Ensure node is clickable
                node.style.cursor = 'pointer';
                node.style.pointerEvents = 'auto';

                console.log(`Node ${index} setup complete`);
            });

            console.log('‚úÖ Dependency web initialized successfully');
        }

        // ==========================================
        // HOTFIX MODAL - FUNCTIONAL
        // ==========================================
        function showHotfixModal() {
            const modal = document.getElementById('hotfixModal');
            if (modal) {
                modal.style.display = 'flex';
            }
        }

        function closeHotfixModal() {
            const modal = document.getElementById('hotfixModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }

        // Make hotfix deploy button work
        document.addEventListener('DOMContentLoaded', () => {
            const hotfixBtn = document.querySelector('#hotfixModal button[id="deployHotfixBtn"]') || document.querySelector('#hotfixModal button');
            if (hotfixBtn && hotfixBtn.textContent.includes('Deploy Hotfix')) {
                hotfixBtn.onclick = async function () {
                    const select = document.querySelector('#hotfixModal select');
                    const textarea = document.querySelector('#hotfixModal textarea');
                    const notify = document.querySelector('#hotfixModal input[type="checkbox"]');

                    if (!select || !select.value || !textarea || !textarea.value.trim()) {
                        alert('Please select an issue and provide a fix description.');
                        return;
                    }

                    const issueText = select.options[select.selectedIndex].text;
                    const description = textarea.value.trim();
                    const shouldNotify = notify ? notify.checked : true;

                    this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Deploying...';
                    this.disabled = true;

                    try {
                        // Simulate hotfix deployment
                        await new Promise(resolve => setTimeout(resolve, 2500));

                        // Add success alert
                        addAlert('success', `Hotfix deployed: ${issueText}`, 'Hotfix');

                        // Show deployment summary
                        const summary = `
Hotfix Deployed Successfully!

Issue: ${issueText}
Description: ${description}
Time: ${new Date().toLocaleTimeString()}
Notified: ${shouldNotify ? 'All developers' : 'No one'}
Status: Active

The fix has been applied without downtime.
                        `.trim();

                        setTimeout(() => {
                            alert(summary);
                        }, 300);

                        closeHotfixModal();
                        this.innerHTML = '<i class="fas fa-rocket"></i> Deploy Hotfix';
                        this.disabled = false;
                        textarea.value = '';
                        select.selectedIndex = 0;
                        if (notify) notify.checked = true;
                    } catch (error) {
                        addAlert('error', 'Hotfix deployment failed: ' + error.message, 'Hotfix');
                        this.innerHTML = '<i class="fas fa-rocket"></i> Deploy Hotfix';
                        this.disabled = false;
                    }
                };
            }
        });

        // ==========================================
        // NAVIGATION & UI - ADVANCED ERROR-FREE SYSTEM
        // ==========================================
        function initNavigation() {
            console.log('üß≠ Initializing Advanced Navigation System...');

            try {
                // Navigation pills with error handling
                const navPills = document.querySelectorAll('.nav-pill-btn');
                console.log('Found nav pills:', navPills.length);

                if (navPills.length > 0) {
                    navPills.forEach((btn, index) => {
                        try {
                            btn.addEventListener('click', function () {
                                try {
                                    const section = this.dataset.section;
                                    console.log('Nav pill clicked:', section);

                                    if (!section) {
                                        console.warn('No section data attribute found');
                                        return;
                                    }

                                    document.querySelectorAll('.nav-pill-btn').forEach(b => b.classList.remove('active'));
                                    this.classList.add('active');

                                    const target = document.getElementById(section);
                                    if (target) {
                                        scrollToSection(target);
                                    } else {
                                        console.error('Target section not found:', section);
                                    }
                                } catch (error) {
                                    console.error('Error in nav pill click handler:', error);
                                }
                            });
                        } catch (error) {
                            console.error(`Error setting up nav pill ${index}:`, error);
                        }
                    });
                } else {
                    console.log('No nav pills found - skipping');
                }

                // Sidebar navigation with advanced error handling
                const sidebarLinks = document.querySelectorAll('.sidebar-link');
                console.log('Found sidebar links:', sidebarLinks.length);

                if (sidebarLinks.length === 0) {
                    console.error('‚ùå No sidebar links found!');
                    return;
                }

                sidebarLinks.forEach((link, index) => {
                    try {
                        const href = link.getAttribute('href');

                        if (!href) {
                            console.warn(`Sidebar link ${index} has no href attribute`);
                            return;
                        }

                        console.log(`Setting up sidebar link ${index}: ${href}`);

                        link.addEventListener('click', function (e) {
                            try {
                                console.log('üñ±Ô∏è Sidebar link clicked:', href);
                                e.preventDefault();
                                e.stopPropagation();

                                if (href && href.startsWith('#')) {
                                    const targetId = href.substring(1);
                                    const target = document.getElementById(targetId);

                                    console.log('Target element:', targetId, target ? 'found' : 'NOT FOUND');

                                    if (target) {
                                        // Ensure target is visible
                                        if (target.style.display === 'none') {
                                            target.style.display = 'block';
                                            console.log('Made target visible:', targetId);
                                        }

                                        scrollToSection(target);
                                        console.log('‚úÖ Scrolled to:', targetId);
                                    } else {
                                        console.error('‚ùå Target not found:', targetId);
                                        // Try to find similar IDs
                                        const allIds = Array.from(document.querySelectorAll('[id]')).map(el => el.id);
                                        console.log('Available IDs:', allIds);
                                    }
                                } else {
                                    console.warn('Invalid href format:', href);
                                }

                                // Update active state
                                document.querySelectorAll('.sidebar-link').forEach(l => l.classList.remove('active'));
                                this.classList.add('active');
                                console.log('‚úÖ Active state updated');
                            } catch (error) {
                                console.error('Error in sidebar link click handler:', error);
                            }
                        });
                    } catch (error) {
                        console.error(`Error setting up sidebar link ${index}:`, error);
                    }
                });

                console.log('‚úÖ Navigation initialized successfully');
            } catch (error) {
                console.error('‚ùå Critical error in initNavigation:', error);
            }
        }

        // Advanced smooth scroll with comprehensive error handling
        function scrollToSection(element) {
            try {
                if (!element) {
                    console.error('scrollToSection: element is null or undefined');
                    return;
                }

                // Verify element is in DOM
                if (!document.body.contains(element)) {
                    console.error('scrollToSection: element is not in DOM');
                    return;
                }

                const headerOffset = 90; // Header height + padding
                const elementPosition = element.getBoundingClientRect().top;
                const offsetPosition = elementPosition + window.pageYOffset - headerOffset;

                // Validate scroll position
                if (isNaN(offsetPosition)) {
                    console.error('scrollToSection: invalid scroll position');
                    return;
                }

                window.scrollTo({
                    top: offsetPosition,
                    behavior: 'smooth'
                });

                // Highlight the section briefly with error handling
                try {
                    element.style.transition = 'box-shadow 0.3s ease';
                    element.style.boxShadow = '0 0 30px rgba(0, 212, 255, 0.5)';
                    setTimeout(() => {
                        try {
                            element.style.boxShadow = '';
                        } catch (e) {
                            console.warn('Error removing highlight:', e);
                        }
                    }, 1000);
                } catch (error) {
                    console.warn('Error applying highlight effect:', error);
                }

                console.log('‚úÖ Scroll completed successfully');
            } catch (error) {
                console.error('‚ùå Error in scrollToSection:', error);
            }
        }

        // ==========================================
        // ANIMATIONS
        // ==========================================
        function animateChartBars() {
            // NO FAKE DATA - Chart bars are populated by real data from loadDeveloperAnalytics()
            // This function is no longer needed
        }

        // ==========================================
        // OPENING ANIMATION
        // ==========================================
        async function playOpeningAnimation() {
            const overlay = document.getElementById('openingOverlay');
            const logo = document.getElementById('openingLogo');
            const hexGrid = document.getElementById('hexGrid');
            const title = document.getElementById('openingTitle');
            const subtitle = document.getElementById('openingSubtitle');
            const bootSequence = document.getElementById('bootSequence');
            const progress = document.getElementById('openingProgress');
            const progressBar = document.getElementById('progressBar');
            const progressText = document.getElementById('progressText');
            const orbitRings = document.querySelectorAll('.orbit-ring');

            // Create hex grid
            for (let i = 0; i < 6; i++) {
                const hex = document.createElement('div');
                hex.className = 'hex';
                hex.style.left = Math.random() * 200 + 'px';
                hex.style.top = Math.random() * 200 + 'px';
                hex.style.transform = `rotate(${Math.random() * 360}deg)`;
                hexGrid.appendChild(hex);
            }

            // Boot sequence messages
            const bootMessages = [
                { text: '> Initializing system core...', delay: 100, type: 'normal' },
                { text: '> Loading kernel modules...', delay: 300, type: 'normal' },
                { text: '> Mounting file systems...', delay: 500, type: 'success' },
                { text: '> Starting network services...', delay: 700, type: 'normal' },
                { text: '> Connecting to database...', delay: 900, type: 'success' },
                { text: '> Loading user preferences...', delay: 1100, type: 'normal' },
                { text: '> Initializing monitoring agents...', delay: 1300, type: 'warning' },
                { text: '> Calibrating sensors...', delay: 1500, type: 'normal' },
                { text: '> Establishing secure connection...', delay: 1700, type: 'success' },
                { text: '> System ready.', delay: 1900, type: 'success' }
            ];

            // Phase 1: Show boot sequence
            await new Promise(r => setTimeout(r, 500));
            bootSequence.classList.add('active');

            for (const msg of bootMessages) {
                await new Promise(r => setTimeout(r, 200));
                const line = document.createElement('div');
                line.className = `boot-line ${msg.type}`;
                line.textContent = msg.text;
                line.style.animationDelay = '0s';
                bootSequence.appendChild(line);

                // Update progress
                const progress = ((bootMessages.indexOf(msg) + 1) / bootMessages.length) * 100;
                progressBar.style.width = progress + '%';
                progressText.textContent = `Loading... ${Math.round(progress)}%`;
            }

            // Phase 2: Activate visual elements
            await new Promise(r => setTimeout(r, 500));

            bootSequence.style.opacity = '0';
            bootSequence.style.transition = 'opacity 0.5s ease';

            hexGrid.classList.add('active');
            logo.classList.add('active');
            orbitRings.forEach((ring, i) => {
                setTimeout(() => ring.classList.add('active'), i * 200);
            });

            await new Promise(r => setTimeout(r, 800));

            title.classList.add('active');
            title.classList.add('active'); // Trigger glitch

            await new Promise(r => setTimeout(r, 300));
            subtitle.classList.add('active');

            progress.classList.add('active');
            progressText.classList.add('active');
            progressText.textContent = 'Welcome, Commander';
            progressBar.style.width = '100%';

            // Create particle burst
            createParticleBurst();

            // Phase 3: Exit animation
            await new Promise(r => setTimeout(r, 1500));

            overlay.classList.add('hidden');

            // Remove overlay after transition
            await new Promise(r => setTimeout(r, 800));
            overlay.style.display = 'none';

            // Start dashboard animations
            startDashboardAnimations();
        }

        function createParticleBurst() {
            const logo = document.getElementById('openingLogo');
            const rect = logo.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;

            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle-burst active';
                particle.style.left = centerX + 'px';
                particle.style.top = centerY + 'px';
                particle.style.setProperty('--tx', (Math.random() - 0.5) * 400 + 'px');
                particle.style.setProperty('--ty', (Math.random() - 0.5) * 400 + 'px');
                particle.style.animationDelay = (Math.random() * 0.3) + 's';
                document.getElementById('openingOverlay').appendChild(particle);
            }
        }

        function startDashboardAnimations() {
            // Animate cards entrance
            document.querySelectorAll('.card, .stat-card').forEach((card, index) => {
                setTimeout(() => {
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, index * 100);
            });
        }

        // ==========================================
        // PATHWAY SYSTEM FUNCTIONS
        // ==========================================

        // Refresh pathway diagnostics
        async function refreshPathways() {
            console.log('Refreshing pathway diagnostics...');
            await PathwayMonitor.runFullDiagnostics();
            const report = PathwayMonitor.getReport();
            updatePathwayUI(report);
        }

        // Export pathway report
        function exportPathwayReport() {
            PathwayMonitor.exportReport();
        }

        // Initialize pathway system
        async function initPathwaySystem() {
            console.log('Initializing Pathway System...');

            // Initialize monitor
            let report;
            const initResult = PathwayMonitor.init();
            if (initResult && typeof initResult.then === 'function') {
                // If init returns a promise (developer version)
                report = await initResult;
            } else {
                // If init doesn't return a promise (shared version), just continue
                console.log('‚úÖ Pathway Monitor initialized (basic)');
                return;
            }

            // Update UI
            updatePathwayUI(report);

            // Listen for health updates
            window.addEventListener('pathwayHealthUpdate', (e) => {
                updatePathwayStatus(e.detail);
            });
        }

        // Update pathway UI with report data
        function updatePathwayUI(report) {
            // Update stats
            const validCount = document.getElementById('pathwayValidCount');
            const warningCount = document.getElementById('pathwayWarningCount');
            const errorCount = document.getElementById('pathwayErrorCount');
            const totalCount = document.getElementById('pathwayTotalCount');

            if (validCount) validCount.textContent = report.stats.validPathways;
            if (warningCount) warningCount.textContent = report.stats.warnings;
            if (errorCount) errorCount.textContent = report.stats.invalidPathways;
            if (totalCount) totalCount.textContent = report.stats.totalPathways;

            // Update overall status
            const statusBadge = document.getElementById('pathwayOverallStatus');
            const statusDot = document.getElementById('pathwayStatusDot');

            if (statusBadge) {
                if (report.health.overall === 'healthy') {
                    statusBadge.className = 'card-badge success';
                    statusBadge.textContent = 'Healthy';
                } else if (report.health.overall === 'warning') {
                    statusBadge.className = 'card-badge warning';
                    statusBadge.textContent = 'Warning';
                } else {
                    statusBadge.className = 'card-badge error';
                    statusBadge.textContent = 'Error';
                }
            }

            if (statusDot) {
                if (report.health.overall === 'healthy') {
                    statusDot.className = 'status-dot online';
                } else if (report.health.overall === 'warning') {
                    statusDot.className = 'status-dot warning';
                } else {
                    statusDot.className = 'status-dot error';
                }
            }

            // Update configuration
            const apiBase = document.getElementById('configApiBase');
            const totalPages = document.getElementById('configTotalPages');
            const totalEndpoints = document.getElementById('configTotalEndpoints');

            if (apiBase) apiBase.textContent = report.config.apiBaseUrl;
            if (totalPages) totalPages.textContent = report.config.totalPages;
            if (totalEndpoints) totalEndpoints.textContent = report.config.totalEndpoints;

            // Update pathway lists
            renderPathways('navigationPathways', report.validations.navigation);
            renderPathways('apiPathways', report.validations.api);
            renderPathways('storagePathways', report.validations.storage);
            renderPathways('filePathways', report.validations.files);
        }

        // Render pathway items
        function renderPathways(containerId, pathways) {
            const container = document.getElementById(containerId);
            if (!container) return;

            if (pathways.length === 0) {
                container.innerHTML = '<div style="text-align: center; color: var(--text-muted); padding: 20px;">No pathways found</div>';
                return;
            }

            container.innerHTML = pathways.map(pathway => `
                <div class="pathway-item">
                    <div>
                        <div class="pathway-name">
                            ${pathway.name}
                        </div>
                        <div class="pathway-path">${pathway.path || pathway.endpoint || pathway.key || ''}</div>
                        ${pathway.message ? `<div style="font-size: 11px; color: var(--text-muted); margin-top: 4px;">${pathway.message}</div>` : ''}
                    </div>
                    <div class="pathway-status ${pathway.status}">
                        <i class="fas fa-${pathway.status === 'valid' ? 'check' : pathway.status === 'warning' ? 'exclamation-triangle' : 'times'}"></i>
                    </div>
                </div>
            `).join('');
        }

        // Update pathway status in sidebar
        function updatePathwayStatus(summary) {
            const statusDot = document.getElementById('pathwayStatusDot');
            if (statusDot) {
                if (summary.status === 'healthy') {
                    statusDot.className = 'status-dot online';
                } else if (summary.status === 'warning') {
                    statusDot.className = 'status-dot warning';
                } else {
                    statusDot.className = 'status-dot error';
                }
            }
        }

        // Show pathway map
        function showPathwayMap() {
            const map = PathwayMonitor.getPathwayMap();
            console.log('Pathway Map:', map);
            alert('Pathway Map logged to console. Check Developer Tools (F12).');
        }

        // Test all pathways
        async function testAllPathways() {
            alert('Running comprehensive pathway tests...');
            await PathwayMonitor.runFullDiagnostics();
            const report = PathwayMonitor.getReport();
            updatePathwayUI(report);
            alert(`Tests complete!\n\nValid: ${report.stats.validPathways}\nWarnings: ${report.stats.warnings}\nErrors: ${report.stats.invalidPathways}`);
        }

        // View documentation
        function viewDocumentation() {
            window.open('../Bhuban video stream app/PATHWAY_SYSTEM.md', '_blank');
        }

        // ==========================================
        // NAVIGATION ENHANCEMENT FOR PATHWAY PANEL
        // ==========================================
        function enhanceNavigation() {
            try {
                console.log('üîß Enhancing navigation system...');

                // Ensure all sections are visible
                const allSections = document.querySelectorAll('.card[id]');
                console.log('Found sections:', allSections.length);

                allSections.forEach(section => {
                    try {
                        if (section.style.display === 'none') {
                            section.style.display = 'block';
                            console.log('Made section visible:', section.id);
                        }
                    } catch (error) {
                        console.warn('Error making section visible:', section.id, error);
                    }
                });

                // Verify all sidebar links have corresponding sections
                const sidebarLinks = document.querySelectorAll('.sidebar-link[href^="#"]');
                const missingTargets = [];

                sidebarLinks.forEach(link => {
                    try {
                        const href = link.getAttribute('href');
                        if (href) {
                            const targetId = href.substring(1);
                            const target = document.getElementById(targetId);
                            if (!target) {
                                missingTargets.push(targetId);
                            }
                        }
                    } catch (error) {
                        console.warn('Error checking link:', error);
                    }
                });

                if (missingTargets.length > 0) {
                    console.warn('‚ö†Ô∏è Missing target sections:', missingTargets);
                } else {
                    console.log('‚úÖ All sidebar links have valid targets');
                }

                console.log('‚úÖ Navigation enhancement complete');
            } catch (error) {
                console.error('‚ùå Error in enhanceNavigation:', error);
            }
        }

        // ==========================================
        // TRAFFIC MONITOR - REAL-TIME TRACKING
        // ==========================================
        let trafficHistory = [];
        const MAX_TRAFFIC_POINTS = 24; // 24 hours of data

        function initTrafficMonitor() {
            console.log('üìä Initializing Traffic Monitor...');

            // Initialize with empty data points
            for (let i = 0; i < MAX_TRAFFIC_POINTS; i++) {
                trafficHistory.push({
                    timestamp: Date.now() - (MAX_TRAFFIC_POINTS - i) * 3600000, // Hourly data
                    requests: 0,
                    bandwidth: 0,
                    activeUsers: 0
                });
            }

            renderTrafficChart();
            console.log('‚úÖ Traffic Monitor initialized');
        }

        async function updateTrafficMonitor() {
            try {
                // Fetch real data from backend
                const response = await fetch(`${SYSTEM_API_URL}/developer-analytics/overview`);

                if (response.ok) {
                    const data = await response.json();

                    // Update current stats
                    const activeUsers = data.overview?.activeUsers || 0;
                    const totalViews = data.overview?.totalViews || 0;

                    // Calculate metrics
                    const requestsPerMin = activeUsers > 0 ? Math.round(activeUsers * 0.5) : 0;
                    const bandwidthMBps = activeUsers > 0 ? (activeUsers * 0.8).toFixed(2) : '0.00';

                    // Update display
                    const requestsEl = document.getElementById('traffic-requests');
                    const bandwidthEl = document.getElementById('traffic-bandwidth');
                    const activeEl = document.getElementById('traffic-active');
                    const statusEl = document.getElementById('traffic-status');

                    if (requestsEl) requestsEl.textContent = requestsPerMin.toLocaleString();
                    if (bandwidthEl) bandwidthEl.textContent = bandwidthMBps + ' MB/s';
                    if (activeEl) activeEl.textContent = activeUsers.toLocaleString();

                    // Update status badge
                    if (statusEl) {
                        if (activeUsers > 0) {
                            statusEl.textContent = 'Live';
                            statusEl.className = 'card-badge success';
                        } else {
                            statusEl.textContent = 'Idle';
                            statusEl.className = 'card-badge';
                        }
                    }

                    // Add to history
                    trafficHistory.push({
                        timestamp: Date.now(),
                        requests: requestsPerMin,
                        bandwidth: parseFloat(bandwidthMBps),
                        activeUsers: activeUsers
                    });

                    // Keep only last 24 points
                    if (trafficHistory.length > MAX_TRAFFIC_POINTS) {
                        trafficHistory.shift();
                    }

                    renderTrafficChart();

                } else {
                    // No data available
                    showNoTrafficData();
                }
            } catch (error) {
                console.error('Traffic Monitor Error:', error);
                showNoTrafficData();
            }
        }

        function renderTrafficChart() {
            const barsContainer = document.getElementById('traffic-chart-bars');
            const labelsContainer = document.getElementById('traffic-chart-labels');

            if (!barsContainer || !labelsContainer) return;

            // Clear existing content
            barsContainer.innerHTML = '';
            labelsContainer.innerHTML = '';

            if (trafficHistory.length === 0) {
                showNoTrafficData();
                return;
            }

            // Find max value for scaling
            const maxRequests = Math.max(...trafficHistory.map(d => d.requests), 1);

            // Show last 7 data points
            const displayData = trafficHistory.slice(-7);

            displayData.forEach((data, index) => {
                // Create bar
                const bar = document.createElement('div');
                bar.className = 'chart-bar';
                const height = (data.requests / maxRequests) * 100;
                bar.style.height = height + '%';
                bar.title = `${data.requests} req/min\n${data.activeUsers} users`;
                barsContainer.appendChild(bar);

                // Create label
                const label = document.createElement('span');
                const date = new Date(data.timestamp);
                if (index === displayData.length - 1) {
                    label.textContent = 'Now';
                } else {
                    label.textContent = date.getHours().toString().padStart(2, '0') + ':00';
                }
                labelsContainer.appendChild(label);
            });
        }

        function showNoTrafficData() {
            const requestsEl = document.getElementById('traffic-requests');
            const bandwidthEl = document.getElementById('traffic-bandwidth');
            const activeEl = document.getElementById('traffic-active');
            const statusEl = document.getElementById('traffic-status');
            const barsContainer = document.getElementById('traffic-chart-bars');
            const labelsContainer = document.getElementById('traffic-chart-labels');

            if (requestsEl) requestsEl.textContent = '0';
            if (bandwidthEl) bandwidthEl.textContent = '0.00 MB/s';
            if (activeEl) activeEl.textContent = '0';
            if (statusEl) {
                statusEl.textContent = 'No Data';
                statusEl.className = 'card-badge';
            }

            // Show empty chart
            if (barsContainer) {
                barsContainer.innerHTML = '<div style="display: flex; align-items: center; justify-content: center; height: 100%; color: rgba(255,255,255,0.3); font-size: 14px;">No traffic data available</div>';
            }
            if (labelsContainer) {
                labelsContainer.innerHTML = '';
            }
        }

        // ==========================================
        // INITIALIZATION - ADVANCED ERROR-FREE SYSTEM
        // ==========================================
        document.addEventListener('DOMContentLoaded', function () {
            console.log('üöÄ Starting Bhuban Developer Dashboard...');

            try {
                // Play opening animation first
                playOpeningAnimation().catch(error => {
                    console.error('Opening animation error:', error);
                });

                // Initialize systems with error handling
                const initFunctions = [
                    { name: 'createParticles', fn: createParticles },
                    { name: 'initSystemMonitoring', fn: initSystemMonitoring },
                    { name: 'initLogicVault', fn: initLogicVault },
                    { name: 'initFuelTank', fn: initFuelTank },
                    { name: 'initTimeMachine', fn: initTimeMachine },
                    { name: 'initToolkit', fn: initToolkit },
                    { name: 'initAlertSystem', fn: initAlertSystem },
                    { name: 'initDependencyWeb', fn: initDependencyWeb },
                    { name: 'initNavigation', fn: initNavigation },
                    { name: 'enhanceNavigation', fn: enhanceNavigation },
                    { name: 'initTrafficMonitor', fn: initTrafficMonitor }
                ];

                initFunctions.forEach(({ name, fn }) => {
                    try {
                        console.log(`Initializing ${name}...`);
                        fn();
                        console.log(`‚úÖ ${name} initialized`);
                    } catch (error) {
                        console.error(`‚ùå Error initializing ${name}:`, error);
                    }
                });

                // Initialize pathway system with error handling
                try {
                    console.log('Initializing pathway system...');
                    initPathwaySystem();
                    console.log('‚úÖ Pathway system initialized');
                } catch (error) {
                    console.error('‚ùå Error initializing pathway system:', error);
                }

                // Check API status with error handling
                try {
                    checkApiStatus();
                    setInterval(() => {
                        try {
                            checkApiStatus();
                        } catch (error) {
                            console.error('Error in API status check:', error);
                        }
                    }, 30000);
                } catch (error) {
                    console.error('‚ùå Error setting up API status checks:', error);
                }

                // Animate chart bars
                try {
                    animateChartBars();
                    setInterval(() => {
                        try {
                            animateChartBars();
                        } catch (error) {
                            console.error('Error animating chart bars:', error);
                        }
                    }, 10000);
                } catch (error) {
                    console.error('‚ùå Error setting up chart animations:', error);
                }

                // Update traffic monitor
                try {
                    updateTrafficMonitor();
                    setInterval(() => {
                        try {
                            updateTrafficMonitor();
                        } catch (error) {
                            console.error('Error updating traffic monitor:', error);
                        }
                    }, 5000);
                } catch (error) {
                    console.error('‚ùå Error setting up traffic monitor updates:', error);
                }

                // Card animations with error handling
                try {
                    const observerOptions = {
                        threshold: 0.1,
                        rootMargin: '0px 0px -50px 0px'
                    };

                    const cardObserver = new IntersectionObserver((entries) => {
                        entries.forEach(entry => {
                            try {
                                if (entry.isIntersecting) {
                                    entry.target.style.opacity = '1';
                                    entry.target.style.transform = 'translateY(0)';
                                }
                            } catch (error) {
                                console.warn('Error animating card:', error);
                            }
                        });
                    }, observerOptions);

                    document.querySelectorAll('.card, .stat-card').forEach(card => {
                        try {
                            card.style.opacity = '0';
                            card.style.transform = 'translateY(30px)';
                            card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
                            cardObserver.observe(card);
                        } catch (error) {
                            console.warn('Error setting up card animation:', error);
                        }
                    });
                } catch (error) {
                    console.error('‚ùå Error setting up card animations:', error);
                }

                console.log('‚úÖ Dashboard initialization complete');
            } catch (error) {
                console.error('‚ùå Critical error during initialization:', error);
            }
        });

        // Close modal on backdrop click
        document.addEventListener('click', function (e) {
            if (e.target.id === 'hotfixModal') {
                closeHotfixModal();
            }
        });

        // ==========================================
        // SYSTEM CONTROL PANEL FUNCTIONS
        // ==========================================

        // System State Management
        const SystemState = {
            backend: {
                running: false,
                port: 5000,
                pid: null
            },
            apps: {
                viewer: { enabled: true, status: 'healthy' },
                creator: { enabled: true, status: 'healthy' },
                auth: { enabled: true, status: 'healthy' },
                db: { enabled: true, status: 'healthy' }
            },
            envVars: JSON.parse(localStorage.getItem('bhuban_env_vars')) || {
                NODE_ENV: 'development',
                PORT: '5000',
                MONGODB_URI: 'mongodb://localhost:27017/bhuban',
                JWT_SECRET: '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢'
            }
        };

        // Integrated Terminal Functions
        let terminalVisible = false;
        let backendProcess = null;
        let isElectron = typeof require !== 'undefined';

        // Electron IPC setup
        if (isElectron) {
            const { ipcRenderer } = require('electron');

            // Listen for backend status updates from main process
            ipcRenderer.on('backend-status', (event, status) => {
                updateBackendUI(status.running);
            });

            // Listen for terminal output from real backend process
            ipcRenderer.on('terminal-output', (event, data) => {
                addTerminalLine(data.type, data.text);
            });
        }

        function updateBackendUI(running) {
            const indicator = document.getElementById('backend-indicator');
            const statusText = document.getElementById('backend-status-text');
            const systemStatus = document.getElementById('system-status');

            SystemState.backend.running = running;

            if (running) {
                if (indicator) indicator.className = 'status-indicator online';
                if (statusText) statusText.textContent = 'Backend Online (Port: 5000)';
                if (systemStatus) {
                    systemStatus.textContent = 'Online';
                    systemStatus.className = 'card-badge success';
                }
                addSystemLog('success', 'Backend server is running on port 5000');
            } else {
                if (indicator) indicator.className = 'status-indicator offline';
                if (statusText) statusText.textContent = 'Backend Not Running';
                if (systemStatus) {
                    systemStatus.textContent = 'Offline';
                    systemStatus.className = 'card-badge error';
                }
            }
            saveSystemState();
        }

        function toggleTerminal() {
            try {
                const terminal = document.getElementById('integrated-terminal');
                const hint = document.getElementById('terminal-hint');
                const btn = document.getElementById('btn-start-backend');

                if (!terminal || !btn) {
                    console.error('Terminal elements not found');
                    return;
                }

                terminalVisible = !terminalVisible;

                if (terminalVisible) {
                    terminal.style.display = 'block';
                    if (hint) hint.style.display = 'none';
                    btn.innerHTML = '<i class="fas fa-times"></i><span>Close Terminal</span>';
                    btn.classList.add('active');

                    const terminalInput = document.getElementById('terminal-input');
                    if (terminalInput) terminalInput.focus();

                    addTerminalLine('info', 'Terminal opened. Ready for commands.');
                    addTerminalLine('info', '');
                    addTerminalLine('info', 'üìã To start the backend servers:');
                    addTerminalLine('info', '   1. Open a new terminal/command prompt');
                    addTerminalLine('info', '   2. Navigate to: Bhuban video stream app/backend');
                    addTerminalLine('info', '   3. Run: node server.js');
                    addTerminalLine('info', '');
                    addTerminalLine('info', 'üöÄ OR use the START.bat file in the root folder');
                    addTerminalLine('info', '   (It will start all servers automatically)');
                    addTerminalLine('info', '');

                    // Check backend status
                    checkBackendStatus().then(status => {
                        if (status.running) {
                            addTerminalLine('success', '‚úÖ Backend is already running!');
                            addTerminalLine('success', `   Port: ${status.port || 5000}`);
                        } else {
                            addTerminalLine('warning', '‚ö†Ô∏è  Backend not detected');
                            addTerminalLine('info', '   Please start it manually using START.bat');
                        }
                    }).catch(error => {
                        addTerminalLine('error', '‚ùå Could not check backend status');
                        console.error('Backend status check error:', error);
                    });
                } else {
                    terminal.style.display = 'none';
                    if (hint) hint.style.display = 'block';
                    btn.innerHTML = '<i class="fas fa-rocket"></i><span>Auto-Start Backend</span>';
                    btn.classList.remove('active');
                }
            } catch (error) {
                console.error('Error in toggleTerminal:', error);
            }
        }

        // Auto-start backend using available methods
        async function autoStartBackend() {
            addTerminalLine('info', 'Attempting to auto-start backend...');
            addTerminalLine('info', 'Triggering desktop automation...');

            // Method 1: Try to trigger VBS file via protocol handler
            try {
                addTerminalLine('info', 'Launching Bhuban-Auto-Start.vbs...');

                // Create a link to trigger the VBS file
                const link = document.createElement('a');
                link.href = '../Bhuban-Auto-Start.vbs';
                link.style.display = 'none';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);

                addTerminalLine('success', '‚úì Auto-Start script triggered!');
                addTerminalLine('info', 'Check your desktop - a window should open shortly...');

                // Check status after delay
                setTimeout(async () => {
                    addTerminalLine('info', 'Checking if backend started...');
                    const status = await checkBackendStatus();
                    if (status.running) {
                        addTerminalLine('success', '‚úì‚úì‚úì Backend is RUNNING! ‚úì‚úì‚úì');
                        updateBackendUI(true);
                    } else {
                        addTerminalLine('warning', 'Backend still initializing...');
                        addTerminalLine('info', 'The VBS script is running in background.');
                        addTerminalLine('info', 'Please wait 15-20 seconds and check again.');
                    }
                }, 10000);

            } catch (err) {
                addTerminalLine('error', 'Auto-start trigger failed: ' + err.message);
                showManualStartOptions();
            }
        }

        function showManualStartOptions() {
            addTerminalLine('');
            addTerminalLine('=== MANUAL START OPTIONS ===');
            addTerminalLine('Option 1: Double-click START_BACKEND.bat in the bhuban app folder');
            addTerminalLine('Option 2: Run "npm start" in the backend directory');
            addTerminalLine('Option 3: Use the Launcher.hta application');
            addTerminalLine('');

            // Add download button for batch file
            const terminal = document.getElementById('terminal-output');
            const btnDiv = document.createElement('div');
            btnDiv.className = 'terminal-line';
            btnDiv.style.marginTop = '10px';
            btnDiv.innerHTML = `
                <button onclick="downloadAndRunBatch()" style="padding: 8px 16px; background: var(--success); border: none; border-radius: 6px; color: white; cursor: pointer; font-weight: 600;">
                    <i class="fas fa-download"></i> Download START_BACKEND.bat
                </button>
            `;
            terminal.appendChild(btnDiv);
        }

        function downloadAndRunBatch() {
            // Download the batch file
            const link = document.createElement('a');
            link.href = '../START_BACKEND.bat';
            link.download = 'START_BACKEND.bat';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);

            addTerminalLine('');
            addTerminalLine('‚úì Downloaded START_BACKEND.bat to your Downloads folder');
            addTerminalLine('Please double-click it to start the backend!');
        }

        function addTerminalLine(type, text, isCommand = false) {
            const output = document.getElementById('terminal-output');
            const line = document.createElement('div');
            line.className = `terminal-line ${type}`;

            if (isCommand) {
                line.innerHTML = `
                    <span class="terminal-prompt">‚ûú</span>
                    <span class="terminal-path">~/bhuban-backend</span>
                    <span class="terminal-text">${text}</span>
                `;
            } else {
                line.innerHTML = `<span class="terminal-text">${text}</span>`;
            }

            output.appendChild(line);
            output.scrollTop = output.scrollHeight;
        }

        function clearTerminal() {
            const output = document.getElementById('terminal-output');
            output.innerHTML = `
                <div class="terminal-line">
                    <span class="terminal-prompt">‚ûú</span>
                    <span class="terminal-path">~/bhuban-backend</span>
                </div>
            `;
        }

        async function runNpmInstall() {
            addTerminalLine('info', 'Installing dependencies...', true);
            addTerminalLine('info', 'This may take a few minutes...');

            // Simulate npm install output
            const steps = [
                'npm WARN deprecated...',
                'added 247 packages in 15s',
                'found 0 vulnerabilities',
                'Dependencies installed successfully!'
            ];

            for (let i = 0; i < steps.length; i++) {
                await simulateDelay(800);
                addTerminalLine(i === steps.length - 1 ? 'success' : 'info', steps[i]);
            }

            addSystemLog('success', 'npm install completed');
        }

        // Launcher Server API
        const LAUNCHER_URL = 'http://localhost:9999';
        let launcherAvailable = false;

        async function checkLauncher() {
            try {
                const response = await fetch(`${LAUNCHER_URL}/status`, {
                    method: 'GET',
                    signal: AbortSignal.timeout(1000)
                });
                launcherAvailable = response.ok;
                return launcherAvailable;
            } catch (e) {
                launcherAvailable = false;
                return false;
            }
        }

        async function runNpmStart() {
            addTerminalLine('info', 'npm start', true);

            // Check if launcher server is available
            const hasLauncher = await checkLauncher();

            if (hasLauncher) {
                // Use launcher server to start backend
                addTerminalLine('info', 'Connecting to Launcher Server...');

                try {
                    const response = await fetch(`${LAUNCHER_URL}/start`, {
                        method: 'POST',
                        signal: AbortSignal.timeout(35000)
                    });

                    const result = await response.json();

                    if (result.success) {
                        if (result.alreadyRunning) {
                            addTerminalLine('success', 'Backend is already running!');
                        } else {
                            addTerminalLine('success', 'Backend started successfully!');
                            addTerminalLine('info', 'Waiting for server to be ready...');

                            // Poll for status
                            let attempts = 0;
                            const checkInterval = setInterval(async () => {
                                attempts++;
                                const status = await checkBackendStatus();

                                if (status.running) {
                                    clearInterval(checkInterval);
                                    addTerminalLine('success', '‚úì Server is ready at http://localhost:5000');
                                    updateBackendUI(true);
                                } else if (attempts > 30) {
                                    clearInterval(checkInterval);
                                    addTerminalLine('warning', 'Server is starting, please wait...');
                                }
                            }, 1000);
                        }
                    } else {
                        addTerminalLine('error', `Failed to start: ${result.error}`);
                    }
                } catch (err) {
                    addTerminalLine('error', `Connection failed: ${err.message}`);
                }
            } else if (isElectron) {
                // Fallback to Electron IPC
                addTerminalLine('info', 'Using Electron mode...');
                const { ipcRenderer } = require('electron');
                const result = await ipcRenderer.invoke('start-backend');

                if (!result.success) {
                    addTerminalLine('error', result.error);
                }
            } else {
                // No launcher available - show instructions
                addTerminalLine('error', '‚ùå One-Click Launcher not running!');
                addTerminalLine('info', '');
                addTerminalLine('info', 'To enable ONE-CLICK mode:');
                addTerminalLine('info', '1. Close this browser tab');
                addTerminalLine('info', '2. Double-click: ENABLE_ONE_CLICK.bat');
                addTerminalLine('info', '3. Wait for "Launcher Server Running"');
                addTerminalLine('info', '4. Reopen this dashboard');
                addTerminalLine('info', '5. Click "Start Server" - it will work!');
                addTerminalLine('info', '');
                addTerminalLine('info', 'Or manually run: cd backend && npm start');
            }
        }

        async function stopBackend() {
            if (isElectron) {
                const { ipcRenderer } = require('electron');
                const result = await ipcRenderer.invoke('stop-backend');

                if (result.success) {
                    addTerminalLine('warning', 'Backend stopped');
                } else {
                    addTerminalLine('error', result.error);
                }
            } else {
                addTerminalLine('error', 'Cannot stop backend in browser mode');
            }
        }

        // Terminal input handling
        document.addEventListener('DOMContentLoaded', () => {
            const terminalInput = document.getElementById('terminal-input');
            if (terminalInput) {
                terminalInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        const command = terminalInput.value.trim();
                        if (command) {
                            addTerminalLine('info', command, true);
                            handleTerminalCommand(command);
                            terminalInput.value = '';
                        }
                    }
                });
            }
        });

        function handleTerminalCommand(command) {
            const cmd = command.toLowerCase();

            if (cmd === 'npm start' || cmd === 'start') {
                runNpmStart();
            } else if (cmd === 'npm install' || cmd === 'install') {
                runNpmInstall();
            } else if (cmd === 'clear' || cmd === 'cls') {
                clearTerminal();
            } else if (cmd === 'help') {
                addTerminalLine('info', 'Available commands:');
                addTerminalLine('info', '  npm start, start    - Start the backend server');
                addTerminalLine('info', '  npm install, install - Install dependencies');
                addTerminalLine('info', '  clear, cls          - Clear terminal');
                addTerminalLine('info', '  help                - Show this help');
            } else if (cmd === 'stop' || cmd === 'exit') {
                addTerminalLine('warning', 'To stop the server, use the buttons or close this tab');
            } else {
                addTerminalLine('error', `Command not found: ${command}`);
                addTerminalLine('info', 'Type "help" for available commands');
            }
        }

        // Launch Backend in New Terminal (fallback)
        async function launchBackend() {
            const btn = document.getElementById('btn-start-backend');
            const originalContent = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i><span>Launching...</span>';
            btn.disabled = true;

            addSystemLog('info', 'Attempting to launch backend server...');

            try {
                // Try to launch using different methods
                const backendPath = 'c:\\Users\\h\\Desktop\\bhuban app\\Bhuban video stream app\\backend';

                // Method 1: Try using electron's shell (if running in electron)
                if (typeof require !== 'undefined') {
                    const { spawn } = require('child_process');
                    spawn('cmd.exe', ['/c', 'start', 'cmd.exe', '/k', `cd "${backendPath}" && npm start`], {
                        detached: true,
                        windowsHide: false
                    });
                } else {
                    // Method 2: Use a hidden iframe to trigger a protocol handler
                    // Method 3: Show instructions with copy-paste commands
                    showLaunchInstructions();
                }

                // Check if backend started after a delay
                setTimeout(async () => {
                    await checkBackendStatus();
                    btn.innerHTML = originalContent;
                    btn.disabled = false;
                }, 3000);

            } catch (error) {
                console.error('Launch failed:', error);
                showLaunchInstructions();
                btn.innerHTML = originalContent;
                btn.disabled = false;
            }
        }

        function showLaunchInstructions() {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.cssText = 'position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 10000; display: flex; align-items: center; justify-content: center; padding: 20px;';

            const backendPath = 'c:\\Users\\h\\Desktop\\bhuban app\\Bhuban video stream app\\backend';

            modal.innerHTML = `
                <div style="background: var(--bg-secondary); border: 1px solid rgba(255,255,255,0.1); border-radius: 24px; padding: 32px; max-width: 700px; width: 100%; animation: slideUp 0.3s ease;">
                    <div style="text-align: center; margin-bottom: 24px;">
                        <div style="width: 80px; height: 80px; background: linear-gradient(135deg, var(--success), var(--accent-cyan)); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 16px;">
                            <i class="fas fa-terminal" style="font-size: 32px; color: white;"></i>
                        </div>
                        <h2 style="font-size: 24px; margin-bottom: 8px;">Start Backend Server</h2>
                        <p style="color: var(--text-muted);">Automatic launch not available. Please run these commands:</p>
                    </div>
                    
                    <div style="background: #0d1117; border-radius: 12px; padding: 20px; margin-bottom: 20px; font-family: 'Courier New', monospace; position: relative;">
                        <button onclick="copyCommand('cd')" style="position: absolute; top: 10px; right: 10px; padding: 6px 12px; background: rgba(255,255,255,0.1); border: none; border-radius: 6px; color: var(--text-muted); cursor: pointer; font-size: 12px;">
                            <i class="fas fa-copy"></i> Copy
                        </button>
                        <div style="color: var(--text-muted); font-size: 12px; margin-bottom: 8px;"># Step 1: Navigate to backend folder</div>
                        <div id="cmd-cd" style="color: var(--accent-cyan); margin-bottom: 16px;">cd "${backendPath}"</div>
                        
                        <div style="color: var(--text-muted); font-size: 12px; margin-bottom: 8px;"># Step 2: Start the server</div>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <span style="color: var(--success);">npm start</span>
                            <button onclick="copyCommand('start')" style="padding: 6px 12px; background: rgba(255,255,255,0.1); border: none; border-radius: 6px; color: var(--text-muted); cursor: pointer; font-size: 12px;">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                        </div>
                    </div>
                    
                    <div style="background: rgba(0, 230, 118, 0.1); border: 1px solid var(--success); border-radius: 10px; padding: 16px; margin-bottom: 20px;">
                        <i class="fas fa-lightbulb" style="color: var(--success); margin-right: 8px;"></i>
                        <span style="font-size: 14px;"><strong>Quick Start:</strong> Copy the commands above, open PowerShell, paste and press Enter</span>
                    </div>
                    
                    <div style="display: flex; gap: 12px;">
                        <button onclick="openTerminal()" style="flex: 1; padding: 16px; background: var(--accent-gradient); border: none; border-radius: 12px; color: white; font-weight: 700; cursor: pointer; font-size: 16px;">
                            <i class="fas fa-external-link-alt"></i> Open PowerShell
                        </button>
                        <button onclick="this.closest('.modal').remove()" style="padding: 16px 24px; background: var(--bg-card); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; color: var(--text-primary); font-weight: 600; cursor: pointer;">
                            Close
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
            modal.addEventListener('click', (e) => { if (e.target === modal) modal.remove(); });

            addSystemLog('info', 'Showing backend launch instructions');
        }

        function copyCommand(type) {
            const backendPath = 'c:\\Users\\h\\Desktop\\bhuban app\\Bhuban video stream app\\backend';
            const text = type === 'cd' ? `cd "${backendPath}"` : 'npm start';

            navigator.clipboard.writeText(text).then(() => {
                showNotification('Command copied to clipboard!', 'success');
            }).catch(() => {
                // Fallback for older browsers
                const textarea = document.createElement('textarea');
                textarea.value = text;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                showNotification('Command copied to clipboard!', 'success');
            });
        }

        function openTerminal() {
            // Try to open PowerShell at the backend directory
            const backendPath = 'c:\\Users\\h\\Desktop\\bhuban app\\Bhuban video stream app\\backend';

            // Create a temporary batch file to open PowerShell in the right directory
            const batchContent = `@echo off
cd /d "${backendPath}"
powershell.exe -NoExit -Command "Write-Host 'Bhuban Backend Server' -ForegroundColor Cyan; Write-Host 'Run: npm start' -ForegroundColor Green; Write-Host ''"
`;

            const blob = new Blob([batchContent], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'start-backend.bat';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            showNotification('Downloaded start-backend.bat - Run it to open PowerShell!', 'success');
            addSystemLog('success', 'Downloaded batch file to start backend');
        }

        // Backend Control Functions
        async function controlBackend(action) {
            const indicator = document.getElementById('backend-indicator');
            const statusText = document.getElementById('backend-status-text');
            const systemStatus = document.getElementById('system-status');

            if (action === 'start') {
                indicator.className = 'status-indicator starting';
                statusText.textContent = 'Checking Backend...';
                addSystemLog('info', 'Checking backend server status...');

                // Try to connect to actual backend
                try {
                    const response = await fetch(`${API_BASE_URL}/health`, {
                        method: 'GET',
                        signal: AbortSignal.timeout(3000)
                    }).catch(() => null);

                    if (response && response.ok) {
                        // Backend is already running
                        SystemState.backend.running = true;
                        indicator.className = 'status-indicator online';
                        statusText.textContent = 'Backend Online (Port: 5000)';
                        systemStatus.textContent = 'Online';
                        systemStatus.className = 'card-badge success';
                        addSystemLog('success', 'Backend server is already running on port 5000');
                        showNotification('Backend is already running!', 'success');
                    } else {
                        // Backend not running - show instructions
                        showBackendInstructions();
                        indicator.className = 'status-indicator offline';
                        statusText.textContent = 'Backend Not Running';
                    }
                } catch (e) {
                    // Backend not running - show instructions
                    showBackendInstructions();
                    indicator.className = 'status-indicator offline';
                    statusText.textContent = 'Backend Not Running';
                }

            } else if (action === 'stop') {
                addSystemLog('warning', 'To stop the backend, close the terminal running "npm start" or press Ctrl+C');
                showNotification('Close the backend terminal or press Ctrl+C to stop', 'warning');

            } else if (action === 'restart') {
                addSystemLog('info', 'To restart: Stop backend (Ctrl+C), then run "npm start" again');
                showNotification('Stop backend with Ctrl+C, then click Start', 'info');
            } else if (action === 'check') {
                await checkBackendStatus();
            }

            saveSystemState();
            broadcastToApps('backend_status', { running: SystemState.backend.running, port: SystemState.backend.port });
        }

        function showBackendInstructions() {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.cssText = 'position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 10000; display: flex; align-items: center; justify-content: center; padding: 20px;';
            modal.innerHTML = `
                <div style="background: var(--bg-secondary); border: 1px solid rgba(255,255,255,0.1); border-radius: 24px; padding: 32px; max-width: 600px; width: 100%; animation: slideUp 0.3s ease;">
                    <div style="text-align: center; margin-bottom: 24px;">
                        <div style="width: 80px; height: 80px; background: linear-gradient(135deg, var(--accent-cyan), var(--accent-purple)); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 16px;">
                            <i class="fas fa-terminal" style="font-size: 32px; color: white;"></i>
                        </div>
                        <h2 style="font-size: 24px; margin-bottom: 8px;">Start Backend Server</h2>
                        <p style="color: var(--text-muted);">The backend needs to be started manually via terminal</p>
                    </div>
                    
                    <div style="background: #0d1117; border-radius: 12px; padding: 20px; margin-bottom: 20px; font-family: 'Courier New', monospace;">
                        <div style="color: var(--text-muted); font-size: 12px; margin-bottom: 8px;"># Navigate to backend folder</div>
                        <div style="color: var(--accent-cyan); margin-bottom: 12px;">cd "Bhuban video stream app/backend"</div>
                        
                        <div style="color: var(--text-muted); font-size: 12px; margin-bottom: 8px;"># Install dependencies (first time only)</div>
                        <div style="color: var(--accent-cyan); margin-bottom: 12px;">npm install</div>
                        
                        <div style="color: var(--text-muted); font-size: 12px; margin-bottom: 8px;"># Start the server</div>
                        <div style="color: var(--success);">npm start</div>
                    </div>
                    
                    <div style="background: rgba(255, 171, 64, 0.1); border: 1px solid var(--accent-orange); border-radius: 10px; padding: 16px; margin-bottom: 20px;">
                        <i class="fas fa-info-circle" style="color: var(--accent-orange); margin-right: 8px;"></i>
                        <span style="font-size: 14px;">The server will start on <strong>http://localhost:5000</strong></span>
                    </div>
                    
                    <button onclick="this.closest('.modal').remove()" style="width: 100%; padding: 16px; background: var(--accent-gradient); border: none; border-radius: 12px; color: white; font-weight: 700; cursor: pointer; font-size: 16px;">
                        <i class="fas fa-check"></i> Got it
                    </button>
                </div>
            `;
            document.body.appendChild(modal);
            modal.addEventListener('click', (e) => { if (e.target === modal) modal.remove(); });
        }

        // App Toggle Functions
        function toggleApp(appName) {
            const toggle = document.getElementById(`toggle-${appName}`);
            const card = document.getElementById(`control-${appName}`);
            const isEnabled = toggle.checked;

            SystemState.apps[appName].enabled = isEnabled;
            SystemState.apps[appName].status = isEnabled ? 'healthy' : 'disabled';

            if (isEnabled) {
                card.classList.remove('disabled');
                addSystemLog('success', `${appName.charAt(0).toUpperCase() + appName.slice(1)} App enabled`);
                showNotification(`${appName.charAt(0).toUpperCase() + appName.slice(1)} App enabled`, 'success');
            } else {
                card.classList.add('disabled');
                addSystemLog('warning', `${appName.charAt(0).toUpperCase() + appName.slice(1)} App disabled`);
                showNotification(`${appName.charAt(0).toUpperCase() + appName.slice(1)} App disabled`, 'warning');
            }

            // Update Data Plumbing visualization
            updatePlumbingNodeStatus(appName, isEnabled ? 'healthy' : 'error');

            // Broadcast to the specific app
            broadcastToApps(`${appName}_status`, { enabled: isEnabled });

            saveSystemState();
        }

        function updatePlumbingNodeStatus(appName, status) {
            const nodeMap = {
                viewer: 'node-viewer',
                creator: 'node-creator',
                auth: 'node-api',
                db: 'node-db'
            };

            const nodeId = nodeMap[appName];
            const node = document.getElementById(nodeId);
            if (node) {
                const color = status === 'healthy' ? 'var(--success)' :
                    status === 'error' ? 'var(--error)' : 'var(--accent-orange)';
                node.style.borderColor = color;
                node.style.boxShadow = status === 'healthy' ? `0 0 20px ${color}` : 'none';
            }
        }

        // Quick Action Functions
        function clearCache() {
            const caches = ['bhuban_viewer_health', 'bhuban_creator_health', 'bhuban_dev_health'];
            caches.forEach(key => localStorage.removeItem(key));

            addSystemLog('info', 'System cache cleared');
            showNotification('Cache cleared successfully', 'success');
        }

        function resetHealthData() {
            const healthData = {
                viewerApp: { status: 'healthy', lastPing: Date.now() },
                creatorApp: { status: 'healthy', lastPing: Date.now() },
                devApp: { status: 'healthy', lastPing: Date.now() }
            };
            localStorage.setItem('bhuban_health_data', JSON.stringify(healthData));

            addSystemLog('info', 'Health monitoring data reset');
            showNotification('Health data reset', 'success');
        }

        function syncAllApps() {
            addSystemLog('info', 'Synchronizing all applications...');

            // Simulate sync process
            setTimeout(() => {
                broadcastToApps('sync', { timestamp: Date.now() });
                addSystemLog('success', 'All applications synchronized');
                showNotification('All apps synchronized', 'success');
            }, 1000);
        }

        // System Logs
        let systemLogs = JSON.parse(localStorage.getItem('bhuban_system_logs')) || [];

        function addSystemLog(level, message) {
            const log = {
                timestamp: new Date().toISOString(),
                level: level,
                message: message
            };
            systemLogs.unshift(log);
            if (systemLogs.length > 100) systemLogs.pop();
            localStorage.setItem('bhuban_system_logs', JSON.stringify(systemLogs));
        }

        function openSystemLogs() {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.cssText = 'position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 10000; display: flex; align-items: center; justify-content: center; padding: 20px;';

            const logsHtml = systemLogs.slice(0, 50).map(log => {
                const time = new Date(log.timestamp).toLocaleTimeString();
                return `<div class="log-entry"><span class="log-time">[${time}]</span> <span class="log-${log.level}">[${log.level.toUpperCase()}]</span> ${log.message}</div>`;
            }).join('') || '<div class="log-entry" style="color: var(--text-muted);">No logs available</div>';

            modal.innerHTML = `
                <div style="background: var(--bg-secondary); border: 1px solid rgba(255,255,255,0.1); border-radius: 24px; padding: 32px; max-width: 800px; width: 100%; max-height: 80vh; display: flex; flex-direction: column;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2 style="font-size: 20px;"><i class="fas fa-file-alt" style="color: var(--accent-cyan);"></i> System Logs</h2>
                        <button onclick="this.closest('.modal').remove()" style="background: none; border: none; color: var(--text-muted); cursor: pointer; font-size: 20px;"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="logs-container" style="flex: 1; overflow-y: auto;">${logsHtml}</div>
                    <div style="display: flex; gap: 12px; margin-top: 16px;">
                        <button onclick="clearSystemLogs()" style="padding: 12px 24px; background: var(--error); border: none; border-radius: 10px; color: white; font-weight: 600; cursor: pointer;">
                            <i class="fas fa-trash"></i> Clear Logs
                        </button>
                        <button onclick="exportLogs()" style="padding: 12px 24px; background: var(--accent-cyan); border: none; border-radius: 10px; color: white; font-weight: 600; cursor: pointer;">
                            <i class="fas fa-download"></i> Export
                        </button>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
            modal.addEventListener('click', (e) => { if (e.target === modal) modal.remove(); });
        }

        function clearSystemLogs() {
            systemLogs = [];
            localStorage.removeItem('bhuban_system_logs');
            document.querySelector('.logs-container').innerHTML = '<div class="log-entry" style="color: var(--text-muted);">Logs cleared</div>';
            showNotification('System logs cleared', 'success');
        }

        function exportLogs() {
            const logText = systemLogs.map(log => `[${log.timestamp}] [${log.level.toUpperCase()}] ${log.message}`).join('\n');
            const blob = new Blob([logText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `bhuban-logs-${new Date().toISOString().split('T')[0]}.txt`;
            a.click();
            URL.revokeObjectURL(url);
            showNotification('Logs exported', 'success');
        }

        // Environment Variables
        function editEnvVar(key) {
            const currentValue = SystemState.envVars[key];
            const newValue = prompt(`Edit ${key}:`, currentValue === '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢' ? '' : currentValue);

            if (newValue !== null) {
                SystemState.envVars[key] = newValue || currentValue;
                saveSystemState();
                renderEnvVars();
                addSystemLog('info', `Environment variable ${key} updated`);
                showNotification(`Updated ${key}`, 'success');
            }
        }

        function addEnvVar() {
            const key = prompt('Enter variable name:');
            if (!key) return;

            const value = prompt('Enter variable value:');
            if (value !== null) {
                SystemState.envVars[key] = value;
                saveSystemState();
                renderEnvVars();
                addSystemLog('info', `New environment variable ${key} added`);
                showNotification(`Added ${key}`, 'success');
            }
        }

        function renderEnvVars() {
            const container = document.getElementById('env-vars');
            container.innerHTML = Object.entries(SystemState.envVars).map(([key, value]) => `
                <div class="env-var-row">
                    <span class="env-key">${key}</span>
                    <span class="env-value">${value}</span>
                    <button class="env-edit-btn" onclick="editEnvVar('${key}')"><i class="fas fa-edit"></i></button>
                </div>
            `).join('');
        }

        // Broadcast to Apps
        function broadcastToApps(event, data) {
            const message = { source: 'developer_app', event, data, timestamp: Date.now() };
            localStorage.setItem('bhuban_broadcast', JSON.stringify(message));

            // Trigger storage event for other tabs
            window.dispatchEvent(new StorageEvent('storage', {
                key: 'bhuban_broadcast',
                newValue: JSON.stringify(message)
            }));
        }

        // Utility Functions
        function simulateDelay(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 16px 24px;
                background: ${type === 'success' ? 'var(--success)' : type === 'error' ? 'var(--error)' : type === 'warning' ? 'var(--accent-orange)' : 'var(--accent-cyan)'};
                color: white;
                border-radius: 12px;
                font-weight: 600;
                z-index: 10001;
                animation: slideInRight 0.4s ease;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            `;
            notification.innerHTML = `<i class="fas fa-${type === 'success' ? 'check' : type === 'error' ? 'exclamation' : type === 'warning' ? 'exclamation-triangle' : 'info'}-circle"></i> ${message}`;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.4s ease';
                setTimeout(() => notification.remove(), 400);
            }, 3000);
        }

        function saveSystemState() {
            localStorage.setItem('bhuban_system_state', JSON.stringify(SystemState));
        }

        // Format uptime in seconds to readable format
        function formatUptime(seconds) {
            if (!seconds || seconds < 0) return 'No Data';

            const days = Math.floor(seconds / 86400);
            const hours = Math.floor((seconds % 86400) / 3600);
            const minutes = Math.floor((seconds % 3600) / 60);

            if (days > 0) {
                return `${days}d ${hours}h`;
            } else if (hours > 0) {
                return `${hours}h ${minutes}m`;
            } else if (minutes > 0) {
                return `${minutes}m`;
            } else {
                return `${seconds}s`;
            }
        }

        function loadSystemState() {
            const saved = localStorage.getItem('bhuban_system_state');
            if (saved) {
                const state = JSON.parse(saved);
                Object.assign(SystemState, state);

                // Restore UI state
                Object.entries(SystemState.apps).forEach(([app, data]) => {
                    const toggle = document.getElementById(`toggle-${app}`);
                    const card = document.getElementById(`control-${app}`);
                    if (toggle) toggle.checked = data.enabled;
                    if (card && !data.enabled) card.classList.add('disabled');
                });

                // Restore backend status
                if (SystemState.backend.running) {
                    document.getElementById('backend-indicator').className = 'status-indicator online';
                    document.getElementById('backend-status-text').textContent = `Backend Online (PID: ${SystemState.backend.pid || 'N/A'})`;
                }

                renderEnvVars();
            }
        }

        // Global Logout & Profile Sync
        function handleGlobalLogout() {
            localStorage.clear();
            window.location.href = '/Bhuban%20video%20stream%20app/login.html?logout=true';
        }

        function toggleUserMenu() {
            const dropdown = document.getElementById('userDropdown');
            dropdown.style.display = dropdown.style.display === 'none' ? 'block' : 'none';
        }

        async function loadDeveloperProfile() {
            const userAvatar = document.getElementById('userAvatar');
            const userName = document.getElementById('userName');
            const userEmail = document.getElementById('userEmail');
            const userStatus = document.getElementById('userStatus');

            console.log('üîç Loading developer profile with Advanced AuthManager...');

            // Use Advanced AuthManager
            let authState;
            if (!window.AuthManager) {
                console.error('‚ùå AuthManager not found! Autonomous mode fallback activated.');
                authState = { isAuthenticated: false, isGuest: true };
            } else {
                authState = window.AuthManager.getAuthState();
                console.log('Auth state:', authState);
            }

            if (authState.isAuthenticated && !authState.isGuest) {
                // Display user name
                if (userName) {
                    userName.textContent = authState.displayName || 'Developer';
                }

                // Display email if available
                if (authState.email && userEmail) {
                    userEmail.textContent = authState.email;
                    userEmail.style.display = 'block';
                }

                // Update status with user info
                if (userStatus) {
                    userStatus.textContent = `Developer Account ‚Ä¢ ${authState.displayName}`;
                }

                // Enhanced avatar display with Google profile photo
                if (authState.profilePhoto && userAvatar) {
                    userAvatar.parentElement.innerHTML = `<img src="${authState.profilePhoto}" style="width:100%;height:100%;object-fit:cover;border-radius:10px;" alt="${authState.displayName}">`;
                }

                // Show logout option
                const logoutOption = document.querySelector('[onclick="handleGlobalLogout()"]');
                if (logoutOption) {
                    logoutOption.style.display = 'flex';
                }
            } else {
                // Guest/autonomous mode setup
                console.log('‚ÑπÔ∏è Developer Dashboard running in autonomous mode.');
                if (userName) userName.textContent = 'Autonomous Mode';
                if (userEmail) userEmail.style.display = 'none';
                if (userStatus) userStatus.textContent = 'Autonomous Mode ‚Ä¢ Sign in to unlock features';
            }

            // Listen for auth changes
            if (window.AuthManager) {
                window.AuthManager.addEventListener((event, data) => {
                    console.log('üîê Auth event:', event, data);
                    if (event === 'login' || event === 'storage-change') {
                        loadDeveloperProfile(); // Reload profile on auth changes
                    }
                });
            }
        }

        // Initialize System Control Panel
        document.addEventListener('DOMContentLoaded', () => {
            loadSystemState();
            loadDeveloperProfile(); // SSO Automatic Login

            // Add initial log
            addSystemLog('info', 'Developer Dashboard initialized');
            addTerminalLine('info', 'Developer Dashboard ready');

            // Check if launcher is available
            checkLauncher().then(hasLauncher => {
                if (hasLauncher) {
                    addTerminalLine('success', '‚úì One-Click Launcher detected!');
                    addTerminalLine('info', 'Click "Start Server" to launch the backend with ONE CLICK!');
                } else {
                    addTerminalLine('warning', '‚ö† One-Click mode not available in browser');
                    addTerminalLine('info', '‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ');
                    addTerminalLine('info', 'TO START BACKEND:');
                    addTerminalLine('info', '1. Close this browser tab');
                    addTerminalLine('info', '2. Open File Explorer');
                    addTerminalLine('info', '3. Go to: Desktop > bhuban app');
                    addTerminalLine('info', '4. Double-click: QUICK_START.bat');
                    addTerminalLine('info', '‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ');
                }
            });

            // Check backend status periodically
            checkBackendStatus();
            setInterval(checkBackendStatus, 5000);
        });

        async function checkBackendStatus() {
            try {
                const response = await fetch(`${API_BASE_URL}/health`, {
                    method: 'GET',
                    signal: AbortSignal.timeout(3000)
                }).catch(() => null);

                const indicator = document.getElementById('backend-indicator');
                const statusText = document.getElementById('backend-status-text');
                const systemStatus = document.getElementById('system-status');

                if (response && response.ok) {
                    if (!SystemState.backend.running) {
                        // Backend just came online
                        SystemState.backend.running = true;
                        addSystemLog('success', 'Backend server detected on port 5000');
                        showNotification('Backend server is now online!', 'success');
                        broadcastToApps('backend_status', { running: true, port: 5000 });
                    }
                    if (indicator) indicator.className = 'status-indicator online';
                    if (statusText) statusText.textContent = 'Backend Online (Port: 5000)';
                    if (systemStatus) {
                        systemStatus.textContent = 'Online';
                        systemStatus.className = 'card-badge success';
                    }
                } else {
                    if (SystemState.backend.running) {
                        // Backend went offline
                        SystemState.backend.running = false;
                        addSystemLog('warning', 'Backend server is offline');
                        broadcastToApps('backend_status', { running: false });
                    }
                    if (indicator) indicator.className = 'status-indicator offline';
                    if (statusText) statusText.textContent = 'Backend Not Running';
                    if (systemStatus) {
                        systemStatus.textContent = 'Offline';
                        systemStatus.className = 'card-badge error';
                    }
                }
                saveSystemState();
            } catch (e) {
                // Backend is not running
                const indicator = document.getElementById('backend-indicator');
                const statusText = document.getElementById('backend-status-text');
                if (indicator) indicator.className = 'status-indicator offline';
                if (statusText) statusText.textContent = 'Backend Not Running';
            }
        }

        // Listen for broadcasts from other apps
        window.addEventListener('storage', (e) => {
            if (e.key === 'bhuban_broadcast') {
                const message = JSON.parse(e.newValue);
                if (message.source !== 'developer_app') {
                    addSystemLog('info', `Received broadcast from ${message.source}: ${message.event}`);
                }
            }
        });

        // ==========================================
        // GLOBAL ERROR HANDLER - ADVANCED SYSTEM
        // ==========================================
        window.addEventListener('error', function (event) {
            console.error('üö® Global Error Caught:', {
                message: event.message,
                filename: event.filename,
                lineno: event.lineno,
                colno: event.colno,
                error: event.error
            });

            // Prevent default error handling
            event.preventDefault();

            // Log to system if available
            try {
                if (typeof addSystemLog === 'function') {
                    addSystemLog('error', `Error: ${event.message}`);
                }
            } catch (e) {
                console.warn('Could not log to system:', e);
            }

            return true;
        });

        window.addEventListener('unhandledrejection', function (event) {
            console.error('üö® Unhandled Promise Rejection:', {
                reason: event.reason,
                promise: event.promise
            });

            // Prevent default handling
            event.preventDefault();

            // Log to system if available
            try {
                if (typeof addSystemLog === 'function') {
                    addSystemLog('error', `Promise rejection: ${event.reason}`);
                }
            } catch (e) {
                console.warn('Could not log to system:', e);
            }
        });

        // Console override for better error tracking
        const originalConsoleError = console.error;
        console.error = function (...args) {
            originalConsoleError.apply(console, args);

            // Track errors in dashboard state if available
            try {
                if (typeof DashboardState !== 'undefined' && DashboardState.errors) {
                    DashboardState.errors.push({
                        timestamp: Date.now(),
                        message: args.join(' ')
                    });
                }
            } catch (e) {
                // Silently fail
            }
        };

        console.log('‚úÖ Global error handlers installed');
        console.log('üéâ Bhuban Developer Dashboard fully loaded and operational');
    </script>
    <script src="watchtower-system.js"></script>

    <!-- ==========================================
         SHREE AI CHAT MODAL
         ========================================== -->
    <div id="aiChatModal" class="ai-chat-modal" style="display: none;">
        <!-- Floating Particles Background -->
        <div class="ai-particles" id="aiParticles"></div>
        
        <!-- Circuit Background -->
        <svg class="ai-circuit-bg" viewBox="0 0 1200 800" fill="none" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice">
            <path d="M 0 200 L 100 200 L 100 100 L 200 100" stroke="rgba(0, 212, 255, 0.1)" stroke-width="1" />
            <path d="M 50 0 L 50 150 L 150 150" stroke="rgba(0, 212, 255, 0.1)" stroke-width="1" />
            <rect x="95" y="95" width="10" height="10" stroke="rgba(0, 212, 255, 0.1)" stroke-width="1" fill="none" />
            <path d="M 900 100 L 1000 100 L 1000 200 L 1100 200" stroke="rgba(0, 212, 255, 0.1)" stroke-width="1" />
            <circle cx="300" cy="300" r="3" stroke="rgba(0, 212, 255, 0.1)" stroke-width="0.8" fill="none" />
            <circle cx="900" cy="300" r="3" stroke="rgba(0, 212, 255, 0.1)" stroke-width="0.8" fill="none" />
        </svg>

        <div class="ai-chat-container">
            <!-- Header with Triangle Logo -->
            <div class="ai-chat-header">
                <div class="ai-chat-logo">
                    <div class="ai-logo-triangle">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                            <path d="M12 2 L22 20 L2 20 Z" />
                        </svg>
                    </div>
                    <span class="ai-logo-text">Shree</span>
                </div>
                <button class="ai-close-btn" onclick="toggleAIChat()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <!-- Chat Area -->
            <div class="ai-chat-messages" id="aiChatMessages">
                <!-- Welcome Message with Crystal Gem -->
                <div class="ai-welcome" id="aiWelcome">
                    <!-- Animated Crystal Gem -->
                    <div class="ai-crystal-container">
                        <div class="ai-crystal-ring ai-ring-1"></div>
                        <div class="ai-crystal-ring ai-ring-2"></div>
                        <div class="ai-crystal-ring ai-ring-3"></div>
                        
                        <div class="ai-crystal-core">
                            <div class="ai-crystal-facet"></div>
                        </div>
                        
                        <div class="ai-crystal-rays">
                            <div class="ai-crystal-ray" style="transform: rotate(0deg)"></div>
                            <div class="ai-crystal-ray" style="transform: rotate(45deg)"></div>
                            <div class="ai-crystal-ray" style="transform: rotate(90deg)"></div>
                            <div class="ai-crystal-ray" style="transform: rotate(135deg)"></div>
                            <div class="ai-crystal-ray" style="transform: rotate(180deg)"></div>
                            <div class="ai-crystal-ray" style="transform: rotate(225deg)"></div>
                            <div class="ai-crystal-ray" style="transform: rotate(270deg)"></div>
                            <div class="ai-crystal-ray" style="transform: rotate(315deg)"></div>
                        </div>
                        
                        <div class="ai-crystal-beam"></div>
                    </div>

                    <h3 class="ai-greeting">What can I help you with?</h3>
                    
                    <div class="ai-suggestions">
                        <button class="ai-suggestion-chip" onclick="sendAISuggestion('Help me debug my code')">
                            <i class="fas fa-sparkles"></i> Debug my code
                        </button>
                        <button class="ai-suggestion-chip" onclick="sendAISuggestion('Explain this error')">
                            <i class="fas fa-sparkles"></i> Explain error
                        </button>
                        <button class="ai-suggestion-chip" onclick="sendAISuggestion('Optimize my database')">
                            <i class="fas fa-sparkles"></i> Optimize database
                        </button>
                        <button class="ai-suggestion-chip" onclick="sendAISuggestion('Write documentation')">
                            <i class="fas fa-sparkles"></i> Write docs
                        </button>
                    </div>
                </div>
                
                <!-- Small Crystal when chatting -->
                <div class="ai-small-crystal" id="aiSmallCrystal" style="display: none;">
                    <div class="ai-crystal-core-small">
                        <div class="ai-crystal-facet"></div>
                    </div>
                </div>
            </div>

            <!-- Input Bar (Pink gradient like main app) -->
            <div class="ai-chat-input-bar">
                <button class="ai-model-btn" onclick="toggleAIModelSelector()" title="Select AI Model">
                    <i class="fas fa-microchip"></i>
                </button>
                <input 
                    type="text" 
                    id="aiChatInput" 
                    placeholder="Ask Shree..." 
                    onkeydown="if(event.key==='Enter') sendAIMessage()"
                />
                <div class="ai-input-controls">
                    <span class="ai-control-label" id="aiModelLabel">Auto M</span>
                    <button class="ai-memory-btn" onclick="toggleMemory()" id="aiMemoryBtn" title="Toggle Memory">
                        Memory
                    </button>
                    <button class="ai-mic-btn" onclick="startVoiceInput()" title="Voice Input" id="aiMicBtn">
                        <i class="fas fa-microphone"></i>
                    </button>
                    <button class="ai-send-btn" onclick="sendAIMessage()" title="Send">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>

            <!-- Model Selector Dropdown -->
            <div id="aiModelSelector" class="ai-model-selector" style="display: none;">
                <div class="ai-model-title">Select Core Engine</div>
                <div class="ai-model-option" onclick="selectAIModel('auto')">
                    <i class="fas fa-bolt"></i>
                    <div>
                        <div class="ai-model-name">Auto (Smart Route)</div>
                        <div class="ai-model-desc">Best model for the task</div>
                    </div>
                </div>
                <div class="ai-model-option" onclick="selectAIModel('gemini')">
                    <i class="fas fa-microchip"></i>
                    <div>
                        <div class="ai-model-name">Gemini 1.5 Flash</div>
                        <div class="ai-model-desc">Fast, General Purpose</div>
                    </div>
                </div>
                <div class="ai-model-option" onclick="selectAIModel('groq')">
                    <i class="fas fa-bolt"></i>
                    <div>
                        <div class="ai-model-name">Llama 3 70B (Groq)</div>
                        <div class="ai-model-desc">Blazing Fast Reasoning</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ==========================================
        // SHREE AI CHAT FUNCTIONALITY
        // ==========================================
        let aiChatMessages = [];
        let selectedAIModel = 'auto';
        let isAIProcessing = false;
        let useMemory = false;

        function toggleAIChat() {
            const modal = document.getElementById('aiChatModal');
            const isVisible = modal.style.display !== 'none';
            modal.style.display = isVisible ? 'none' : 'flex';
            
            if (!isVisible) {
                document.getElementById('aiChatInput').focus();
                initAIParticles();
            }
        }

        function initAIParticles() {
            const container = document.getElementById('aiParticles');
            if (!container || container.children.length > 0) return;
            
            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.className = 'ai-particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 10 + 's';
                particle.style.animationDuration = (Math.random() * 10 + 15) + 's';
                container.appendChild(particle);
            }
        }

        function toggleMemory() {
            useMemory = !useMemory;
            const btn = document.getElementById('aiMemoryBtn');
            if (useMemory) {
                btn.textContent = 'üß† Memory ON';
                btn.style.background = 'linear-gradient(135deg, #00d4ff, #0088ff)';
                btn.style.boxShadow = '0 0 20px rgba(0, 212, 255, 0.6)';
            } else {
                btn.textContent = 'Memory';
                btn.style.background = '#00d4ff';
                btn.style.boxShadow = '0 0 12px rgba(0, 212, 255, 0.4)';
            }
        }

        function toggleAIModelSelector() {
            const selector = document.getElementById('aiModelSelector');
            selector.style.display = selector.style.display === 'none' ? 'block' : 'none';
        }

        function selectAIModel(model) {
            selectedAIModel = model;
            const label = document.getElementById('aiModelLabel');
            label.textContent = model === 'auto' ? 'Auto M' : 'Manual';
            label.style.color = model === 'auto' ? 'rgba(255, 0, 180, 0.8)' : '#00d4ff';
            toggleAIModelSelector();
        }

        function sendAISuggestion(text) {
            document.getElementById('aiChatInput').value = text;
            sendAIMessage();
        }

        async function sendAIMessage() {
            const input = document.getElementById('aiChatInput');
            const message = input.value.trim();
            
            if (!message || isAIProcessing) return;
            
            // Clear input
            input.value = '';
            
            // Hide welcome, show small crystal
            const welcome = document.getElementById('aiWelcome');
            const smallCrystal = document.getElementById('aiSmallCrystal');
            if (welcome) {
                welcome.style.display = 'none';
                smallCrystal.style.display = 'flex';
            }
            
            // Add user message
            addAIChatMessage('user', message);
            
            // Show processing
            isAIProcessing = true;
            addAIThinkingIndicator();
            
            try {
                console.log('üîµ Sending request to Shree AI backend...');
                const response = await fetch('http://localhost:8000/ask', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        prompt: message,
                        app_source: "Bhuban Developer App",
                        override_model: selectedAIModel !== 'auto' ? selectedAIModel : undefined,
                        use_memory: useMemory
                    })
                });
                
                console.log('üîµ Response status:', response.status);
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                console.log('üîµ Response data:', data);
                
                // Remove thinking indicator
                removeAIThinkingIndicator();
                
                // Add AI response
                addAIChatMessage('assistant', data.output, {
                    provider: data.provider,
                    latency: `${data.latency_ms}ms`,
                    memory_used: data.memory_used
                });
                
                // Speak response
                speakAIResponse(data.output);
                
            } catch (error) {
                removeAIThinkingIndicator();
                console.error('üî¥ AI Chat Error:', error);
                console.error('üî¥ Error details:', error.message);
                addAIChatMessage('assistant', `Connection error: ${error.message}. Please ensure Shree AI backend is running on port 8000.`);
            } finally {
                isAIProcessing = false;
            }
        }

        function addAIChatMessage(role, text, metadata = null) {
            const messagesContainer = document.getElementById('aiChatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `ai-message ai-message-${role}`;
            
            let metaHTML = '';
            if (metadata) {
                metaHTML = `<div class="ai-message-meta">
                    <span>${metadata.provider}</span>
                    <span>‚Ä¢</span>
                    <span>${metadata.latency}</span>
                </div>`;
            }
            
            messageDiv.innerHTML = `
                <div class="ai-message-content">
                    ${formatAIMessage(text)}
                    ${metaHTML}
                </div>
            `;
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function formatAIMessage(text) {
            // Basic markdown formatting
            text = text.replace(/```([^`]+)```/g, '<pre><code>$1</code></pre>');
            text = text.replace(/`([^`]+)`/g, '<code>$1</code>');
            text = text.replace(/\*\*([^*]+)\*\*/g, '<strong>$1</strong>');
            text = text.replace(/\*([^*]+)\*/g, '<em>$1</em>');
            text = text.replace(/\n/g, '<br>');
            return text;
        }

        function addAIThinkingIndicator() {
            const messagesContainer = document.getElementById('aiChatMessages');
            const thinkingDiv = document.createElement('div');
            thinkingDiv.className = 'ai-thinking';
            thinkingDiv.id = 'aiThinking';
            thinkingDiv.innerHTML = `
                <div class="ai-thinking-dots">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                <span class="ai-thinking-text">Neural Link Active</span>
            `;
            messagesContainer.appendChild(thinkingDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function removeAIThinkingIndicator() {
            const thinking = document.getElementById('aiThinking');
            if (thinking) thinking.remove();
        }

        function speakAIResponse(text) {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
                const cleanText = text.replace(/[#*`~>]/g, '').trim();
                if (!cleanText) return;
                
                const utterance = new SpeechSynthesisUtterance(cleanText);
                utterance.rate = 1.0;
                utterance.pitch = 1.1;
                utterance.volume = 1.0;
                
                window.speechSynthesis.speak(utterance);
            }
        }

        function startVoiceInput() {
            if ('webkitSpeechRecognition' in window) {
                const recognition = new webkitSpeechRecognition();
                recognition.continuous = false;
                recognition.interimResults = false;
                recognition.lang = 'en-US';
                
                recognition.onresult = (event) => {
                    const transcript = event.results[0][0].transcript;
                    document.getElementById('aiChatInput').value = transcript;
                };
                
                recognition.onerror = () => {
                    console.error('Speech recognition error');
                };
                
                recognition.start();
            } else {
                alert('Speech recognition is not supported in your browser. Please use Chrome or Edge.');
            }
        }

        // Close modal when clicking outside
        document.addEventListener('click', (e) => {
            const modal = document.getElementById('aiChatModal');
            const modelSelector = document.getElementById('aiModelSelector');
            
            if (e.target === modal) {
                toggleAIChat();
            }
            
            if (modelSelector.style.display !== 'none' && 
                !e.target.closest('.ai-model-selector') && 
                !e.target.closest('.ai-model-btn')) {
                toggleAIModelSelector();
            }
        });

        // Close modal with ESC key
        document.addEventListener('keydown', (e) => {
            const modal = document.getElementById('aiChatModal');
            if (e.key === 'Escape' && modal.style.display !== 'none') {
                toggleAIChat();
            }
        });
    </script>

    <style>
        /* ==========================================
           SHREE AI CHAT MODAL STYLES - EXACT MAIN APP LOOK
           ========================================== */
        .ai-chat-modal {
            position: fixed;
            inset: 0;
            background: #030306;
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: aiModalFadeIn 0.3s ease;
        }

        /* Floating Particles */
        .ai-particles {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 2;
            overflow: hidden;
        }

        .ai-particle {
            position: absolute;
            width: 3px;
            height: 3px;
            border-radius: 50%;
            background: rgba(0, 212, 255, 0.3);
            animation: aiParticleFloat 20s linear infinite;
        }

        @keyframes aiParticleFloat {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.3;
            }
            90% {
                opacity: 0.3;
            }
            100% {
                transform: translateY(-100vh) rotate(720deg);
                opacity: 0;
            }
        }

        /* Circuit Background */
        .ai-circuit-bg {
            position: fixed;
            inset: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
            opacity: 0.04;
        }

        @keyframes aiModalFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .ai-chat-container {
            width: 90%;
            max-width: 800px;
            height: 80vh;
            max-height: 700px;
            background: linear-gradient(135deg, rgba(10, 10, 15, 0.98), rgba(20, 20, 35, 0.98));
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 24px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5), 0 0 40px rgba(0, 212, 255, 0.2);
            animation: aiContainerSlideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }

        @keyframes aiContainerSlideUp {
            from {
                opacity: 0;
                transform: translateY(40px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .ai-chat-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px 24px;
            background: rgba(0, 0, 0, 0.3);
            border-bottom: 1px solid rgba(0, 212, 255, 0.2);
        }

        .ai-chat-logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .ai-logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #00d4ff, #a855f7);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
            animation: aiLogoPulse 3s ease-in-out infinite;
        }

        @keyframes aiLogoPulse {
            0%, 100% { box-shadow: 0 0 20px rgba(0, 212, 255, 0.5); }
            50% { box-shadow: 0 0 40px rgba(168, 85, 247, 0.7); }
        }

        .ai-logo-text {
            font-size: 22px;
            font-weight: 800;
            background: linear-gradient(135deg, #00d4ff, #a855f7);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .ai-close-btn {
            width: 36px;
            height: 36px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .ai-close-btn:hover {
            background: rgba(239, 68, 68, 0.2);
            border-color: var(--error);
            color: var(--error);
        }

        .ai-chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 24px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .ai-welcome {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            text-align: center;
        }

        .ai-crystal-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.2), rgba(168, 85, 247, 0.2));
            border: 3px solid var(--accent-cyan);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            color: var(--accent-cyan);
            margin-bottom: 20px;
            animation: aiCrystalPulse 3s ease-in-out infinite;
        }

        @keyframes aiCrystalPulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 0 40px rgba(0, 212, 255, 0.4);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 0 60px rgba(0, 212, 255, 0.6), 0 0 80px rgba(168, 85, 247, 0.3);
            }
        }

        .ai-welcome h3 {
            font-size: 24px;
            margin-bottom: 24px;
            color: var(--text-primary);
        }

        .ai-suggestions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            max-width: 500px;
        }

        .ai-suggestion-chip {
            padding: 12px 16px;
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid rgba(0, 212, 255, 0.2);
            border-radius: 12px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            font-weight: 500;
        }

        .ai-suggestion-chip:hover {
            background: rgba(0, 212, 255, 0.2);
            border-color: var(--accent-cyan);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 212, 255, 0.3);
        }

        .ai-suggestion-chip i {
            color: var(--accent-cyan);
            font-size: 14px;
        }

        .ai-message {
            display: flex;
            animation: aiMessageSlideIn 0.4s ease;
        }

        @keyframes aiMessageSlideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .ai-message-user {
            justify-content: flex-end;
        }

        .ai-message-content {
            max-width: 70%;
            padding: 14px 18px;
            border-radius: 16px;
            font-size: 14px;
            line-height: 1.6;
        }

        .ai-message-user .ai-message-content {
            background: linear-gradient(135deg, #00d4ff, #0088ff);
            color: white;
            border-bottom-right-radius: 4px;
        }

        .ai-message-assistant .ai-message-content {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
            border-bottom-left-radius: 4px;
        }

        .ai-message-content code {
            background: rgba(0, 0, 0, 0.4);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            color: var(--accent-cyan);
        }

        .ai-message-content pre {
            background: rgba(0, 0, 0, 0.6);
            padding: 12px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 8px 0;
        }

        .ai-message-content pre code {
            background: none;
            padding: 0;
        }

        .ai-message-meta {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 8px;
            font-size: 11px;
            color: rgba(255, 255, 255, 0.4);
        }

        .ai-thinking {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 18px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            max-width: 200px;
        }

        .ai-thinking-dots {
            display: flex;
            gap: 6px;
        }

        .ai-thinking-dots span {
            width: 8px;
            height: 8px;
            background: var(--accent-cyan);
            border-radius: 50%;
            animation: aiThinkingBounce 1.4s ease-in-out infinite;
        }

        .ai-thinking-dots span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .ai-thinking-dots span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes aiThinkingBounce {
            0%, 60%, 100% {
                transform: translateY(0);
                opacity: 0.4;
            }
            30% {
                transform: translateY(-10px);
                opacity: 1;
            }
        }

        .ai-thinking-text {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .ai-chat-input-bar {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 20px 24px;
            background: rgba(0, 0, 0, 0.3);
            border-top: 1px solid rgba(0, 212, 255, 0.2);
        }

        .ai-model-btn,
        .ai-mic-btn,
        .ai-send-btn {
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .ai-model-btn:hover,
        .ai-mic-btn:hover {
            background: rgba(0, 212, 255, 0.1);
            border-color: var(--accent-cyan);
            color: var(--accent-cyan);
        }

        .ai-send-btn {
            background: linear-gradient(135deg, #00d4ff, #0088ff);
            border-color: transparent;
            color: white;
        }

        .ai-send-btn:hover {
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
            transform: scale(1.05);
        }

        #aiChatInput {
            flex: 1;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 12px 16px;
            color: var(--text-primary);
            font-size: 14px;
            outline: none;
            transition: all 0.3s ease;
        }

        #aiChatInput:focus {
            background: rgba(255, 255, 255, 0.08);
            border-color: var(--accent-cyan);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.2);
        }

        #aiChatInput::placeholder {
            color: var(--text-muted);
        }

        .ai-model-selector {
            position: absolute;
            bottom: 80px;
            left: 24px;
            background: rgba(8, 8, 14, 0.98);
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 16px;
            padding: 12px;
            width: 320px;
            max-height: 400px;
            overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            z-index: 100;
        }

        .ai-model-title {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: rgba(255, 255, 255, 0.4);
            margin-bottom: 12px;
            padding: 0 8px;
        }

        .ai-model-option {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 4px;
        }

        .ai-model-option:hover {
            background: rgba(0, 212, 255, 0.1);
        }

        .ai-model-option i {
            color: var(--accent-cyan);
            font-size: 16px;
            width: 20px;
            text-align: center;
        }

        .ai-model-name {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .ai-model-desc {
            font-size: 11px;
            color: var(--text-muted);
            margin-top: 2px;
        }

        /* AI Button Glow Effect */
        #aiChatBtn {
            position: relative;
            overflow: visible;
        }

        #aiChatBtn::after {
            content: '';
            position: absolute;
            inset: -2px;
            background: linear-gradient(135deg, #00d4ff, #a855f7);
            border-radius: 12px;
            opacity: 0;
            z-index: -1;
            transition: opacity 0.3s ease;
        }

        #aiChatBtn:hover::after {
            opacity: 0.3;
            animation: aiButtonGlow 2s ease-in-out infinite;
        }

        @keyframes aiButtonGlow {
            0%, 100% {
                box-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
            }
            50% {
                box-shadow: 0 0 40px rgba(168, 85, 247, 0.7);
            }
        }

        /* Scrollbar for AI Chat */
        .ai-chat-messages::-webkit-scrollbar,
        .ai-model-selector::-webkit-scrollbar {
            width: 6px;
        }

        .ai-chat-messages::-webkit-scrollbar-track,
        .ai-model-selector::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
        }

        .ai-chat-messages::-webkit-scrollbar-thumb,
        .ai-model-selector::-webkit-scrollbar-thumb {
            background: rgba(0, 212, 255, 0.3);
            border-radius: 3px;
        }

        .ai-chat-messages::-webkit-scrollbar-thumb:hover,
        .ai-model-selector::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 212, 255, 0.5);
        }
    </style>
</body>

</html>